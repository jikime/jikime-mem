#!/usr/bin/env node
var P3=Object.create;var{getPrototypeOf:I3,defineProperty:X6,getOwnPropertyNames:E3}=Object;var b3=Object.prototype.hasOwnProperty;var EX=(Q,X,Y)=>{Y=Q!=null?P3(I3(Q)):{};let W=X||!Q||!Q.__esModule?X6(Y,"default",{value:Q,enumerable:!0}):Y;for(let G of E3(Q))if(!b3.call(W,G))X6(W,G,{get:()=>Q[G],enumerable:!0});return W};var q=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var bX=(Q,X)=>{for(var Y in X)X6(Q,Y,{get:X[Y],enumerable:!0,configurable:!0,set:(W)=>X[Y]=()=>W})};var $9=q((fG)=>{Object.defineProperty(fG,"__esModule",{value:!0});fG.regexpCode=fG.getEsmExportName=fG.getProperty=fG.safeStringify=fG.stringify=fG.strConcat=fG.addCodeArg=fG.str=fG._=fG.nil=fG._Code=fG.Name=fG.IDENTIFIER=fG._CodeOrName=void 0;class FQ{}fG._CodeOrName=FQ;fG.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class w1 extends FQ{constructor(Q){super();if(!fG.IDENTIFIER.test(Q))throw Error("CodeGen: name must be a valid identifier");this.str=Q}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}fG.Name=w1;class T0 extends FQ{constructor(Q){super();this._items=typeof Q==="string"?[Q]:Q}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let Q=this._items[0];return Q===""||Q==='""'}get str(){var Q;return(Q=this._str)!==null&&Q!==void 0?Q:this._str=this._items.reduce((X,Y)=>`${X}${Y}`,"")}get names(){var Q;return(Q=this._names)!==null&&Q!==void 0?Q:this._names=this._items.reduce((X,Y)=>{if(Y instanceof w1)X[Y.str]=(X[Y.str]||0)+1;return X},{})}}fG._Code=T0;fG.nil=new T0("");function hG(Q,...X){let Y=[Q[0]],W=0;while(W<X.length)D8(Y,X[W]),Y.push(Q[++W]);return new T0(Y)}fG._=hG;var F8=new T0("+");function uG(Q,...X){let Y=[H9(Q[0])],W=0;while(W<X.length)Y.push(F8),D8(Y,X[W]),Y.push(F8,H9(Q[++W]));return nK(Y),new T0(Y)}fG.str=uG;function D8(Q,X){if(X instanceof T0)Q.push(...X._items);else if(X instanceof w1)Q.push(X);else Q.push(aK(X))}fG.addCodeArg=D8;function nK(Q){let X=1;while(X<Q.length-1){if(Q[X]===F8){let Y=oK(Q[X-1],Q[X+1]);if(Y!==void 0){Q.splice(X-1,3,Y);continue}Q[X++]="+"}X++}}function oK(Q,X){if(X==='""')return Q;if(Q==='""')return X;if(typeof Q=="string"){if(X instanceof w1||Q[Q.length-1]!=='"')return;if(typeof X!="string")return`${Q.slice(0,-1)}${X}"`;if(X[0]==='"')return Q.slice(0,-1)+X.slice(1);return}if(typeof X=="string"&&X[0]==='"'&&!(Q instanceof w1))return`"${Q}${X.slice(1)}`;return}function tK(Q,X){return X.emptyStr()?Q:Q.emptyStr()?X:uG`${Q}${X}`}fG.strConcat=tK;function aK(Q){return typeof Q=="number"||typeof Q=="boolean"||Q===null?Q:H9(Array.isArray(Q)?Q.join(","):Q)}function sK(Q){return new T0(H9(Q))}fG.stringify=sK;function H9(Q){return JSON.stringify(Q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}fG.safeStringify=H9;function eK(Q){return typeof Q=="string"&&fG.IDENTIFIER.test(Q)?new T0(`.${Q}`):hG`[${Q}]`}fG.getProperty=eK;function Qz(Q){if(typeof Q=="string"&&fG.IDENTIFIER.test(Q))return new T0(`${Q}`);throw Error(`CodeGen: invalid export name: ${Q}, use explicit $id name mapping`)}fG.getEsmExportName=Qz;function Xz(Q){return new T0(Q.toString())}fG.regexpCode=Xz});var Z8=q((pG)=>{Object.defineProperty(pG,"__esModule",{value:!0});pG.ValueScope=pG.ValueScopeName=pG.Scope=pG.varKinds=pG.UsedValueState=void 0;var L0=$9();class mG extends Error{constructor(Q){super(`CodeGen: "code" for ${Q} not defined`);this.value=Q.value}}var UQ;(function(Q){Q[Q.Started=0]="Started",Q[Q.Completed=1]="Completed"})(UQ||(pG.UsedValueState=UQ={}));pG.varKinds={const:new L0.Name("const"),let:new L0.Name("let"),var:new L0.Name("var")};class V8{constructor({prefixes:Q,parent:X}={}){this._names={},this._prefixes=Q,this._parent=X}toName(Q){return Q instanceof L0.Name?Q:this.name(Q)}name(Q){return new L0.Name(this._newName(Q))}_newName(Q){let X=this._names[Q]||this._nameGroup(Q);return`${Q}${X.index++}`}_nameGroup(Q){var X,Y;if(((Y=(X=this._parent)===null||X===void 0?void 0:X._prefixes)===null||Y===void 0?void 0:Y.has(Q))||this._prefixes&&!this._prefixes.has(Q))throw Error(`CodeGen: prefix "${Q}" is not allowed in this scope`);return this._names[Q]={prefix:Q,index:0}}}pG.Scope=V8;class O8 extends L0.Name{constructor(Q,X){super(X);this.prefix=Q}setValue(Q,{property:X,itemIndex:Y}){this.value=Q,this.scopePath=L0._`.${new L0.Name(X)}[${Y}]`}}pG.ValueScopeName=O8;var Dz=L0._`\n`;class cG extends V8{constructor(Q){super(Q);this._values={},this._scope=Q.scope,this.opts={...Q,_n:Q.lines?Dz:L0.nil}}get(){return this._scope}name(Q){return new O8(Q,this._newName(Q))}value(Q,X){var Y;if(X.ref===void 0)throw Error("CodeGen: ref must be passed in value");let W=this.toName(Q),{prefix:G}=W,J=(Y=X.key)!==null&&Y!==void 0?Y:X.ref,H=this._values[G];if(H){let K=H.get(J);if(K)return K}else H=this._values[G]=new Map;H.set(J,W);let $=this._scope[G]||(this._scope[G]=[]),B=$.length;return $[B]=X.ref,W.setValue(X,{property:G,itemIndex:B}),W}getValue(Q,X){let Y=this._values[Q];if(!Y)return;return Y.get(X)}scopeRefs(Q,X=this._values){return this._reduceValues(X,(Y)=>{if(Y.scopePath===void 0)throw Error(`CodeGen: name "${Y}" has no value`);return L0._`${Q}${Y.scopePath}`})}scopeCode(Q=this._values,X,Y){return this._reduceValues(Q,(W)=>{if(W.value===void 0)throw Error(`CodeGen: name "${W}" has no value`);return W.value.code},X,Y)}_reduceValues(Q,X,Y={},W){let G=L0.nil;for(let J in Q){let H=Q[J];if(!H)continue;let $=Y[J]=Y[J]||new Map;H.forEach((B)=>{if($.has(B))return;$.set(B,UQ.Started);let K=X(B);if(K){let z=this.opts.es5?pG.varKinds.var:pG.varKinds.const;G=L0._`${G}${z} ${B} = ${K};${this.opts._n}`}else if(K=W===null||W===void 0?void 0:W(B))G=L0._`${G}${K}${this.opts._n}`;else throw new mG(B);$.set(B,UQ.Completed)})}return G}}pG.ValueScope=cG});var k=q((F0)=>{Object.defineProperty(F0,"__esModule",{value:!0});F0.or=F0.and=F0.not=F0.CodeGen=F0.operators=F0.varKinds=F0.ValueScopeName=F0.ValueScope=F0.Scope=F0.Name=F0.regexpCode=F0.stringify=F0.getProperty=F0.nil=F0.strConcat=F0.str=F0._=void 0;var x=$9(),j0=Z8(),e0=$9();Object.defineProperty(F0,"_",{enumerable:!0,get:function(){return e0._}});Object.defineProperty(F0,"str",{enumerable:!0,get:function(){return e0.str}});Object.defineProperty(F0,"strConcat",{enumerable:!0,get:function(){return e0.strConcat}});Object.defineProperty(F0,"nil",{enumerable:!0,get:function(){return e0.nil}});Object.defineProperty(F0,"getProperty",{enumerable:!0,get:function(){return e0.getProperty}});Object.defineProperty(F0,"stringify",{enumerable:!0,get:function(){return e0.stringify}});Object.defineProperty(F0,"regexpCode",{enumerable:!0,get:function(){return e0.regexpCode}});Object.defineProperty(F0,"Name",{enumerable:!0,get:function(){return e0.Name}});var NQ=Z8();Object.defineProperty(F0,"Scope",{enumerable:!0,get:function(){return NQ.Scope}});Object.defineProperty(F0,"ValueScope",{enumerable:!0,get:function(){return NQ.ValueScope}});Object.defineProperty(F0,"ValueScopeName",{enumerable:!0,get:function(){return NQ.ValueScopeName}});Object.defineProperty(F0,"varKinds",{enumerable:!0,get:function(){return NQ.varKinds}});F0.operators={GT:new x._Code(">"),GTE:new x._Code(">="),LT:new x._Code("<"),LTE:new x._Code("<="),EQ:new x._Code("==="),NEQ:new x._Code("!=="),NOT:new x._Code("!"),OR:new x._Code("||"),AND:new x._Code("&&"),ADD:new x._Code("+")};class Q1{optimizeNodes(){return this}optimizeNames(Q,X){return this}}class iG extends Q1{constructor(Q,X,Y){super();this.varKind=Q,this.name=X,this.rhs=Y}render({es5:Q,_n:X}){let Y=Q?j0.varKinds.var:this.varKind,W=this.rhs===void 0?"":` = ${this.rhs}`;return`${Y} ${this.name}${W};`+X}optimizeNames(Q,X){if(!Q[this.name.str])return;if(this.rhs)this.rhs=I1(this.rhs,Q,X);return this}get names(){return this.rhs instanceof x._CodeOrName?this.rhs.names:{}}}class N8 extends Q1{constructor(Q,X,Y){super();this.lhs=Q,this.rhs=X,this.sideEffects=Y}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,X){if(this.lhs instanceof x.Name&&!Q[this.lhs.str]&&!this.sideEffects)return;return this.rhs=I1(this.rhs,Q,X),this}get names(){let Q=this.lhs instanceof x.Name?{}:{...this.lhs.names};return qQ(Q,this.rhs)}}class rG extends N8{constructor(Q,X,Y,W){super(Q,Y,W);this.op=X}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class nG extends Q1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class oG extends Q1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class tG extends Q1{constructor(Q){super();this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class aG extends Q1{constructor(Q){super();this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,X){return this.code=I1(this.code,Q,X),this}get names(){return this.code instanceof x._CodeOrName?this.code.names:{}}}class wQ extends Q1{constructor(Q=[]){super();this.nodes=Q}render(Q){return this.nodes.reduce((X,Y)=>X+Y.render(Q),"")}optimizeNodes(){let{nodes:Q}=this,X=Q.length;while(X--){let Y=Q[X].optimizeNodes();if(Array.isArray(Y))Q.splice(X,1,...Y);else if(Y)Q[X]=Y;else Q.splice(X,1)}return Q.length>0?this:void 0}optimizeNames(Q,X){let{nodes:Y}=this,W=Y.length;while(W--){let G=Y[W];if(G.optimizeNames(Q,X))continue;Zz(Q,G.names),Y.splice(W,1)}return Y.length>0?this:void 0}get names(){return this.nodes.reduce((Q,X)=>B1(Q,X.names),{})}}class X1 extends wQ{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class sG extends wQ{}class B9 extends X1{}B9.kind="else";class l0 extends X1{constructor(Q,X){super(X);this.condition=Q}render(Q){let X=`if(${this.condition})`+super.render(Q);if(this.else)X+="else "+this.else.render(Q);return X}optimizeNodes(){super.optimizeNodes();let Q=this.condition;if(Q===!0)return this.nodes;let X=this.else;if(X){let Y=X.optimizeNodes();X=this.else=Array.isArray(Y)?new B9(Y):Y}if(X){if(Q===!1)return X instanceof l0?X:X.nodes;if(this.nodes.length)return this;return new l0(WJ(Q),X instanceof l0?[X]:X.nodes)}if(Q===!1||!this.nodes.length)return;return this}optimizeNames(Q,X){var Y;if(this.else=(Y=this.else)===null||Y===void 0?void 0:Y.optimizeNames(Q,X),!(super.optimizeNames(Q,X)||this.else))return;return this.condition=I1(this.condition,Q,X),this}get names(){let Q=super.names;if(qQ(Q,this.condition),this.else)B1(Q,this.else.names);return Q}}l0.kind="if";class P1 extends X1{}P1.kind="for";class eG extends P1{constructor(Q){super();this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iteration=I1(this.iteration,Q,X),this}get names(){return B1(super.names,this.iteration.names)}}class QJ extends P1{constructor(Q,X,Y,W){super();this.varKind=Q,this.name=X,this.from=Y,this.to=W}render(Q){let X=Q.es5?j0.varKinds.var:this.varKind,{name:Y,from:W,to:G}=this;return`for(${X} ${Y}=${W}; ${Y}<${G}; ${Y}++)`+super.render(Q)}get names(){let Q=qQ(super.names,this.from);return qQ(Q,this.to)}}class M8 extends P1{constructor(Q,X,Y,W){super();this.loop=Q,this.varKind=X,this.name=Y,this.iterable=W}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iterable=I1(this.iterable,Q,X),this}get names(){return B1(super.names,this.iterable.names)}}class VQ extends X1{constructor(Q,X,Y){super();this.name=Q,this.args=X,this.async=Y}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}VQ.kind="func";class OQ extends wQ{render(Q){return"return "+super.render(Q)}}OQ.kind="return";class XJ extends X1{render(Q){let X="try"+super.render(Q);if(this.catch)X+=this.catch.render(Q);if(this.finally)X+=this.finally.render(Q);return X}optimizeNodes(){var Q,X;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(Q,X){var Y,W;return super.optimizeNames(Q,X),(Y=this.catch)===null||Y===void 0||Y.optimizeNames(Q,X),(W=this.finally)===null||W===void 0||W.optimizeNames(Q,X),this}get names(){let Q=super.names;if(this.catch)B1(Q,this.catch.names);if(this.finally)B1(Q,this.finally.names);return Q}}class ZQ extends X1{constructor(Q){super();this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}ZQ.kind="catch";class MQ extends X1{render(Q){return"finally"+super.render(Q)}}MQ.kind="finally";class YJ{constructor(Q,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=Q,this._scope=new j0.Scope({parent:Q}),this._nodes=[new sG]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,X){let Y=this._extScope.value(Q,X);return(this._values[Y.prefix]||(this._values[Y.prefix]=new Set)).add(Y),Y}getScopeValue(Q,X){return this._extScope.getValue(Q,X)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,X,Y,W){let G=this._scope.toName(X);if(Y!==void 0&&W)this._constants[G.str]=Y;return this._leafNode(new iG(Q,G,Y)),G}const(Q,X,Y){return this._def(j0.varKinds.const,Q,X,Y)}let(Q,X,Y){return this._def(j0.varKinds.let,Q,X,Y)}var(Q,X,Y){return this._def(j0.varKinds.var,Q,X,Y)}assign(Q,X,Y){return this._leafNode(new N8(Q,X,Y))}add(Q,X){return this._leafNode(new rG(Q,F0.operators.ADD,X))}code(Q){if(typeof Q=="function")Q();else if(Q!==x.nil)this._leafNode(new aG(Q));return this}object(...Q){let X=["{"];for(let[Y,W]of Q){if(X.length>1)X.push(",");if(X.push(Y),Y!==W||this.opts.es5)X.push(":"),(0,x.addCodeArg)(X,W)}return X.push("}"),new x._Code(X)}if(Q,X,Y){if(this._blockNode(new l0(Q)),X&&Y)this.code(X).else().code(Y).endIf();else if(X)this.code(X).endIf();else if(Y)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new l0(Q))}else(){return this._elseNode(new B9)}endIf(){return this._endBlockNode(l0,B9)}_for(Q,X){if(this._blockNode(Q),X)this.code(X).endFor();return this}for(Q,X){return this._for(new eG(Q),X)}forRange(Q,X,Y,W,G=this.opts.es5?j0.varKinds.var:j0.varKinds.let){let J=this._scope.toName(Q);return this._for(new QJ(G,J,X,Y),()=>W(J))}forOf(Q,X,Y,W=j0.varKinds.const){let G=this._scope.toName(Q);if(this.opts.es5){let J=X instanceof x.Name?X:this.var("_arr",X);return this.forRange("_i",0,x._`${J}.length`,(H)=>{this.var(G,x._`${J}[${H}]`),Y(G)})}return this._for(new M8("of",W,G,X),()=>Y(G))}forIn(Q,X,Y,W=this.opts.es5?j0.varKinds.var:j0.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,x._`Object.keys(${X})`,Y);let G=this._scope.toName(Q);return this._for(new M8("in",W,G,X),()=>Y(G))}endFor(){return this._endBlockNode(P1)}label(Q){return this._leafNode(new nG(Q))}break(Q){return this._leafNode(new oG(Q))}return(Q){let X=new OQ;if(this._blockNode(X),this.code(Q),X.nodes.length!==1)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(OQ)}try(Q,X,Y){if(!X&&!Y)throw Error('CodeGen: "try" without "catch" and "finally"');let W=new XJ;if(this._blockNode(W),this.code(Q),X){let G=this.name("e");this._currNode=W.catch=new ZQ(G),X(G)}if(Y)this._currNode=W.finally=new MQ,this.code(Y);return this._endBlockNode(ZQ,MQ)}throw(Q){return this._leafNode(new tG(Q))}block(Q,X){if(this._blockStarts.push(this._nodes.length),Q)this.code(Q).endBlock(X);return this}endBlock(Q){let X=this._blockStarts.pop();if(X===void 0)throw Error("CodeGen: not in self-balancing block");let Y=this._nodes.length-X;if(Y<0||Q!==void 0&&Y!==Q)throw Error(`CodeGen: wrong number of nodes: ${Y} vs ${Q} expected`);return this._nodes.length=X,this}func(Q,X=x.nil,Y,W){if(this._blockNode(new VQ(Q,X,Y)),W)this.code(W).endFunc();return this}endFunc(){return this._endBlockNode(VQ)}optimize(Q=1){while(Q-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,X){let Y=this._currNode;if(Y instanceof Q||X&&Y instanceof X)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${X?`${Q.kind}/${X.kind}`:Q.kind}"`)}_elseNode(Q){let X=this._currNode;if(!(X instanceof l0))throw Error('CodeGen: "else" without "if"');return this._currNode=X.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){let Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){let X=this._nodes;X[X.length-1]=Q}}F0.CodeGen=YJ;function B1(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)+(X[Y]||0);return Q}function qQ(Q,X){return X instanceof x._CodeOrName?B1(Q,X.names):Q}function I1(Q,X,Y){if(Q instanceof x.Name)return W(Q);if(!G(Q))return Q;return new x._Code(Q._items.reduce((J,H)=>{if(H instanceof x.Name)H=W(H);if(H instanceof x._Code)J.push(...H._items);else J.push(H);return J},[]));function W(J){let H=Y[J.str];if(H===void 0||X[J.str]!==1)return J;return delete X[J.str],H}function G(J){return J instanceof x._Code&&J._items.some((H)=>H instanceof x.Name&&X[H.str]===1&&Y[H.str]!==void 0)}}function Zz(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)-(X[Y]||0)}function WJ(Q){return typeof Q=="boolean"||typeof Q=="number"||Q===null?!Q:x._`!${q8(Q)}`}F0.not=WJ;var Mz=GJ(F0.operators.AND);function qz(...Q){return Q.reduce(Mz)}F0.and=qz;var Nz=GJ(F0.operators.OR);function wz(...Q){return Q.reduce(Nz)}F0.or=wz;function GJ(Q){return(X,Y)=>X===x.nil?Y:Y===x.nil?X:x._`${q8(X)} ${Q} ${q8(Y)}`}function q8(Q){return Q instanceof x.Name?Q:x._`(${Q})`}});var h=q((FJ)=>{Object.defineProperty(FJ,"__esModule",{value:!0});FJ.checkStrictMode=FJ.getErrorPath=FJ.Type=FJ.useFunc=FJ.setEvaluated=FJ.evaluatedPropsToName=FJ.mergeEvaluated=FJ.eachItem=FJ.unescapeJsonPointer=FJ.escapeJsonPointer=FJ.escapeFragment=FJ.unescapeFragment=FJ.schemaRefOrVal=FJ.schemaHasRulesButRef=FJ.schemaHasRules=FJ.checkUnknownRules=FJ.alwaysValidSchema=FJ.toHash=void 0;var l=k(),bz=$9();function Tz(Q){let X={};for(let Y of Q)X[Y]=!0;return X}FJ.toHash=Tz;function jz(Q,X){if(typeof X=="boolean")return X;if(Object.keys(X).length===0)return!0;return BJ(Q,X),!KJ(X,Q.self.RULES.all)}FJ.alwaysValidSchema=jz;function BJ(Q,X=Q.schema){let{opts:Y,self:W}=Q;if(!Y.strictSchema)return;if(typeof X==="boolean")return;let G=W.RULES.keywords;for(let J in X)if(!G[J])LJ(Q,`unknown keyword: "${J}"`)}FJ.checkUnknownRules=BJ;function KJ(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X[Y])return!0;return!1}FJ.schemaHasRules=KJ;function Rz(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(Y!=="$ref"&&X.all[Y])return!0;return!1}FJ.schemaHasRulesButRef=Rz;function Sz({topSchemaRef:Q,schemaPath:X},Y,W,G){if(!G){if(typeof Y=="number"||typeof Y=="boolean")return Y;if(typeof Y=="string")return l._`${Y}`}return l._`${Q}${X}${(0,l.getProperty)(W)}`}FJ.schemaRefOrVal=Sz;function Cz(Q){return zJ(decodeURIComponent(Q))}FJ.unescapeFragment=Cz;function kz(Q){return encodeURIComponent(P8(Q))}FJ.escapeFragment=kz;function P8(Q){if(typeof Q=="number")return`${Q}`;return Q.replace(/~/g,"~0").replace(/\//g,"~1")}FJ.escapeJsonPointer=P8;function zJ(Q){return Q.replace(/~1/g,"/").replace(/~0/g,"~")}FJ.unescapeJsonPointer=zJ;function vz(Q,X){if(Array.isArray(Q))for(let Y of Q)X(Y);else X(Q)}FJ.eachItem=vz;function HJ({mergeNames:Q,mergeToName:X,mergeValues:Y,resultToName:W}){return(G,J,H,$)=>{let B=H===void 0?J:H instanceof l.Name?(J instanceof l.Name?Q(G,J,H):X(G,J,H),H):J instanceof l.Name?(X(G,H,J),J):Y(J,H);return $===l.Name&&!(B instanceof l.Name)?W(G,B):B}}FJ.mergeEvaluated={props:HJ({mergeNames:(Q,X,Y)=>Q.if(l._`${Y} !== true && ${X} !== undefined`,()=>{Q.if(l._`${X} === true`,()=>Q.assign(Y,!0),()=>Q.assign(Y,l._`${Y} || {}`).code(l._`Object.assign(${Y}, ${X})`))}),mergeToName:(Q,X,Y)=>Q.if(l._`${Y} !== true`,()=>{if(X===!0)Q.assign(Y,!0);else Q.assign(Y,l._`${Y} || {}`),I8(Q,Y,X)}),mergeValues:(Q,X)=>Q===!0?!0:{...Q,...X},resultToName:AJ}),items:HJ({mergeNames:(Q,X,Y)=>Q.if(l._`${Y} !== true && ${X} !== undefined`,()=>Q.assign(Y,l._`${X} === true ? true : ${Y} > ${X} ? ${Y} : ${X}`)),mergeToName:(Q,X,Y)=>Q.if(l._`${Y} !== true`,()=>Q.assign(Y,X===!0?!0:l._`${Y} > ${X} ? ${Y} : ${X}`)),mergeValues:(Q,X)=>Q===!0?!0:Math.max(Q,X),resultToName:(Q,X)=>Q.var("items",X)})};function AJ(Q,X){if(X===!0)return Q.var("props",!0);let Y=Q.var("props",l._`{}`);if(X!==void 0)I8(Q,Y,X);return Y}FJ.evaluatedPropsToName=AJ;function I8(Q,X,Y){Object.keys(Y).forEach((W)=>Q.assign(l._`${X}${(0,l.getProperty)(W)}`,!0))}FJ.setEvaluated=I8;var $J={};function _z(Q,X){return Q.scopeValue("func",{ref:X,code:$J[X.code]||($J[X.code]=new bz._Code(X.code))})}FJ.useFunc=_z;var w8;(function(Q){Q[Q.Num=0]="Num",Q[Q.Str=1]="Str"})(w8||(FJ.Type=w8={}));function xz(Q,X,Y){if(Q instanceof l.Name){let W=X===w8.Num;return Y?W?l._`"[" + ${Q} + "]"`:l._`"['" + ${Q} + "']"`:W?l._`"/" + ${Q}`:l._`"/" + ${Q}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Y?(0,l.getProperty)(Q).toString():"/"+P8(Q)}FJ.getErrorPath=xz;function LJ(Q,X,Y=Q.opts.strictSchema){if(!Y)return;if(X=`strict mode: ${X}`,Y===!0)throw Error(X);Q.self.logger.warn(X)}FJ.checkStrictMode=LJ});var m0=q((UJ)=>{Object.defineProperty(UJ,"__esModule",{value:!0});var H0=k(),ez={data:new H0.Name("data"),valCxt:new H0.Name("valCxt"),instancePath:new H0.Name("instancePath"),parentData:new H0.Name("parentData"),parentDataProperty:new H0.Name("parentDataProperty"),rootData:new H0.Name("rootData"),dynamicAnchors:new H0.Name("dynamicAnchors"),vErrors:new H0.Name("vErrors"),errors:new H0.Name("errors"),this:new H0.Name("this"),self:new H0.Name("self"),scope:new H0.Name("scope"),json:new H0.Name("json"),jsonPos:new H0.Name("jsonPos"),jsonLen:new H0.Name("jsonLen"),jsonPart:new H0.Name("jsonPart")};UJ.default=ez});var K9=q((MJ)=>{Object.defineProperty(MJ,"__esModule",{value:!0});MJ.extendErrors=MJ.resetErrorsCount=MJ.reportExtraError=MJ.reportError=MJ.keyword$DataError=MJ.keywordError=void 0;var g=k(),IQ=h(),K0=m0();MJ.keywordError={message:({keyword:Q})=>g.str`must pass "${Q}" keyword validation`};MJ.keyword$DataError={message:({keyword:Q,schemaType:X})=>X?g.str`"${Q}" keyword must be ${X} ($data)`:g.str`"${Q}" keyword is invalid ($data)`};function XA(Q,X=MJ.keywordError,Y,W){let{it:G}=Q,{gen:J,compositeRule:H,allErrors:$}=G,B=ZJ(Q,X,Y);if(W!==null&&W!==void 0?W:H||$)VJ(J,B);else OJ(G,g._`[${B}]`)}MJ.reportError=XA;function YA(Q,X=MJ.keywordError,Y){let{it:W}=Q,{gen:G,compositeRule:J,allErrors:H}=W,$=ZJ(Q,X,Y);if(VJ(G,$),!(J||H))OJ(W,K0.default.vErrors)}MJ.reportExtraError=YA;function WA(Q,X){Q.assign(K0.default.errors,X),Q.if(g._`${K0.default.vErrors} !== null`,()=>Q.if(X,()=>Q.assign(g._`${K0.default.vErrors}.length`,X),()=>Q.assign(K0.default.vErrors,null)))}MJ.resetErrorsCount=WA;function GA({gen:Q,keyword:X,schemaValue:Y,data:W,errsCount:G,it:J}){if(G===void 0)throw Error("ajv implementation error");let H=Q.name("err");Q.forRange("i",G,K0.default.errors,($)=>{if(Q.const(H,g._`${K0.default.vErrors}[${$}]`),Q.if(g._`${H}.instancePath === undefined`,()=>Q.assign(g._`${H}.instancePath`,(0,g.strConcat)(K0.default.instancePath,J.errorPath))),Q.assign(g._`${H}.schemaPath`,g.str`${J.errSchemaPath}/${X}`),J.opts.verbose)Q.assign(g._`${H}.schema`,Y),Q.assign(g._`${H}.data`,W)})}MJ.extendErrors=GA;function VJ(Q,X){let Y=Q.const("err",X);Q.if(g._`${K0.default.vErrors} === null`,()=>Q.assign(K0.default.vErrors,g._`[${Y}]`),g._`${K0.default.vErrors}.push(${Y})`),Q.code(g._`${K0.default.errors}++`)}function OJ(Q,X){let{gen:Y,validateName:W,schemaEnv:G}=Q;if(G.$async)Y.throw(g._`new ${Q.ValidationError}(${X})`);else Y.assign(g._`${W}.errors`,X),Y.return(!1)}var K1={keyword:new g.Name("keyword"),schemaPath:new g.Name("schemaPath"),params:new g.Name("params"),propertyName:new g.Name("propertyName"),message:new g.Name("message"),schema:new g.Name("schema"),parentSchema:new g.Name("parentSchema")};function ZJ(Q,X,Y){let{createErrors:W}=Q.it;if(W===!1)return g._`{}`;return JA(Q,X,Y)}function JA(Q,X,Y={}){let{gen:W,it:G}=Q,J=[HA(G,Y),$A(Q,Y)];return BA(Q,X,J),W.object(...J)}function HA({errorPath:Q},{instancePath:X}){let Y=X?g.str`${Q}${(0,IQ.getErrorPath)(X,IQ.Type.Str)}`:Q;return[K0.default.instancePath,(0,g.strConcat)(K0.default.instancePath,Y)]}function $A({keyword:Q,it:{errSchemaPath:X}},{schemaPath:Y,parentSchema:W}){let G=W?X:g.str`${X}/${Q}`;if(Y)G=g.str`${G}${(0,IQ.getErrorPath)(Y,IQ.Type.Str)}`;return[K1.schemaPath,G]}function BA(Q,{params:X,message:Y},W){let{keyword:G,data:J,schemaValue:H,it:$}=Q,{opts:B,propertyName:K,topSchemaRef:z,schemaPath:A}=$;if(W.push([K1.keyword,G],[K1.params,typeof X=="function"?X(Q):X||g._`{}`]),B.messages)W.push([K1.message,typeof Y=="function"?Y(Q):Y]);if(B.verbose)W.push([K1.schema,H],[K1.parentSchema,g._`${z}${A}`],[K0.default.data,J]);if(K)W.push([K1.propertyName,K])}});var IJ=q((wJ)=>{Object.defineProperty(wJ,"__esModule",{value:!0});wJ.boolOrEmptySchema=wJ.topBoolOrEmptySchema=void 0;var FA=K9(),DA=k(),UA=m0(),VA={message:"boolean schema is false"};function OA(Q){let{gen:X,schema:Y,validateName:W}=Q;if(Y===!1)NJ(Q,!1);else if(typeof Y=="object"&&Y.$async===!0)X.return(UA.default.data);else X.assign(DA._`${W}.errors`,null),X.return(!0)}wJ.topBoolOrEmptySchema=OA;function ZA(Q,X){let{gen:Y,schema:W}=Q;if(W===!1)Y.var(X,!1),NJ(Q);else Y.var(X,!0)}wJ.boolOrEmptySchema=ZA;function NJ(Q,X){let{gen:Y,data:W}=Q,G={gen:Y,keyword:"false schema",data:W,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:Q};(0,FA.reportError)(G,VA,void 0,X)}});var b8=q((EJ)=>{Object.defineProperty(EJ,"__esModule",{value:!0});EJ.getRules=EJ.isJSONType=void 0;var qA=["string","number","integer","boolean","null","object","array"],NA=new Set(qA);function wA(Q){return typeof Q=="string"&&NA.has(Q)}EJ.isJSONType=wA;function PA(){let Q={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...Q,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},Q.number,Q.string,Q.array,Q.object],post:{rules:[]},all:{},keywords:{}}}EJ.getRules=PA});var T8=q((RJ)=>{Object.defineProperty(RJ,"__esModule",{value:!0});RJ.shouldUseRule=RJ.shouldUseGroup=RJ.schemaHasRulesForType=void 0;function EA({schema:Q,self:X},Y){let W=X.RULES.types[Y];return W&&W!==!0&&TJ(Q,W)}RJ.schemaHasRulesForType=EA;function TJ(Q,X){return X.rules.some((Y)=>jJ(Q,Y))}RJ.shouldUseGroup=TJ;function jJ(Q,X){var Y;return Q[X.keyword]!==void 0||((Y=X.definition.implements)===null||Y===void 0?void 0:Y.some((W)=>Q[W]!==void 0))}RJ.shouldUseRule=jJ});var z9=q((_J)=>{Object.defineProperty(_J,"__esModule",{value:!0});_J.reportTypeError=_J.checkDataTypes=_J.checkDataType=_J.coerceAndCheckDataType=_J.getJSONTypes=_J.getSchemaTypes=_J.DataType=void 0;var jA=b8(),RA=T8(),SA=K9(),S=k(),CJ=h(),E1;(function(Q){Q[Q.Correct=0]="Correct",Q[Q.Wrong=1]="Wrong"})(E1||(_J.DataType=E1={}));function CA(Q){let X=kJ(Q.type);if(X.includes("null")){if(Q.nullable===!1)throw Error("type: null contradicts nullable: false")}else{if(!X.length&&Q.nullable!==void 0)throw Error('"nullable" cannot be used without "type"');if(Q.nullable===!0)X.push("null")}return X}_J.getSchemaTypes=CA;function kJ(Q){let X=Array.isArray(Q)?Q:Q?[Q]:[];if(X.every(jA.isJSONType))return X;throw Error("type must be JSONType or JSONType[]: "+X.join(","))}_J.getJSONTypes=kJ;function kA(Q,X){let{gen:Y,data:W,opts:G}=Q,J=vA(X,G.coerceTypes),H=X.length>0&&!(J.length===0&&X.length===1&&(0,RA.schemaHasRulesForType)(Q,X[0]));if(H){let $=R8(X,W,G.strictNumbers,E1.Wrong);Y.if($,()=>{if(J.length)_A(Q,X,J);else S8(Q)})}return H}_J.coerceAndCheckDataType=kA;var vJ=new Set(["string","number","integer","boolean","null"]);function vA(Q,X){return X?Q.filter((Y)=>vJ.has(Y)||X==="array"&&Y==="array"):[]}function _A(Q,X,Y){let{gen:W,data:G,opts:J}=Q,H=W.let("dataType",S._`typeof ${G}`),$=W.let("coerced",S._`undefined`);if(J.coerceTypes==="array")W.if(S._`${H} == 'object' && Array.isArray(${G}) && ${G}.length == 1`,()=>W.assign(G,S._`${G}[0]`).assign(H,S._`typeof ${G}`).if(R8(X,G,J.strictNumbers),()=>W.assign($,G)));W.if(S._`${$} !== undefined`);for(let K of Y)if(vJ.has(K)||K==="array"&&J.coerceTypes==="array")B(K);W.else(),S8(Q),W.endIf(),W.if(S._`${$} !== undefined`,()=>{W.assign(G,$),xA(Q,$)});function B(K){switch(K){case"string":W.elseIf(S._`${H} == "number" || ${H} == "boolean"`).assign($,S._`"" + ${G}`).elseIf(S._`${G} === null`).assign($,S._`""`);return;case"number":W.elseIf(S._`${H} == "boolean" || ${G} === null
              || (${H} == "string" && ${G} && ${G} == +${G})`).assign($,S._`+${G}`);return;case"integer":W.elseIf(S._`${H} === "boolean" || ${G} === null
              || (${H} === "string" && ${G} && ${G} == +${G} && !(${G} % 1))`).assign($,S._`+${G}`);return;case"boolean":W.elseIf(S._`${G} === "false" || ${G} === 0 || ${G} === null`).assign($,!1).elseIf(S._`${G} === "true" || ${G} === 1`).assign($,!0);return;case"null":W.elseIf(S._`${G} === "" || ${G} === 0 || ${G} === false`),W.assign($,null);return;case"array":W.elseIf(S._`${H} === "string" || ${H} === "number"
              || ${H} === "boolean" || ${G} === null`).assign($,S._`[${G}]`)}}}function xA({gen:Q,parentData:X,parentDataProperty:Y},W){Q.if(S._`${X} !== undefined`,()=>Q.assign(S._`${X}[${Y}]`,W))}function j8(Q,X,Y,W=E1.Correct){let G=W===E1.Correct?S.operators.EQ:S.operators.NEQ,J;switch(Q){case"null":return S._`${X} ${G} null`;case"array":J=S._`Array.isArray(${X})`;break;case"object":J=S._`${X} && typeof ${X} == "object" && !Array.isArray(${X})`;break;case"integer":J=H(S._`!(${X} % 1) && !isNaN(${X})`);break;case"number":J=H();break;default:return S._`typeof ${X} ${G} ${Q}`}return W===E1.Correct?J:(0,S.not)(J);function H($=S.nil){return(0,S.and)(S._`typeof ${X} == "number"`,$,Y?S._`isFinite(${X})`:S.nil)}}_J.checkDataType=j8;function R8(Q,X,Y,W){if(Q.length===1)return j8(Q[0],X,Y,W);let G,J=(0,CJ.toHash)(Q);if(J.array&&J.object){let H=S._`typeof ${X} != "object"`;G=J.null?H:S._`!${X} || ${H}`,delete J.null,delete J.array,delete J.object}else G=S.nil;if(J.number)delete J.integer;for(let H in J)G=(0,S.and)(G,j8(H,X,Y,W));return G}_J.checkDataTypes=R8;var gA={message:({schema:Q})=>`must be ${Q}`,params:({schema:Q,schemaValue:X})=>typeof Q=="string"?S._`{type: ${Q}}`:S._`{type: ${X}}`};function S8(Q){let X=yA(Q);(0,SA.reportError)(X,gA)}_J.reportTypeError=S8;function yA(Q){let{gen:X,data:Y,schema:W}=Q,G=(0,CJ.schemaRefOrVal)(Q,W,"type");return{gen:X,keyword:"type",data:Y,schema:W.type,schemaCode:G,schemaValue:G,parentSchema:W,params:{},it:Q}}});var uJ=q((yJ)=>{Object.defineProperty(yJ,"__esModule",{value:!0});yJ.assignDefaults=void 0;var b1=k(),pA=h();function dA(Q,X){let{properties:Y,items:W}=Q.schema;if(X==="object"&&Y)for(let G in Y)gJ(Q,G,Y[G].default);else if(X==="array"&&Array.isArray(W))W.forEach((G,J)=>gJ(Q,J,G.default))}yJ.assignDefaults=dA;function gJ(Q,X,Y){let{gen:W,compositeRule:G,data:J,opts:H}=Q;if(Y===void 0)return;let $=b1._`${J}${(0,b1.getProperty)(X)}`;if(G){(0,pA.checkStrictMode)(Q,`default is ignored for: ${$}`);return}let B=b1._`${$} === undefined`;if(H.useDefaults==="empty")B=b1._`${B} || ${$} === null || ${$} === ""`;W.if(B,b1._`${$} = ${(0,b1.stringify)(Y)}`)}});var N0=q((mJ)=>{Object.defineProperty(mJ,"__esModule",{value:!0});mJ.validateUnion=mJ.validateArray=mJ.usePattern=mJ.callValidateCode=mJ.schemaProperties=mJ.allSchemaProperties=mJ.noPropertyInData=mJ.propertyInData=mJ.isOwnProperty=mJ.hasPropFunc=mJ.reportMissingProp=mJ.checkMissingProp=mJ.checkReportMissingProp=void 0;var d=k(),C8=h(),Y1=m0(),iA=h();function rA(Q,X){let{gen:Y,data:W,it:G}=Q;Y.if(v8(Y,W,X,G.opts.ownProperties),()=>{Q.setParams({missingProperty:d._`${X}`},!0),Q.error()})}mJ.checkReportMissingProp=rA;function nA({gen:Q,data:X,it:{opts:Y}},W,G){return(0,d.or)(...W.map((J)=>(0,d.and)(v8(Q,X,J,Y.ownProperties),d._`${G} = ${J}`)))}mJ.checkMissingProp=nA;function oA(Q,X){Q.setParams({missingProperty:X},!0),Q.error()}mJ.reportMissingProp=oA;function fJ(Q){return Q.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:d._`Object.prototype.hasOwnProperty`})}mJ.hasPropFunc=fJ;function k8(Q,X,Y){return d._`${fJ(Q)}.call(${X}, ${Y})`}mJ.isOwnProperty=k8;function tA(Q,X,Y,W){let G=d._`${X}${(0,d.getProperty)(Y)} !== undefined`;return W?d._`${G} && ${k8(Q,X,Y)}`:G}mJ.propertyInData=tA;function v8(Q,X,Y,W){let G=d._`${X}${(0,d.getProperty)(Y)} === undefined`;return W?(0,d.or)(G,(0,d.not)(k8(Q,X,Y))):G}mJ.noPropertyInData=v8;function lJ(Q){return Q?Object.keys(Q).filter((X)=>X!=="__proto__"):[]}mJ.allSchemaProperties=lJ;function aA(Q,X){return lJ(X).filter((Y)=>!(0,C8.alwaysValidSchema)(Q,X[Y]))}mJ.schemaProperties=aA;function sA({schemaCode:Q,data:X,it:{gen:Y,topSchemaRef:W,schemaPath:G,errorPath:J},it:H},$,B,K){let z=K?d._`${Q}, ${X}, ${W}${G}`:X,A=[[Y1.default.instancePath,(0,d.strConcat)(Y1.default.instancePath,J)],[Y1.default.parentData,H.parentData],[Y1.default.parentDataProperty,H.parentDataProperty],[Y1.default.rootData,Y1.default.rootData]];if(H.opts.dynamicRef)A.push([Y1.default.dynamicAnchors,Y1.default.dynamicAnchors]);let F=d._`${z}, ${Y.object(...A)}`;return B!==d.nil?d._`${$}.call(${B}, ${F})`:d._`${$}(${F})`}mJ.callValidateCode=sA;var eA=d._`new RegExp`;function QL({gen:Q,it:{opts:X}},Y){let W=X.unicodeRegExp?"u":"",{regExp:G}=X.code,J=G(Y,W);return Q.scopeValue("pattern",{key:J.toString(),ref:J,code:d._`${G.code==="new RegExp"?eA:(0,iA.useFunc)(Q,G)}(${Y}, ${W})`})}mJ.usePattern=QL;function XL(Q){let{gen:X,data:Y,keyword:W,it:G}=Q,J=X.name("valid");if(G.allErrors){let $=X.let("valid",!0);return H(()=>X.assign($,!1)),$}return X.var(J,!0),H(()=>X.break()),J;function H($){let B=X.const("len",d._`${Y}.length`);X.forRange("i",0,B,(K)=>{Q.subschema({keyword:W,dataProp:K,dataPropType:C8.Type.Num},J),X.if((0,d.not)(J),$)})}}mJ.validateArray=XL;function YL(Q){let{gen:X,schema:Y,keyword:W,it:G}=Q;if(!Array.isArray(Y))throw Error("ajv implementation error");if(Y.some((B)=>(0,C8.alwaysValidSchema)(G,B))&&!G.opts.unevaluated)return;let H=X.let("valid",!1),$=X.name("_valid");X.block(()=>Y.forEach((B,K)=>{let z=Q.subschema({keyword:W,schemaProp:K,compositeRule:!0},$);if(X.assign(H,d._`${H} || ${$}`),!Q.mergeValidEvaluated(z,$))X.if((0,d.not)(H))})),Q.result(H,()=>Q.reset(),()=>Q.error(!0))}mJ.validateUnion=YL});var nJ=q((iJ)=>{Object.defineProperty(iJ,"__esModule",{value:!0});iJ.validateKeywordUsage=iJ.validSchemaType=iJ.funcKeywordCode=iJ.macroKeywordCode=void 0;var z0=k(),z1=m0(),UL=N0(),VL=K9();function OL(Q,X){let{gen:Y,keyword:W,schema:G,parentSchema:J,it:H}=Q,$=X.macro.call(H.self,G,J,H),B=dJ(Y,W,$);if(H.opts.validateSchema!==!1)H.self.validateSchema($,!0);let K=Y.name("valid");Q.subschema({schema:$,schemaPath:z0.nil,errSchemaPath:`${H.errSchemaPath}/${W}`,topSchemaRef:B,compositeRule:!0},K),Q.pass(K,()=>Q.error(!0))}iJ.macroKeywordCode=OL;function ZL(Q,X){var Y;let{gen:W,keyword:G,schema:J,parentSchema:H,$data:$,it:B}=Q;qL(B,X);let K=!$&&X.compile?X.compile.call(B.self,J,H,B):X.validate,z=dJ(W,G,K),A=W.let("valid");Q.block$data(A,F),Q.ok((Y=X.valid)!==null&&Y!==void 0?Y:A);function F(){if(X.errors===!1){if(O(),X.modifying)pJ(Q);M(()=>Q.error())}else{let Z=X.async?L():V();if(X.modifying)pJ(Q);M(()=>ML(Q,Z))}}function L(){let Z=W.let("ruleErrs",null);return W.try(()=>O(z0._`await `),(T)=>W.assign(A,!1).if(z0._`${T} instanceof ${B.ValidationError}`,()=>W.assign(Z,z0._`${T}.errors`),()=>W.throw(T))),Z}function V(){let Z=z0._`${z}.errors`;return W.assign(Z,null),O(z0.nil),Z}function O(Z=X.async?z0._`await `:z0.nil){let T=B.opts.passContext?z1.default.this:z1.default.self,E=!(("compile"in X)&&!$||X.schema===!1);W.assign(A,z0._`${Z}${(0,UL.callValidateCode)(Q,z,T,E)}`,X.modifying)}function M(Z){var T;W.if((0,z0.not)((T=X.valid)!==null&&T!==void 0?T:A),Z)}}iJ.funcKeywordCode=ZL;function pJ(Q){let{gen:X,data:Y,it:W}=Q;X.if(W.parentData,()=>X.assign(Y,z0._`${W.parentData}[${W.parentDataProperty}]`))}function ML(Q,X){let{gen:Y}=Q;Y.if(z0._`Array.isArray(${X})`,()=>{Y.assign(z1.default.vErrors,z0._`${z1.default.vErrors} === null ? ${X} : ${z1.default.vErrors}.concat(${X})`).assign(z1.default.errors,z0._`${z1.default.vErrors}.length`),(0,VL.extendErrors)(Q)},()=>Q.error())}function qL({schemaEnv:Q},X){if(X.async&&!Q.$async)throw Error("async keyword in sync schema")}function dJ(Q,X,Y){if(Y===void 0)throw Error(`keyword "${X}" failed to compile`);return Q.scopeValue("keyword",typeof Y=="function"?{ref:Y}:{ref:Y,code:(0,z0.stringify)(Y)})}function NL(Q,X,Y=!1){return!X.length||X.some((W)=>W==="array"?Array.isArray(Q):W==="object"?Q&&typeof Q=="object"&&!Array.isArray(Q):typeof Q==W||Y&&typeof Q>"u")}iJ.validSchemaType=NL;function wL({schema:Q,opts:X,self:Y,errSchemaPath:W},G,J){if(Array.isArray(G.keyword)?!G.keyword.includes(J):G.keyword!==J)throw Error("ajv implementation error");let H=G.dependencies;if(H===null||H===void 0?void 0:H.some(($)=>!Object.prototype.hasOwnProperty.call(Q,$)))throw Error(`parent schema must have dependencies of ${J}: ${H.join(",")}`);if(G.validateSchema){if(!G.validateSchema(Q[J])){let B=`keyword "${J}" value is invalid at path "${W}": `+Y.errorsText(G.validateSchema.errors);if(X.validateSchema==="log")Y.logger.error(B);else throw Error(B)}}}iJ.validateKeywordUsage=wL});var sJ=q((tJ)=>{Object.defineProperty(tJ,"__esModule",{value:!0});tJ.extendSubschemaMode=tJ.extendSubschemaData=tJ.getSubschema=void 0;var v0=k(),oJ=h();function bL(Q,{keyword:X,schemaProp:Y,schema:W,schemaPath:G,errSchemaPath:J,topSchemaRef:H}){if(X!==void 0&&W!==void 0)throw Error('both "keyword" and "schema" passed, only one allowed');if(X!==void 0){let $=Q.schema[X];return Y===void 0?{schema:$,schemaPath:v0._`${Q.schemaPath}${(0,v0.getProperty)(X)}`,errSchemaPath:`${Q.errSchemaPath}/${X}`}:{schema:$[Y],schemaPath:v0._`${Q.schemaPath}${(0,v0.getProperty)(X)}${(0,v0.getProperty)(Y)}`,errSchemaPath:`${Q.errSchemaPath}/${X}/${(0,oJ.escapeFragment)(Y)}`}}if(W!==void 0){if(G===void 0||J===void 0||H===void 0)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:W,schemaPath:G,topSchemaRef:H,errSchemaPath:J}}throw Error('either "keyword" or "schema" must be passed')}tJ.getSubschema=bL;function TL(Q,X,{dataProp:Y,dataPropType:W,data:G,dataTypes:J,propertyName:H}){if(G!==void 0&&Y!==void 0)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:$}=X;if(Y!==void 0){let{errorPath:K,dataPathArr:z,opts:A}=X,F=$.let("data",v0._`${X.data}${(0,v0.getProperty)(Y)}`,!0);B(F),Q.errorPath=v0.str`${K}${(0,oJ.getErrorPath)(Y,W,A.jsPropertySyntax)}`,Q.parentDataProperty=v0._`${Y}`,Q.dataPathArr=[...z,Q.parentDataProperty]}if(G!==void 0){let K=G instanceof v0.Name?G:$.let("data",G,!0);if(B(K),H!==void 0)Q.propertyName=H}if(J)Q.dataTypes=J;function B(K){Q.data=K,Q.dataLevel=X.dataLevel+1,Q.dataTypes=[],X.definedProperties=new Set,Q.parentData=X.data,Q.dataNames=[...X.dataNames,K]}}tJ.extendSubschemaData=TL;function jL(Q,{jtdDiscriminator:X,jtdMetadata:Y,compositeRule:W,createErrors:G,allErrors:J}){if(W!==void 0)Q.compositeRule=W;if(G!==void 0)Q.createErrors=G;if(J!==void 0)Q.allErrors=J;Q.jtdDiscriminator=X,Q.jtdMetadata=Y}tJ.extendSubschemaMode=jL});var _8=q((pI,eJ)=>{eJ.exports=function Q(X,Y){if(X===Y)return!0;if(X&&Y&&typeof X=="object"&&typeof Y=="object"){if(X.constructor!==Y.constructor)return!1;var W,G,J;if(Array.isArray(X)){if(W=X.length,W!=Y.length)return!1;for(G=W;G--!==0;)if(!Q(X[G],Y[G]))return!1;return!0}if(X.constructor===RegExp)return X.source===Y.source&&X.flags===Y.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===Y.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===Y.toString();if(J=Object.keys(X),W=J.length,W!==Object.keys(Y).length)return!1;for(G=W;G--!==0;)if(!Object.prototype.hasOwnProperty.call(Y,J[G]))return!1;for(G=W;G--!==0;){var H=J[G];if(!Q(X[H],Y[H]))return!1}return!0}return X!==X&&Y!==Y}});var X7=q((dI,Q7)=>{var W1=Q7.exports=function(Q,X,Y){if(typeof X=="function")Y=X,X={};Y=X.cb||Y;var W=typeof Y=="function"?Y:Y.pre||function(){},G=Y.post||function(){};EQ(X,W,G,Q,"",Q)};W1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};W1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};W1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};W1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function EQ(Q,X,Y,W,G,J,H,$,B,K){if(W&&typeof W=="object"&&!Array.isArray(W)){X(W,G,J,H,$,B,K);for(var z in W){var A=W[z];if(Array.isArray(A)){if(z in W1.arrayKeywords)for(var F=0;F<A.length;F++)EQ(Q,X,Y,A[F],G+"/"+z+"/"+F,J,G,z,W,F)}else if(z in W1.propsKeywords){if(A&&typeof A=="object")for(var L in A)EQ(Q,X,Y,A[L],G+"/"+z+"/"+CL(L),J,G,z,W,L)}else if(z in W1.keywords||Q.allKeys&&!(z in W1.skipKeywords))EQ(Q,X,Y,A,G+"/"+z,J,G,z,W)}Y(W,G,J,H,$,B,K)}}function CL(Q){return Q.replace(/~/g,"~0").replace(/\//g,"~1")}});var A9=q((J7)=>{Object.defineProperty(J7,"__esModule",{value:!0});J7.getSchemaRefs=J7.resolveUrl=J7.normalizeId=J7._getFullPath=J7.getFullPath=J7.inlineRef=void 0;var kL=h(),vL=_8(),_L=X7(),xL=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function gL(Q,X=!0){if(typeof Q=="boolean")return!0;if(X===!0)return!x8(Q);if(!X)return!1;return Y7(Q)<=X}J7.inlineRef=gL;var yL=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function x8(Q){for(let X in Q){if(yL.has(X))return!0;let Y=Q[X];if(Array.isArray(Y)&&Y.some(x8))return!0;if(typeof Y=="object"&&x8(Y))return!0}return!1}function Y7(Q){let X=0;for(let Y in Q){if(Y==="$ref")return 1/0;if(X++,xL.has(Y))continue;if(typeof Q[Y]=="object")(0,kL.eachItem)(Q[Y],(W)=>X+=Y7(W));if(X===1/0)return 1/0}return X}function W7(Q,X="",Y){if(Y!==!1)X=T1(X);let W=Q.parse(X);return G7(Q,W)}J7.getFullPath=W7;function G7(Q,X){return Q.serialize(X).split("#")[0]+"#"}J7._getFullPath=G7;var hL=/#\/?$/;function T1(Q){return Q?Q.replace(hL,""):""}J7.normalizeId=T1;function uL(Q,X,Y){return Y=T1(Y),Q.resolve(X,Y)}J7.resolveUrl=uL;var fL=/^[a-z_][-a-z0-9._]*$/i;function lL(Q,X){if(typeof Q=="boolean")return{};let{schemaId:Y,uriResolver:W}=this.opts,G=T1(Q[Y]||X),J={"":G},H=W7(W,G,!1),$={},B=new Set;return _L(Q,{allKeys:!0},(A,F,L,V)=>{if(V===void 0)return;let O=H+F,M=J[V];if(typeof A[Y]=="string")M=Z.call(this,A[Y]);T.call(this,A.$anchor),T.call(this,A.$dynamicAnchor),J[F]=M;function Z(E){let R=this.opts.uriResolver.resolve;if(E=T1(M?R(M,E):E),B.has(E))throw z(E);B.add(E);let I=this.refs[E];if(typeof I=="string")I=this.refs[I];if(typeof I=="object")K(A,I.schema,E);else if(E!==T1(O))if(E[0]==="#")K(A,$[E],E),$[E]=A;else this.refs[E]=O;return E}function T(E){if(typeof E=="string"){if(!fL.test(E))throw Error(`invalid anchor "${E}"`);Z.call(this,`#${E}`)}}}),$;function K(A,F,L){if(F!==void 0&&!vL(A,F))throw z(L)}function z(A){return Error(`reference "${A}" resolves to more than one schema`)}}J7.getSchemaRefs=lL});var D9=q((N7)=>{Object.defineProperty(N7,"__esModule",{value:!0});N7.getData=N7.KeywordCxt=N7.validateFunctionCode=void 0;var A7=IJ(),$7=z9(),y8=T8(),bQ=z9(),rL=uJ(),F9=nJ(),g8=sJ(),P=k(),j=m0(),nL=A9(),c0=h(),L9=K9();function oL(Q){if(D7(Q)){if(U7(Q),F7(Q)){sL(Q);return}}L7(Q,()=>(0,A7.topBoolOrEmptySchema)(Q))}N7.validateFunctionCode=oL;function L7({gen:Q,validateName:X,schema:Y,schemaEnv:W,opts:G},J){if(G.code.es5)Q.func(X,P._`${j.default.data}, ${j.default.valCxt}`,W.$async,()=>{Q.code(P._`"use strict"; ${B7(Y,G)}`),aL(Q,G),Q.code(J)});else Q.func(X,P._`${j.default.data}, ${tL(G)}`,W.$async,()=>Q.code(B7(Y,G)).code(J))}function tL(Q){return P._`{${j.default.instancePath}="", ${j.default.parentData}, ${j.default.parentDataProperty}, ${j.default.rootData}=${j.default.data}${Q.dynamicRef?P._`, ${j.default.dynamicAnchors}={}`:P.nil}}={}`}function aL(Q,X){Q.if(j.default.valCxt,()=>{if(Q.var(j.default.instancePath,P._`${j.default.valCxt}.${j.default.instancePath}`),Q.var(j.default.parentData,P._`${j.default.valCxt}.${j.default.parentData}`),Q.var(j.default.parentDataProperty,P._`${j.default.valCxt}.${j.default.parentDataProperty}`),Q.var(j.default.rootData,P._`${j.default.valCxt}.${j.default.rootData}`),X.dynamicRef)Q.var(j.default.dynamicAnchors,P._`${j.default.valCxt}.${j.default.dynamicAnchors}`)},()=>{if(Q.var(j.default.instancePath,P._`""`),Q.var(j.default.parentData,P._`undefined`),Q.var(j.default.parentDataProperty,P._`undefined`),Q.var(j.default.rootData,j.default.data),X.dynamicRef)Q.var(j.default.dynamicAnchors,P._`{}`)})}function sL(Q){let{schema:X,opts:Y,gen:W}=Q;L7(Q,()=>{if(Y.$comment&&X.$comment)O7(Q);if(WF(Q),W.let(j.default.vErrors,null),W.let(j.default.errors,0),Y.unevaluated)eL(Q);V7(Q),HF(Q)});return}function eL(Q){let{gen:X,validateName:Y}=Q;Q.evaluated=X.const("evaluated",P._`${Y}.evaluated`),X.if(P._`${Q.evaluated}.dynamicProps`,()=>X.assign(P._`${Q.evaluated}.props`,P._`undefined`)),X.if(P._`${Q.evaluated}.dynamicItems`,()=>X.assign(P._`${Q.evaluated}.items`,P._`undefined`))}function B7(Q,X){let Y=typeof Q=="object"&&Q[X.schemaId];return Y&&(X.code.source||X.code.process)?P._`/*# sourceURL=${Y} */`:P.nil}function QF(Q,X){if(D7(Q)){if(U7(Q),F7(Q)){XF(Q,X);return}}(0,A7.boolOrEmptySchema)(Q,X)}function F7({schema:Q,self:X}){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X.RULES.all[Y])return!0;return!1}function D7(Q){return typeof Q.schema!="boolean"}function XF(Q,X){let{schema:Y,gen:W,opts:G}=Q;if(G.$comment&&Y.$comment)O7(Q);GF(Q),JF(Q);let J=W.const("_errs",j.default.errors);V7(Q,J),W.var(X,P._`${J} === ${j.default.errors}`)}function U7(Q){(0,c0.checkUnknownRules)(Q),YF(Q)}function V7(Q,X){if(Q.opts.jtd)return K7(Q,[],!1,X);let Y=(0,$7.getSchemaTypes)(Q.schema),W=(0,$7.coerceAndCheckDataType)(Q,Y);K7(Q,Y,!W,X)}function YF(Q){let{schema:X,errSchemaPath:Y,opts:W,self:G}=Q;if(X.$ref&&W.ignoreKeywordsWithRef&&(0,c0.schemaHasRulesButRef)(X,G.RULES))G.logger.warn(`$ref: keywords ignored in schema at path "${Y}"`)}function WF(Q){let{schema:X,opts:Y}=Q;if(X.default!==void 0&&Y.useDefaults&&Y.strictSchema)(0,c0.checkStrictMode)(Q,"default is ignored in the schema root")}function GF(Q){let X=Q.schema[Q.opts.schemaId];if(X)Q.baseId=(0,nL.resolveUrl)(Q.opts.uriResolver,Q.baseId,X)}function JF(Q){if(Q.schema.$async&&!Q.schemaEnv.$async)throw Error("async schema in sync schema")}function O7({gen:Q,schemaEnv:X,schema:Y,errSchemaPath:W,opts:G}){let J=Y.$comment;if(G.$comment===!0)Q.code(P._`${j.default.self}.logger.log(${J})`);else if(typeof G.$comment=="function"){let H=P.str`${W}/$comment`,$=Q.scopeValue("root",{ref:X.root});Q.code(P._`${j.default.self}.opts.$comment(${J}, ${H}, ${$}.schema)`)}}function HF(Q){let{gen:X,schemaEnv:Y,validateName:W,ValidationError:G,opts:J}=Q;if(Y.$async)X.if(P._`${j.default.errors} === 0`,()=>X.return(j.default.data),()=>X.throw(P._`new ${G}(${j.default.vErrors})`));else{if(X.assign(P._`${W}.errors`,j.default.vErrors),J.unevaluated)$F(Q);X.return(P._`${j.default.errors} === 0`)}}function $F({gen:Q,evaluated:X,props:Y,items:W}){if(Y instanceof P.Name)Q.assign(P._`${X}.props`,Y);if(W instanceof P.Name)Q.assign(P._`${X}.items`,W)}function K7(Q,X,Y,W){let{gen:G,schema:J,data:H,allErrors:$,opts:B,self:K}=Q,{RULES:z}=K;if(J.$ref&&(B.ignoreKeywordsWithRef||!(0,c0.schemaHasRulesButRef)(J,z))){G.block(()=>M7(Q,"$ref",z.all.$ref.definition));return}if(!B.jtd)BF(Q,X);G.block(()=>{for(let F of z.rules)A(F);A(z.post)});function A(F){if(!(0,y8.shouldUseGroup)(J,F))return;if(F.type){if(G.if((0,bQ.checkDataType)(F.type,H,B.strictNumbers)),z7(Q,F),X.length===1&&X[0]===F.type&&Y)G.else(),(0,bQ.reportTypeError)(Q);G.endIf()}else z7(Q,F);if(!$)G.if(P._`${j.default.errors} === ${W||0}`)}}function z7(Q,X){let{gen:Y,schema:W,opts:{useDefaults:G}}=Q;if(G)(0,rL.assignDefaults)(Q,X.type);Y.block(()=>{for(let J of X.rules)if((0,y8.shouldUseRule)(W,J))M7(Q,J.keyword,J.definition,X.type)})}function BF(Q,X){if(Q.schemaEnv.meta||!Q.opts.strictTypes)return;if(KF(Q,X),!Q.opts.allowUnionTypes)zF(Q,X);AF(Q,Q.dataTypes)}function KF(Q,X){if(!X.length)return;if(!Q.dataTypes.length){Q.dataTypes=X;return}X.forEach((Y)=>{if(!Z7(Q.dataTypes,Y))h8(Q,`type "${Y}" not allowed by context "${Q.dataTypes.join(",")}"`)}),FF(Q,X)}function zF(Q,X){if(X.length>1&&!(X.length===2&&X.includes("null")))h8(Q,"use allowUnionTypes to allow union type keyword")}function AF(Q,X){let Y=Q.self.RULES.all;for(let W in Y){let G=Y[W];if(typeof G=="object"&&(0,y8.shouldUseRule)(Q.schema,G)){let{type:J}=G.definition;if(J.length&&!J.some((H)=>LF(X,H)))h8(Q,`missing type "${J.join(",")}" for keyword "${W}"`)}}}function LF(Q,X){return Q.includes(X)||X==="number"&&Q.includes("integer")}function Z7(Q,X){return Q.includes(X)||X==="integer"&&Q.includes("number")}function FF(Q,X){let Y=[];for(let W of Q.dataTypes)if(Z7(X,W))Y.push(W);else if(X.includes("integer")&&W==="number")Y.push("integer");Q.dataTypes=Y}function h8(Q,X){let Y=Q.schemaEnv.baseId+Q.errSchemaPath;X+=` at "${Y}" (strictTypes)`,(0,c0.checkStrictMode)(Q,X,Q.opts.strictTypes)}class u8{constructor(Q,X,Y){if((0,F9.validateKeywordUsage)(Q,X,Y),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=Y,this.data=Q.data,this.schema=Q.schema[Y],this.$data=X.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c0.schemaRefOrVal)(Q,this.schema,Y,this.$data),this.schemaType=X.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=X,this.$data)this.schemaCode=Q.gen.const("vSchema",q7(this.$data,Q));else if(this.schemaCode=this.schemaValue,!(0,F9.validSchemaType)(this.schema,X.schemaType,X.allowUndefined))throw Error(`${Y} value must be ${JSON.stringify(X.schemaType)}`);if("code"in X?X.trackErrors:X.errors!==!1)this.errsCount=Q.gen.const("_errs",j.default.errors)}result(Q,X,Y){this.failResult((0,P.not)(Q),X,Y)}failResult(Q,X,Y){if(this.gen.if(Q),Y)Y();else this.error();if(X){if(this.gen.else(),X(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(Q,X){this.failResult((0,P.not)(Q),void 0,X)}fail(Q){if(Q===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(Q),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);let{schemaCode:X}=this;this.fail(P._`${X} !== undefined && (${(0,P.or)(this.invalid$data(),Q)})`)}error(Q,X,Y){if(X){this.setParams(X),this._error(Q,Y),this.setParams({});return}this._error(Q,Y)}_error(Q,X){(Q?L9.reportExtraError:L9.reportError)(this,this.def.error,X)}$dataError(){(0,L9.reportError)(this,this.def.$dataError||L9.keyword$DataError)}reset(){if(this.errsCount===void 0)throw Error('add "trackErrors" to keyword definition');(0,L9.resetErrorsCount)(this.gen,this.errsCount)}ok(Q){if(!this.allErrors)this.gen.if(Q)}setParams(Q,X){if(X)Object.assign(this.params,Q);else this.params=Q}block$data(Q,X,Y=P.nil){this.gen.block(()=>{this.check$data(Q,Y),X()})}check$data(Q=P.nil,X=P.nil){if(!this.$data)return;let{gen:Y,schemaCode:W,schemaType:G,def:J}=this;if(Y.if((0,P.or)(P._`${W} === undefined`,X)),Q!==P.nil)Y.assign(Q,!0);if(G.length||J.validateSchema){if(Y.elseIf(this.invalid$data()),this.$dataError(),Q!==P.nil)Y.assign(Q,!1)}Y.else()}invalid$data(){let{gen:Q,schemaCode:X,schemaType:Y,def:W,it:G}=this;return(0,P.or)(J(),H());function J(){if(Y.length){if(!(X instanceof P.Name))throw Error("ajv implementation error");let $=Array.isArray(Y)?Y:[Y];return P._`${(0,bQ.checkDataTypes)($,X,G.opts.strictNumbers,bQ.DataType.Wrong)}`}return P.nil}function H(){if(W.validateSchema){let $=Q.scopeValue("validate$data",{ref:W.validateSchema});return P._`!${$}(${X})`}return P.nil}}subschema(Q,X){let Y=(0,g8.getSubschema)(this.it,Q);(0,g8.extendSubschemaData)(Y,this.it,Q),(0,g8.extendSubschemaMode)(Y,Q);let W={...this.it,...Y,items:void 0,props:void 0};return QF(W,X),W}mergeEvaluated(Q,X){let{it:Y,gen:W}=this;if(!Y.opts.unevaluated)return;if(Y.props!==!0&&Q.props!==void 0)Y.props=c0.mergeEvaluated.props(W,Q.props,Y.props,X);if(Y.items!==!0&&Q.items!==void 0)Y.items=c0.mergeEvaluated.items(W,Q.items,Y.items,X)}mergeValidEvaluated(Q,X){let{it:Y,gen:W}=this;if(Y.opts.unevaluated&&(Y.props!==!0||Y.items!==!0))return W.if(X,()=>this.mergeEvaluated(Q,P.Name)),!0}}N7.KeywordCxt=u8;function M7(Q,X,Y,W){let G=new u8(Q,Y,X);if("code"in Y)Y.code(G,W);else if(G.$data&&Y.validate)(0,F9.funcKeywordCode)(G,Y);else if("macro"in Y)(0,F9.macroKeywordCode)(G,Y);else if(Y.compile||Y.validate)(0,F9.funcKeywordCode)(G,Y)}var DF=/^\/(?:[^~]|~0|~1)*$/,UF=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function q7(Q,{dataLevel:X,dataNames:Y,dataPathArr:W}){let G,J;if(Q==="")return j.default.rootData;if(Q[0]==="/"){if(!DF.test(Q))throw Error(`Invalid JSON-pointer: ${Q}`);G=Q,J=j.default.rootData}else{let K=UF.exec(Q);if(!K)throw Error(`Invalid JSON-pointer: ${Q}`);let z=+K[1];if(G=K[2],G==="#"){if(z>=X)throw Error(B("property/index",z));return W[X-z]}if(z>X)throw Error(B("data",z));if(J=Y[X-z],!G)return J}let H=J,$=G.split("/");for(let K of $)if(K)J=P._`${J}${(0,P.getProperty)((0,c0.unescapeJsonPointer)(K))}`,H=P._`${H} && ${J}`;return H;function B(K,z){return`Cannot access ${K} ${z} levels up, current level is ${X}`}}N7.getData=q7});var TQ=q((I7)=>{Object.defineProperty(I7,"__esModule",{value:!0});class P7 extends Error{constructor(Q){super("validation failed");this.errors=Q,this.ajv=this.validation=!0}}I7.default=P7});var U9=q((b7)=>{Object.defineProperty(b7,"__esModule",{value:!0});var f8=A9();class E7 extends Error{constructor(Q,X,Y,W){super(W||`can't resolve reference ${Y} from id ${X}`);this.missingRef=(0,f8.resolveUrl)(Q,X,Y),this.missingSchema=(0,f8.normalizeId)((0,f8.getFullPath)(Q,this.missingRef))}}b7.default=E7});var RQ=q((R7)=>{Object.defineProperty(R7,"__esModule",{value:!0});R7.resolveSchema=R7.getCompilingSchema=R7.resolveRef=R7.compileSchema=R7.SchemaEnv=void 0;var R0=k(),qF=TQ(),A1=m0(),S0=A9(),T7=h(),NF=D9();class V9{constructor(Q){var X;this.refs={},this.dynamicAnchors={};let Y;if(typeof Q.schema=="object")Y=Q.schema;this.schema=Q.schema,this.schemaId=Q.schemaId,this.root=Q.root||this,this.baseId=(X=Q.baseId)!==null&&X!==void 0?X:(0,S0.normalizeId)(Y===null||Y===void 0?void 0:Y[Q.schemaId||"$id"]),this.schemaPath=Q.schemaPath,this.localRefs=Q.localRefs,this.meta=Q.meta,this.$async=Y===null||Y===void 0?void 0:Y.$async,this.refs={}}}R7.SchemaEnv=V9;function m8(Q){let X=j7.call(this,Q);if(X)return X;let Y=(0,S0.getFullPath)(this.opts.uriResolver,Q.root.baseId),{es5:W,lines:G}=this.opts.code,{ownProperties:J}=this.opts,H=new R0.CodeGen(this.scope,{es5:W,lines:G,ownProperties:J}),$;if(Q.$async)$=H.scopeValue("Error",{ref:qF.default,code:R0._`require("ajv/dist/runtime/validation_error").default`});let B=H.scopeName("validate");Q.validateName=B;let K={gen:H,allErrors:this.opts.allErrors,data:A1.default.data,parentData:A1.default.parentData,parentDataProperty:A1.default.parentDataProperty,dataNames:[A1.default.data],dataPathArr:[R0.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:H.scopeValue("schema",this.opts.code.source===!0?{ref:Q.schema,code:(0,R0.stringify)(Q.schema)}:{ref:Q.schema}),validateName:B,ValidationError:$,schema:Q.schema,schemaEnv:Q,rootId:Y,baseId:Q.baseId||Y,schemaPath:R0.nil,errSchemaPath:Q.schemaPath||(this.opts.jtd?"":"#"),errorPath:R0._`""`,opts:this.opts,self:this},z;try{this._compilations.add(Q),(0,NF.validateFunctionCode)(K),H.optimize(this.opts.code.optimize);let A=H.toString();if(z=`${H.scopeRefs(A1.default.scope)}return ${A}`,this.opts.code.process)z=this.opts.code.process(z,Q);let L=Function(`${A1.default.self}`,`${A1.default.scope}`,z)(this,this.scope.get());if(this.scope.value(B,{ref:L}),L.errors=null,L.schema=Q.schema,L.schemaEnv=Q,Q.$async)L.$async=!0;if(this.opts.code.source===!0)L.source={validateName:B,validateCode:A,scopeValues:H._values};if(this.opts.unevaluated){let{props:V,items:O}=K;if(L.evaluated={props:V instanceof R0.Name?void 0:V,items:O instanceof R0.Name?void 0:O,dynamicProps:V instanceof R0.Name,dynamicItems:O instanceof R0.Name},L.source)L.source.evaluated=(0,R0.stringify)(L.evaluated)}return Q.validate=L,Q}catch(A){if(delete Q.validate,delete Q.validateName,z)this.logger.error("Error compiling schema, function code:",z);throw A}finally{this._compilations.delete(Q)}}R7.compileSchema=m8;function wF(Q,X,Y){var W;Y=(0,S0.resolveUrl)(this.opts.uriResolver,X,Y);let G=Q.refs[Y];if(G)return G;let J=EF.call(this,Q,Y);if(J===void 0){let H=(W=Q.localRefs)===null||W===void 0?void 0:W[Y],{schemaId:$}=this.opts;if(H)J=new V9({schema:H,schemaId:$,root:Q,baseId:X})}if(J===void 0)return;return Q.refs[Y]=PF.call(this,J)}R7.resolveRef=wF;function PF(Q){if((0,S0.inlineRef)(Q.schema,this.opts.inlineRefs))return Q.schema;return Q.validate?Q:m8.call(this,Q)}function j7(Q){for(let X of this._compilations)if(IF(X,Q))return X}R7.getCompilingSchema=j7;function IF(Q,X){return Q.schema===X.schema&&Q.root===X.root&&Q.baseId===X.baseId}function EF(Q,X){let Y;while(typeof(Y=this.refs[X])=="string")X=Y;return Y||this.schemas[X]||jQ.call(this,Q,X)}function jQ(Q,X){let Y=this.opts.uriResolver.parse(X),W=(0,S0._getFullPath)(this.opts.uriResolver,Y),G=(0,S0.getFullPath)(this.opts.uriResolver,Q.baseId,void 0);if(Object.keys(Q.schema).length>0&&W===G)return l8.call(this,Y,Q);let J=(0,S0.normalizeId)(W),H=this.refs[J]||this.schemas[J];if(typeof H=="string"){let $=jQ.call(this,Q,H);if(typeof($===null||$===void 0?void 0:$.schema)!=="object")return;return l8.call(this,Y,$)}if(typeof(H===null||H===void 0?void 0:H.schema)!=="object")return;if(!H.validate)m8.call(this,H);if(J===(0,S0.normalizeId)(X)){let{schema:$}=H,{schemaId:B}=this.opts,K=$[B];if(K)G=(0,S0.resolveUrl)(this.opts.uriResolver,G,K);return new V9({schema:$,schemaId:B,root:Q,baseId:G})}return l8.call(this,Y,H)}R7.resolveSchema=jQ;var bF=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function l8(Q,{baseId:X,schema:Y,root:W}){var G;if(((G=Q.fragment)===null||G===void 0?void 0:G[0])!=="/")return;for(let $ of Q.fragment.slice(1).split("/")){if(typeof Y==="boolean")return;let B=Y[(0,T7.unescapeFragment)($)];if(B===void 0)return;Y=B;let K=typeof Y==="object"&&Y[this.opts.schemaId];if(!bF.has($)&&K)X=(0,S0.resolveUrl)(this.opts.uriResolver,X,K)}let J;if(typeof Y!="boolean"&&Y.$ref&&!(0,T7.schemaHasRulesButRef)(Y,this.RULES)){let $=(0,S0.resolveUrl)(this.opts.uriResolver,X,Y.$ref);J=jQ.call(this,W,$)}let{schemaId:H}=this.opts;if(J=J||new V9({schema:Y,schemaId:H,root:W,baseId:X}),J.schema!==J.root.schema)return J;return}});var C7=q((aI,CF)=>{CF.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var p8=q((sI,x7)=>{var kF=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),v7=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function c8(Q){let X="",Y=0,W=0;for(W=0;W<Q.length;W++){if(Y=Q[W].charCodeAt(0),Y===48)continue;if(!(Y>=48&&Y<=57||Y>=65&&Y<=70||Y>=97&&Y<=102))return"";X+=Q[W];break}for(W+=1;W<Q.length;W++){if(Y=Q[W].charCodeAt(0),!(Y>=48&&Y<=57||Y>=65&&Y<=70||Y>=97&&Y<=102))return"";X+=Q[W]}return X}var vF=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function k7(Q){return Q.length=0,!0}function _F(Q,X,Y){if(Q.length){let W=c8(Q);if(W!=="")X.push(W);else return Y.error=!0,!1;Q.length=0}return!0}function xF(Q){let X=0,Y={error:!1,address:"",zone:""},W=[],G=[],J=!1,H=!1,$=_F;for(let B=0;B<Q.length;B++){let K=Q[B];if(K==="["||K==="]")continue;if(K===":"){if(J===!0)H=!0;if(!$(G,W,Y))break;if(++X>7){Y.error=!0;break}if(B>0&&Q[B-1]===":")J=!0;W.push(":");continue}else if(K==="%"){if(!$(G,W,Y))break;$=k7}else{G.push(K);continue}}if(G.length)if($===k7)Y.zone=G.join("");else if(H)W.push(G.join(""));else W.push(c8(G));return Y.address=W.join(""),Y}function _7(Q){if(gF(Q,":")<2)return{host:Q,isIPV6:!1};let X=xF(Q);if(!X.error){let{address:Y,address:W}=X;if(X.zone)Y+="%"+X.zone,W+="%25"+X.zone;return{host:Y,isIPV6:!0,escapedHost:W}}else return{host:Q,isIPV6:!1}}function gF(Q,X){let Y=0;for(let W=0;W<Q.length;W++)if(Q[W]===X)Y++;return Y}function yF(Q){let X=Q,Y=[],W=-1,G=0;while(G=X.length){if(G===1)if(X===".")break;else if(X==="/"){Y.push("/");break}else{Y.push(X);break}else if(G===2){if(X[0]==="."){if(X[1]===".")break;else if(X[1]==="/"){X=X.slice(2);continue}}else if(X[0]==="/"){if(X[1]==="."||X[1]==="/"){Y.push("/");break}}}else if(G===3){if(X==="/.."){if(Y.length!==0)Y.pop();Y.push("/");break}}if(X[0]==="."){if(X[1]==="."){if(X[2]==="/"){X=X.slice(3);continue}}else if(X[1]==="/"){X=X.slice(2);continue}}else if(X[0]==="/"){if(X[1]==="."){if(X[2]==="/"){X=X.slice(2);continue}else if(X[2]==="."){if(X[3]==="/"){if(X=X.slice(3),Y.length!==0)Y.pop();continue}}}}if((W=X.indexOf("/",1))===-1){Y.push(X);break}else Y.push(X.slice(0,W)),X=X.slice(W)}return Y.join("")}function hF(Q,X){let Y=X!==!0?escape:unescape;if(Q.scheme!==void 0)Q.scheme=Y(Q.scheme);if(Q.userinfo!==void 0)Q.userinfo=Y(Q.userinfo);if(Q.host!==void 0)Q.host=Y(Q.host);if(Q.path!==void 0)Q.path=Y(Q.path);if(Q.query!==void 0)Q.query=Y(Q.query);if(Q.fragment!==void 0)Q.fragment=Y(Q.fragment);return Q}function uF(Q){let X=[];if(Q.userinfo!==void 0)X.push(Q.userinfo),X.push("@");if(Q.host!==void 0){let Y=unescape(Q.host);if(!v7(Y)){let W=_7(Y);if(W.isIPV6===!0)Y=`[${W.escapedHost}]`;else Y=Q.host}X.push(Y)}if(typeof Q.port==="number"||typeof Q.port==="string")X.push(":"),X.push(String(Q.port));return X.length?X.join(""):void 0}x7.exports={nonSimpleDomain:vF,recomposeAuthority:uF,normalizeComponentEncoding:hF,removeDotSegments:yF,isIPv4:v7,isUUID:kF,normalizeIPv6:_7,stringArrayToHexStripped:c8}});var f7=q((eI,u7)=>{var{isUUID:fF}=p8(),lF=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,mF=["http","https","ws","wss","urn","urn:uuid"];function cF(Q){return mF.indexOf(Q)!==-1}function d8(Q){if(Q.secure===!0)return!0;else if(Q.secure===!1)return!1;else if(Q.scheme)return Q.scheme.length===3&&(Q.scheme[0]==="w"||Q.scheme[0]==="W")&&(Q.scheme[1]==="s"||Q.scheme[1]==="S")&&(Q.scheme[2]==="s"||Q.scheme[2]==="S");else return!1}function g7(Q){if(!Q.host)Q.error=Q.error||"HTTP URIs must have a host.";return Q}function y7(Q){let X=String(Q.scheme).toLowerCase()==="https";if(Q.port===(X?443:80)||Q.port==="")Q.port=void 0;if(!Q.path)Q.path="/";return Q}function pF(Q){return Q.secure=d8(Q),Q.resourceName=(Q.path||"/")+(Q.query?"?"+Q.query:""),Q.path=void 0,Q.query=void 0,Q}function dF(Q){if(Q.port===(d8(Q)?443:80)||Q.port==="")Q.port=void 0;if(typeof Q.secure==="boolean")Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0;if(Q.resourceName){let[X,Y]=Q.resourceName.split("?");Q.path=X&&X!=="/"?X:void 0,Q.query=Y,Q.resourceName=void 0}return Q.fragment=void 0,Q}function iF(Q,X){if(!Q.path)return Q.error="URN can not be parsed",Q;let Y=Q.path.match(lF);if(Y){let W=X.scheme||Q.scheme||"urn";Q.nid=Y[1].toLowerCase(),Q.nss=Y[2];let G=`${W}:${X.nid||Q.nid}`,J=i8(G);if(Q.path=void 0,J)Q=J.parse(Q,X)}else Q.error=Q.error||"URN can not be parsed.";return Q}function rF(Q,X){if(Q.nid===void 0)throw Error("URN without nid cannot be serialized");let Y=X.scheme||Q.scheme||"urn",W=Q.nid.toLowerCase(),G=`${Y}:${X.nid||W}`,J=i8(G);if(J)Q=J.serialize(Q,X);let H=Q,$=Q.nss;return H.path=`${W||X.nid}:${$}`,X.skipEscape=!0,H}function nF(Q,X){let Y=Q;if(Y.uuid=Y.nss,Y.nss=void 0,!X.tolerant&&(!Y.uuid||!fF(Y.uuid)))Y.error=Y.error||"UUID is not valid.";return Y}function oF(Q){let X=Q;return X.nss=(Q.uuid||"").toLowerCase(),X}var h7={scheme:"http",domainHost:!0,parse:g7,serialize:y7},tF={scheme:"https",domainHost:h7.domainHost,parse:g7,serialize:y7},SQ={scheme:"ws",domainHost:!0,parse:pF,serialize:dF},aF={scheme:"wss",domainHost:SQ.domainHost,parse:SQ.parse,serialize:SQ.serialize},sF={scheme:"urn",parse:iF,serialize:rF,skipNormalize:!0},eF={scheme:"urn:uuid",parse:nF,serialize:oF,skipNormalize:!0},CQ={http:h7,https:tF,ws:SQ,wss:aF,urn:sF,"urn:uuid":eF};Object.setPrototypeOf(CQ,null);function i8(Q){return Q&&(CQ[Q]||CQ[Q.toLowerCase()])||void 0}u7.exports={wsIsSecure:d8,SCHEMES:CQ,isValidSchemeName:cF,getSchemeHandler:i8}});var c7=q((QE,vQ)=>{var{normalizeIPv6:QD,removeDotSegments:O9,recomposeAuthority:XD,normalizeComponentEncoding:kQ,isIPv4:YD,nonSimpleDomain:WD}=p8(),{SCHEMES:GD,getSchemeHandler:l7}=f7();function JD(Q,X){if(typeof Q==="string")Q=_0(p0(Q,X),X);else if(typeof Q==="object")Q=p0(_0(Q,X),X);return Q}function HD(Q,X,Y){let W=Y?Object.assign({scheme:"null"},Y):{scheme:"null"},G=m7(p0(Q,W),p0(X,W),W,!0);return W.skipEscape=!0,_0(G,W)}function m7(Q,X,Y,W){let G={};if(!W)Q=p0(_0(Q,Y),Y),X=p0(_0(X,Y),Y);if(Y=Y||{},!Y.tolerant&&X.scheme)G.scheme=X.scheme,G.userinfo=X.userinfo,G.host=X.host,G.port=X.port,G.path=O9(X.path||""),G.query=X.query;else{if(X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)G.userinfo=X.userinfo,G.host=X.host,G.port=X.port,G.path=O9(X.path||""),G.query=X.query;else{if(!X.path)if(G.path=Q.path,X.query!==void 0)G.query=X.query;else G.query=Q.query;else{if(X.path[0]==="/")G.path=O9(X.path);else{if((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path)G.path="/"+X.path;else if(!Q.path)G.path=X.path;else G.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+X.path;G.path=O9(G.path)}G.query=X.query}G.userinfo=Q.userinfo,G.host=Q.host,G.port=Q.port}G.scheme=Q.scheme}return G.fragment=X.fragment,G}function $D(Q,X,Y){if(typeof Q==="string")Q=unescape(Q),Q=_0(kQ(p0(Q,Y),!0),{...Y,skipEscape:!0});else if(typeof Q==="object")Q=_0(kQ(Q,!0),{...Y,skipEscape:!0});if(typeof X==="string")X=unescape(X),X=_0(kQ(p0(X,Y),!0),{...Y,skipEscape:!0});else if(typeof X==="object")X=_0(kQ(X,!0),{...Y,skipEscape:!0});return Q.toLowerCase()===X.toLowerCase()}function _0(Q,X){let Y={host:Q.host,scheme:Q.scheme,userinfo:Q.userinfo,port:Q.port,path:Q.path,query:Q.query,nid:Q.nid,nss:Q.nss,uuid:Q.uuid,fragment:Q.fragment,reference:Q.reference,resourceName:Q.resourceName,secure:Q.secure,error:""},W=Object.assign({},X),G=[],J=l7(W.scheme||Y.scheme);if(J&&J.serialize)J.serialize(Y,W);if(Y.path!==void 0)if(!W.skipEscape){if(Y.path=escape(Y.path),Y.scheme!==void 0)Y.path=Y.path.split("%3A").join(":")}else Y.path=unescape(Y.path);if(W.reference!=="suffix"&&Y.scheme)G.push(Y.scheme,":");let H=XD(Y);if(H!==void 0){if(W.reference!=="suffix")G.push("//");if(G.push(H),Y.path&&Y.path[0]!=="/")G.push("/")}if(Y.path!==void 0){let $=Y.path;if(!W.absolutePath&&(!J||!J.absolutePath))$=O9($);if(H===void 0&&$[0]==="/"&&$[1]==="/")$="/%2F"+$.slice(2);G.push($)}if(Y.query!==void 0)G.push("?",Y.query);if(Y.fragment!==void 0)G.push("#",Y.fragment);return G.join("")}var BD=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p0(Q,X){let Y=Object.assign({},X),W={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},G=!1;if(Y.reference==="suffix")if(Y.scheme)Q=Y.scheme+":"+Q;else Q="//"+Q;let J=Q.match(BD);if(J){if(W.scheme=J[1],W.userinfo=J[3],W.host=J[4],W.port=parseInt(J[5],10),W.path=J[6]||"",W.query=J[7],W.fragment=J[8],isNaN(W.port))W.port=J[5];if(W.host)if(YD(W.host)===!1){let B=QD(W.host);W.host=B.host.toLowerCase(),G=B.isIPV6}else G=!0;if(W.scheme===void 0&&W.userinfo===void 0&&W.host===void 0&&W.port===void 0&&W.query===void 0&&!W.path)W.reference="same-document";else if(W.scheme===void 0)W.reference="relative";else if(W.fragment===void 0)W.reference="absolute";else W.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==W.reference)W.error=W.error||"URI is not a "+Y.reference+" reference.";let H=l7(Y.scheme||W.scheme);if(!Y.unicodeSupport&&(!H||!H.unicodeSupport)){if(W.host&&(Y.domainHost||H&&H.domainHost)&&G===!1&&WD(W.host))try{W.host=URL.domainToASCII(W.host.toLowerCase())}catch($){W.error=W.error||"Host's domain name can not be converted to ASCII: "+$}}if(!H||H&&!H.skipNormalize){if(Q.indexOf("%")!==-1){if(W.scheme!==void 0)W.scheme=unescape(W.scheme);if(W.host!==void 0)W.host=unescape(W.host)}if(W.path)W.path=escape(unescape(W.path));if(W.fragment)W.fragment=encodeURI(decodeURIComponent(W.fragment))}if(H&&H.parse)H.parse(W,Y)}else W.error=W.error||"URI can not be parsed.";return W}var r8={SCHEMES:GD,normalize:JD,resolve:HD,resolveComponent:m7,equal:$D,serialize:_0,parse:p0};vQ.exports=r8;vQ.exports.default=r8;vQ.exports.fastUri=r8});var i7=q((d7)=>{Object.defineProperty(d7,"__esModule",{value:!0});var p7=c7();p7.code='require("ajv/dist/runtime/uri").default';d7.default=p7});var Q5=q((d0)=>{Object.defineProperty(d0,"__esModule",{value:!0});d0.CodeGen=d0.Name=d0.nil=d0.stringify=d0.str=d0._=d0.KeywordCxt=void 0;var zD=D9();Object.defineProperty(d0,"KeywordCxt",{enumerable:!0,get:function(){return zD.KeywordCxt}});var j1=k();Object.defineProperty(d0,"_",{enumerable:!0,get:function(){return j1._}});Object.defineProperty(d0,"str",{enumerable:!0,get:function(){return j1.str}});Object.defineProperty(d0,"stringify",{enumerable:!0,get:function(){return j1.stringify}});Object.defineProperty(d0,"nil",{enumerable:!0,get:function(){return j1.nil}});Object.defineProperty(d0,"Name",{enumerable:!0,get:function(){return j1.Name}});Object.defineProperty(d0,"CodeGen",{enumerable:!0,get:function(){return j1.CodeGen}});var AD=TQ(),a7=U9(),LD=b8(),Z9=RQ(),FD=k(),M9=A9(),_Q=z9(),o8=h(),r7=C7(),DD=i7(),s7=(Q,X)=>new RegExp(Q,X);s7.code="new RegExp";var UD=["removeAdditional","useDefaults","coerceTypes"],VD=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),OD={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ZD={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},n7=200;function MD(Q){var X,Y,W,G,J,H,$,B,K,z,A,F,L,V,O,M,Z,T,E,R,I,P0,I0,sQ,eQ;let v1=Q.strict,Q6=(X=Q.code)===null||X===void 0?void 0:X.optimize,PX=Q6===!0||Q6===void 0?1:Q6||0,IX=(W=(Y=Q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&W!==void 0?W:s7,w3=(G=Q.uriResolver)!==null&&G!==void 0?G:DD.default;return{strictSchema:(H=(J=Q.strictSchema)!==null&&J!==void 0?J:v1)!==null&&H!==void 0?H:!0,strictNumbers:(B=($=Q.strictNumbers)!==null&&$!==void 0?$:v1)!==null&&B!==void 0?B:!0,strictTypes:(z=(K=Q.strictTypes)!==null&&K!==void 0?K:v1)!==null&&z!==void 0?z:"log",strictTuples:(F=(A=Q.strictTuples)!==null&&A!==void 0?A:v1)!==null&&F!==void 0?F:"log",strictRequired:(V=(L=Q.strictRequired)!==null&&L!==void 0?L:v1)!==null&&V!==void 0?V:!1,code:Q.code?{...Q.code,optimize:PX,regExp:IX}:{optimize:PX,regExp:IX},loopRequired:(O=Q.loopRequired)!==null&&O!==void 0?O:n7,loopEnum:(M=Q.loopEnum)!==null&&M!==void 0?M:n7,meta:(Z=Q.meta)!==null&&Z!==void 0?Z:!0,messages:(T=Q.messages)!==null&&T!==void 0?T:!0,inlineRefs:(E=Q.inlineRefs)!==null&&E!==void 0?E:!0,schemaId:(R=Q.schemaId)!==null&&R!==void 0?R:"$id",addUsedSchema:(I=Q.addUsedSchema)!==null&&I!==void 0?I:!0,validateSchema:(P0=Q.validateSchema)!==null&&P0!==void 0?P0:!0,validateFormats:(I0=Q.validateFormats)!==null&&I0!==void 0?I0:!0,unicodeRegExp:(sQ=Q.unicodeRegExp)!==null&&sQ!==void 0?sQ:!0,int32range:(eQ=Q.int32range)!==null&&eQ!==void 0?eQ:!0,uriResolver:w3}}class xQ{constructor(Q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Q=this.opts={...Q,...MD(Q)};let{es5:X,lines:Y}=this.opts.code;this.scope=new FD.ValueScope({scope:{},prefixes:VD,es5:X,lines:Y}),this.logger=ED(Q.logger);let W=Q.validateFormats;if(Q.validateFormats=!1,this.RULES=(0,LD.getRules)(),o7.call(this,OD,Q,"NOT SUPPORTED"),o7.call(this,ZD,Q,"DEPRECATED","warn"),this._metaOpts=PD.call(this),Q.formats)ND.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),Q.keywords)wD.call(this,Q.keywords);if(typeof Q.meta=="object")this.addMetaSchema(Q.meta);qD.call(this),Q.validateFormats=W}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:Q,meta:X,schemaId:Y}=this.opts,W=r7;if(Y==="id")W={...r7},W.id=W.$id,delete W.$id;if(X&&Q)this.addMetaSchema(W,W[Y],!1)}defaultMeta(){let{meta:Q,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof Q=="object"?Q[X]||Q:void 0}validate(Q,X){let Y;if(typeof Q=="string"){if(Y=this.getSchema(Q),!Y)throw Error(`no schema with key or ref "${Q}"`)}else Y=this.compile(Q);let W=Y(X);if(!("$async"in Y))this.errors=Y.errors;return W}compile(Q,X){let Y=this._addSchema(Q,X);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(Q,X){if(typeof this.opts.loadSchema!="function")throw Error("options.loadSchema should be a function");let{loadSchema:Y}=this.opts;return W.call(this,Q,X);async function W(K,z){await G.call(this,K.$schema);let A=this._addSchema(K,z);return A.validate||J.call(this,A)}async function G(K){if(K&&!this.getSchema(K))await W.call(this,{$ref:K},!0)}async function J(K){try{return this._compileSchemaEnv(K)}catch(z){if(!(z instanceof a7.default))throw z;return H.call(this,z),await $.call(this,z.missingSchema),J.call(this,K)}}function H({missingSchema:K,missingRef:z}){if(this.refs[K])throw Error(`AnySchema ${K} is loaded but ${z} cannot be resolved`)}async function $(K){let z=await B.call(this,K);if(!this.refs[K])await G.call(this,z.$schema);if(!this.refs[K])this.addSchema(z,K,X)}async function B(K){let z=this._loading[K];if(z)return z;try{return await(this._loading[K]=Y(K))}finally{delete this._loading[K]}}}addSchema(Q,X,Y,W=this.opts.validateSchema){if(Array.isArray(Q)){for(let J of Q)this.addSchema(J,void 0,Y,W);return this}let G;if(typeof Q==="object"){let{schemaId:J}=this.opts;if(G=Q[J],G!==void 0&&typeof G!="string")throw Error(`schema ${J} must be string`)}return X=(0,M9.normalizeId)(X||G),this._checkUnique(X),this.schemas[X]=this._addSchema(Q,Y,X,W,!0),this}addMetaSchema(Q,X,Y=this.opts.validateSchema){return this.addSchema(Q,X,!0,Y),this}validateSchema(Q,X){if(typeof Q=="boolean")return!0;let Y;if(Y=Q.$schema,Y!==void 0&&typeof Y!="string")throw Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let W=this.validate(Y,Q);if(!W&&X){let G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw Error(G)}return W}getSchema(Q){let X;while(typeof(X=t7.call(this,Q))=="string")Q=X;if(X===void 0){let{schemaId:Y}=this.opts,W=new Z9.SchemaEnv({schema:{},schemaId:Y});if(X=Z9.resolveSchema.call(this,W,Q),!X)return;this.refs[Q]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(Q){if(Q instanceof RegExp)return this._removeAllSchemas(this.schemas,Q),this._removeAllSchemas(this.refs,Q),this;switch(typeof Q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let X=t7.call(this,Q);if(typeof X=="object")this._cache.delete(X.schema);return delete this.schemas[Q],delete this.refs[Q],this}case"object":{let X=Q;this._cache.delete(X);let Y=Q[this.opts.schemaId];if(Y)Y=(0,M9.normalizeId)(Y),delete this.schemas[Y],delete this.refs[Y];return this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Q){for(let X of Q)this.addKeyword(X);return this}addKeyword(Q,X){let Y;if(typeof Q=="string"){if(Y=Q,typeof X=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=Y}else if(typeof Q=="object"&&X===void 0){if(X=Q,Y=X.keyword,Array.isArray(Y)&&!Y.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(TD.call(this,Y,X),!X)return(0,o8.eachItem)(Y,(G)=>n8.call(this,G)),this;RD.call(this,X);let W={...X,type:(0,_Q.getJSONTypes)(X.type),schemaType:(0,_Q.getJSONTypes)(X.schemaType)};return(0,o8.eachItem)(Y,W.type.length===0?(G)=>n8.call(this,G,W):(G)=>W.type.forEach((J)=>n8.call(this,G,W,J))),this}getKeyword(Q){let X=this.RULES.all[Q];return typeof X=="object"?X.definition:!!X}removeKeyword(Q){let{RULES:X}=this;delete X.keywords[Q],delete X.all[Q];for(let Y of X.rules){let W=Y.rules.findIndex((G)=>G.keyword===Q);if(W>=0)Y.rules.splice(W,1)}return this}addFormat(Q,X){if(typeof X=="string")X=new RegExp(X);return this.formats[Q]=X,this}errorsText(Q=this.errors,{separator:X=", ",dataVar:Y="data"}={}){if(!Q||Q.length===0)return"No errors";return Q.map((W)=>`${Y}${W.instancePath} ${W.message}`).reduce((W,G)=>W+X+G)}$dataMetaSchema(Q,X){let Y=this.RULES.all;Q=JSON.parse(JSON.stringify(Q));for(let W of X){let G=W.split("/").slice(1),J=Q;for(let H of G)J=J[H];for(let H in Y){let $=Y[H];if(typeof $!="object")continue;let{$data:B}=$.definition,K=J[H];if(B&&K)J[H]=e7(K)}}return Q}_removeAllSchemas(Q,X){for(let Y in Q){let W=Q[Y];if(!X||X.test(Y)){if(typeof W=="string")delete Q[Y];else if(W&&!W.meta)this._cache.delete(W.schema),delete Q[Y]}}}_addSchema(Q,X,Y,W=this.opts.validateSchema,G=this.opts.addUsedSchema){let J,{schemaId:H}=this.opts;if(typeof Q=="object")J=Q[H];else if(this.opts.jtd)throw Error("schema must be object");else if(typeof Q!="boolean")throw Error("schema must be object or boolean");let $=this._cache.get(Q);if($!==void 0)return $;Y=(0,M9.normalizeId)(J||Y);let B=M9.getSchemaRefs.call(this,Q,Y);if($=new Z9.SchemaEnv({schema:Q,schemaId:H,meta:X,baseId:Y,localRefs:B}),this._cache.set($.schema,$),G&&!Y.startsWith("#")){if(Y)this._checkUnique(Y);this.refs[Y]=$}if(W)this.validateSchema(Q,!0);return $}_checkUnique(Q){if(this.schemas[Q]||this.refs[Q])throw Error(`schema with key or id "${Q}" already exists`)}_compileSchemaEnv(Q){if(Q.meta)this._compileMetaSchema(Q);else Z9.compileSchema.call(this,Q);if(!Q.validate)throw Error("ajv implementation error");return Q.validate}_compileMetaSchema(Q){let X=this.opts;this.opts=this._metaOpts;try{Z9.compileSchema.call(this,Q)}finally{this.opts=X}}}xQ.ValidationError=AD.default;xQ.MissingRefError=a7.default;d0.default=xQ;function o7(Q,X,Y,W="error"){for(let G in Q){let J=G;if(J in X)this.logger[W](`${Y}: option ${G}. ${Q[J]}`)}}function t7(Q){return Q=(0,M9.normalizeId)(Q),this.schemas[Q]||this.refs[Q]}function qD(){let Q=this.opts.schemas;if(!Q)return;if(Array.isArray(Q))this.addSchema(Q);else for(let X in Q)this.addSchema(Q[X],X)}function ND(){for(let Q in this.opts.formats){let X=this.opts.formats[Q];if(X)this.addFormat(Q,X)}}function wD(Q){if(Array.isArray(Q)){this.addVocabulary(Q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let X in Q){let Y=Q[X];if(!Y.keyword)Y.keyword=X;this.addKeyword(Y)}}function PD(){let Q={...this.opts};for(let X of UD)delete Q[X];return Q}var ID={log(){},warn(){},error(){}};function ED(Q){if(Q===!1)return ID;if(Q===void 0)return console;if(Q.log&&Q.warn&&Q.error)return Q;throw Error("logger must implement log, warn and error methods")}var bD=/^[a-z_$][a-z0-9_$:-]*$/i;function TD(Q,X){let{RULES:Y}=this;if((0,o8.eachItem)(Q,(W)=>{if(Y.keywords[W])throw Error(`Keyword ${W} is already defined`);if(!bD.test(W))throw Error(`Keyword ${W} has invalid name`)}),!X)return;if(X.$data&&!(("code"in X)||("validate"in X)))throw Error('$data keyword must have "code" or "validate" function')}function n8(Q,X,Y){var W;let G=X===null||X===void 0?void 0:X.post;if(Y&&G)throw Error('keyword with "post" flag cannot have "type"');let{RULES:J}=this,H=G?J.post:J.rules.find(({type:B})=>B===Y);if(!H)H={type:Y,rules:[]},J.rules.push(H);if(J.keywords[Q]=!0,!X)return;let $={keyword:Q,definition:{...X,type:(0,_Q.getJSONTypes)(X.type),schemaType:(0,_Q.getJSONTypes)(X.schemaType)}};if(X.before)jD.call(this,H,$,X.before);else H.rules.push($);J.all[Q]=$,(W=X.implements)===null||W===void 0||W.forEach((B)=>this.addKeyword(B))}function jD(Q,X,Y){let W=Q.rules.findIndex((G)=>G.keyword===Y);if(W>=0)Q.rules.splice(W,0,X);else Q.rules.push(X),this.logger.warn(`rule ${Y} is not defined`)}function RD(Q){let{metaSchema:X}=Q;if(X===void 0)return;if(Q.$data&&this.opts.$data)X=e7(X);Q.validateSchema=this.compile(X,!0)}var SD={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function e7(Q){return{anyOf:[Q,SD]}}});var Y5=q((X5)=>{Object.defineProperty(X5,"__esModule",{value:!0});var vD={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};X5.default=vD});var B5=q((H5)=>{Object.defineProperty(H5,"__esModule",{value:!0});H5.callRef=H5.getValidate=void 0;var xD=U9(),W5=N0(),D0=k(),R1=m0(),G5=RQ(),gQ=h(),gD={keyword:"$ref",schemaType:"string",code(Q){let{gen:X,schema:Y,it:W}=Q,{baseId:G,schemaEnv:J,validateName:H,opts:$,self:B}=W,{root:K}=J;if((Y==="#"||Y==="#/")&&G===K.baseId)return A();let z=G5.resolveRef.call(B,K,G,Y);if(z===void 0)throw new xD.default(W.opts.uriResolver,G,Y);if(z instanceof G5.SchemaEnv)return F(z);return L(z);function A(){if(J===K)return yQ(Q,H,J,J.$async);let V=X.scopeValue("root",{ref:K});return yQ(Q,D0._`${V}.validate`,K,K.$async)}function F(V){let O=J5(Q,V);yQ(Q,O,V,V.$async)}function L(V){let O=X.scopeValue("schema",$.code.source===!0?{ref:V,code:(0,D0.stringify)(V)}:{ref:V}),M=X.name("valid"),Z=Q.subschema({schema:V,dataTypes:[],schemaPath:D0.nil,topSchemaRef:O,errSchemaPath:Y},M);Q.mergeEvaluated(Z),Q.ok(M)}}};function J5(Q,X){let{gen:Y}=Q;return X.validate?Y.scopeValue("validate",{ref:X.validate}):D0._`${Y.scopeValue("wrapper",{ref:X})}.validate`}H5.getValidate=J5;function yQ(Q,X,Y,W){let{gen:G,it:J}=Q,{allErrors:H,schemaEnv:$,opts:B}=J,K=B.passContext?R1.default.this:D0.nil;if(W)z();else A();function z(){if(!$.$async)throw Error("async schema referenced by sync schema");let V=G.let("valid");G.try(()=>{if(G.code(D0._`await ${(0,W5.callValidateCode)(Q,X,K)}`),L(X),!H)G.assign(V,!0)},(O)=>{if(G.if(D0._`!(${O} instanceof ${J.ValidationError})`,()=>G.throw(O)),F(O),!H)G.assign(V,!1)}),Q.ok(V)}function A(){Q.result((0,W5.callValidateCode)(Q,X,K),()=>L(X),()=>F(X))}function F(V){let O=D0._`${V}.errors`;G.assign(R1.default.vErrors,D0._`${R1.default.vErrors} === null ? ${O} : ${R1.default.vErrors}.concat(${O})`),G.assign(R1.default.errors,D0._`${R1.default.vErrors}.length`)}function L(V){var O;if(!J.opts.unevaluated)return;let M=(O=Y===null||Y===void 0?void 0:Y.validate)===null||O===void 0?void 0:O.evaluated;if(J.props!==!0)if(M&&!M.dynamicProps){if(M.props!==void 0)J.props=gQ.mergeEvaluated.props(G,M.props,J.props)}else{let Z=G.var("props",D0._`${V}.evaluated.props`);J.props=gQ.mergeEvaluated.props(G,Z,J.props,D0.Name)}if(J.items!==!0)if(M&&!M.dynamicItems){if(M.items!==void 0)J.items=gQ.mergeEvaluated.items(G,M.items,J.items)}else{let Z=G.var("items",D0._`${V}.evaluated.items`);J.items=gQ.mergeEvaluated.items(G,Z,J.items,D0.Name)}}}H5.callRef=yQ;H5.default=gD});var z5=q((K5)=>{Object.defineProperty(K5,"__esModule",{value:!0});var uD=Y5(),fD=B5(),lD=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",uD.default,fD.default];K5.default=lD});var L5=q((A5)=>{Object.defineProperty(A5,"__esModule",{value:!0});var hQ=k(),G1=hQ.operators,uQ={maximum:{okStr:"<=",ok:G1.LTE,fail:G1.GT},minimum:{okStr:">=",ok:G1.GTE,fail:G1.LT},exclusiveMaximum:{okStr:"<",ok:G1.LT,fail:G1.GTE},exclusiveMinimum:{okStr:">",ok:G1.GT,fail:G1.LTE}},cD={message:({keyword:Q,schemaCode:X})=>hQ.str`must be ${uQ[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>hQ._`{comparison: ${uQ[Q].okStr}, limit: ${X}}`},pD={keyword:Object.keys(uQ),type:"number",schemaType:"number",$data:!0,error:cD,code(Q){let{keyword:X,data:Y,schemaCode:W}=Q;Q.fail$data(hQ._`${Y} ${uQ[X].fail} ${W} || isNaN(${Y})`)}};A5.default=pD});var D5=q((F5)=>{Object.defineProperty(F5,"__esModule",{value:!0});var q9=k(),iD={message:({schemaCode:Q})=>q9.str`must be multiple of ${Q}`,params:({schemaCode:Q})=>q9._`{multipleOf: ${Q}}`},rD={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:iD,code(Q){let{gen:X,data:Y,schemaCode:W,it:G}=Q,J=G.opts.multipleOfPrecision,H=X.let("res"),$=J?q9._`Math.abs(Math.round(${H}) - ${H}) > 1e-${J}`:q9._`${H} !== parseInt(${H})`;Q.fail$data(q9._`(${W} === 0 || (${H} = ${Y}/${W}, ${$}))`)}};F5.default=rD});var O5=q((V5)=>{Object.defineProperty(V5,"__esModule",{value:!0});function U5(Q){let X=Q.length,Y=0,W=0,G;while(W<X)if(Y++,G=Q.charCodeAt(W++),G>=55296&&G<=56319&&W<X){if(G=Q.charCodeAt(W),(G&64512)===56320)W++}return Y}V5.default=U5;U5.code='require("ajv/dist/runtime/ucs2length").default'});var M5=q((Z5)=>{Object.defineProperty(Z5,"__esModule",{value:!0});var L1=k(),tD=h(),aD=O5(),sD={message({keyword:Q,schemaCode:X}){let Y=Q==="maxLength"?"more":"fewer";return L1.str`must NOT have ${Y} than ${X} characters`},params:({schemaCode:Q})=>L1._`{limit: ${Q}}`},eD={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:sD,code(Q){let{keyword:X,data:Y,schemaCode:W,it:G}=Q,J=X==="maxLength"?L1.operators.GT:L1.operators.LT,H=G.opts.unicode===!1?L1._`${Y}.length`:L1._`${(0,tD.useFunc)(Q.gen,aD.default)}(${Y})`;Q.fail$data(L1._`${H} ${J} ${W}`)}};Z5.default=eD});var N5=q((q5)=>{Object.defineProperty(q5,"__esModule",{value:!0});var XU=N0(),fQ=k(),YU={message:({schemaCode:Q})=>fQ.str`must match pattern "${Q}"`,params:({schemaCode:Q})=>fQ._`{pattern: ${Q}}`},WU={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:YU,code(Q){let{data:X,$data:Y,schema:W,schemaCode:G,it:J}=Q,H=J.opts.unicodeRegExp?"u":"",$=Y?fQ._`(new RegExp(${G}, ${H}))`:(0,XU.usePattern)(Q,W);Q.fail$data(fQ._`!${$}.test(${X})`)}};q5.default=WU});var P5=q((w5)=>{Object.defineProperty(w5,"__esModule",{value:!0});var N9=k(),JU={message({keyword:Q,schemaCode:X}){let Y=Q==="maxProperties"?"more":"fewer";return N9.str`must NOT have ${Y} than ${X} properties`},params:({schemaCode:Q})=>N9._`{limit: ${Q}}`},HU={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:JU,code(Q){let{keyword:X,data:Y,schemaCode:W}=Q,G=X==="maxProperties"?N9.operators.GT:N9.operators.LT;Q.fail$data(N9._`Object.keys(${Y}).length ${G} ${W}`)}};w5.default=HU});var E5=q((I5)=>{Object.defineProperty(I5,"__esModule",{value:!0});var w9=N0(),P9=k(),BU=h(),KU={message:({params:{missingProperty:Q}})=>P9.str`must have required property '${Q}'`,params:({params:{missingProperty:Q}})=>P9._`{missingProperty: ${Q}}`},zU={keyword:"required",type:"object",schemaType:"array",$data:!0,error:KU,code(Q){let{gen:X,schema:Y,schemaCode:W,data:G,$data:J,it:H}=Q,{opts:$}=H;if(!J&&Y.length===0)return;let B=Y.length>=$.loopRequired;if(H.allErrors)K();else z();if($.strictRequired){let L=Q.parentSchema.properties,{definedProperties:V}=Q.it;for(let O of Y)if((L===null||L===void 0?void 0:L[O])===void 0&&!V.has(O)){let M=H.schemaEnv.baseId+H.errSchemaPath,Z=`required property "${O}" is not defined at "${M}" (strictRequired)`;(0,BU.checkStrictMode)(H,Z,H.opts.strictRequired)}}function K(){if(B||J)Q.block$data(P9.nil,A);else for(let L of Y)(0,w9.checkReportMissingProp)(Q,L)}function z(){let L=X.let("missing");if(B||J){let V=X.let("valid",!0);Q.block$data(V,()=>F(L,V)),Q.ok(V)}else X.if((0,w9.checkMissingProp)(Q,Y,L)),(0,w9.reportMissingProp)(Q,L),X.else()}function A(){X.forOf("prop",W,(L)=>{Q.setParams({missingProperty:L}),X.if((0,w9.noPropertyInData)(X,G,L,$.ownProperties),()=>Q.error())})}function F(L,V){Q.setParams({missingProperty:L}),X.forOf(L,W,()=>{X.assign(V,(0,w9.propertyInData)(X,G,L,$.ownProperties)),X.if((0,P9.not)(V),()=>{Q.error(),X.break()})},P9.nil)}}};I5.default=zU});var T5=q((b5)=>{Object.defineProperty(b5,"__esModule",{value:!0});var I9=k(),LU={message({keyword:Q,schemaCode:X}){let Y=Q==="maxItems"?"more":"fewer";return I9.str`must NOT have ${Y} than ${X} items`},params:({schemaCode:Q})=>I9._`{limit: ${Q}}`},FU={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:LU,code(Q){let{keyword:X,data:Y,schemaCode:W}=Q,G=X==="maxItems"?I9.operators.GT:I9.operators.LT;Q.fail$data(I9._`${Y}.length ${G} ${W}`)}};b5.default=FU});var lQ=q((R5)=>{Object.defineProperty(R5,"__esModule",{value:!0});var j5=_8();j5.code='require("ajv/dist/runtime/equal").default';R5.default=j5});var C5=q((S5)=>{Object.defineProperty(S5,"__esModule",{value:!0});var t8=z9(),J0=k(),VU=h(),OU=lQ(),ZU={message:({params:{i:Q,j:X}})=>J0.str`must NOT have duplicate items (items ## ${X} and ${Q} are identical)`,params:({params:{i:Q,j:X}})=>J0._`{i: ${Q}, j: ${X}}`},MU={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ZU,code(Q){let{gen:X,data:Y,$data:W,schema:G,parentSchema:J,schemaCode:H,it:$}=Q;if(!W&&!G)return;let B=X.let("valid"),K=J.items?(0,t8.getSchemaTypes)(J.items):[];Q.block$data(B,z,J0._`${H} === false`),Q.ok(B);function z(){let V=X.let("i",J0._`${Y}.length`),O=X.let("j");Q.setParams({i:V,j:O}),X.assign(B,!0),X.if(J0._`${V} > 1`,()=>(A()?F:L)(V,O))}function A(){return K.length>0&&!K.some((V)=>V==="object"||V==="array")}function F(V,O){let M=X.name("item"),Z=(0,t8.checkDataTypes)(K,M,$.opts.strictNumbers,t8.DataType.Wrong),T=X.const("indices",J0._`{}`);X.for(J0._`;${V}--;`,()=>{if(X.let(M,J0._`${Y}[${V}]`),X.if(Z,J0._`continue`),K.length>1)X.if(J0._`typeof ${M} == "string"`,J0._`${M} += "_"`);X.if(J0._`typeof ${T}[${M}] == "number"`,()=>{X.assign(O,J0._`${T}[${M}]`),Q.error(),X.assign(B,!1).break()}).code(J0._`${T}[${M}] = ${V}`)})}function L(V,O){let M=(0,VU.useFunc)(X,OU.default),Z=X.name("outer");X.label(Z).for(J0._`;${V}--;`,()=>X.for(J0._`${O} = ${V}; ${O}--;`,()=>X.if(J0._`${M}(${Y}[${V}], ${Y}[${O}])`,()=>{Q.error(),X.assign(B,!1).break(Z)})))}}};S5.default=MU});var v5=q((k5)=>{Object.defineProperty(k5,"__esModule",{value:!0});var a8=k(),NU=h(),wU=lQ(),PU={message:"must be equal to constant",params:({schemaCode:Q})=>a8._`{allowedValue: ${Q}}`},IU={keyword:"const",$data:!0,error:PU,code(Q){let{gen:X,data:Y,$data:W,schemaCode:G,schema:J}=Q;if(W||J&&typeof J=="object")Q.fail$data(a8._`!${(0,NU.useFunc)(X,wU.default)}(${Y}, ${G})`);else Q.fail(a8._`${J} !== ${Y}`)}};k5.default=IU});var x5=q((_5)=>{Object.defineProperty(_5,"__esModule",{value:!0});var E9=k(),bU=h(),TU=lQ(),jU={message:"must be equal to one of the allowed values",params:({schemaCode:Q})=>E9._`{allowedValues: ${Q}}`},RU={keyword:"enum",schemaType:"array",$data:!0,error:jU,code(Q){let{gen:X,data:Y,$data:W,schema:G,schemaCode:J,it:H}=Q;if(!W&&G.length===0)throw Error("enum must have non-empty array");let $=G.length>=H.opts.loopEnum,B,K=()=>B!==null&&B!==void 0?B:B=(0,bU.useFunc)(X,TU.default),z;if($||W)z=X.let("valid"),Q.block$data(z,A);else{if(!Array.isArray(G))throw Error("ajv implementation error");let L=X.const("vSchema",J);z=(0,E9.or)(...G.map((V,O)=>F(L,O)))}Q.pass(z);function A(){X.assign(z,!1),X.forOf("v",J,(L)=>X.if(E9._`${K()}(${Y}, ${L})`,()=>X.assign(z,!0).break()))}function F(L,V){let O=G[V];return typeof O==="object"&&O!==null?E9._`${K()}(${Y}, ${L}[${V}])`:E9._`${Y} === ${O}`}}};_5.default=RU});var y5=q((g5)=>{Object.defineProperty(g5,"__esModule",{value:!0});var CU=L5(),kU=D5(),vU=M5(),_U=N5(),xU=P5(),gU=E5(),yU=T5(),hU=C5(),uU=v5(),fU=x5(),lU=[CU.default,kU.default,vU.default,_U.default,xU.default,gU.default,yU.default,hU.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},uU.default,fU.default];g5.default=lU});var e8=q((u5)=>{Object.defineProperty(u5,"__esModule",{value:!0});u5.validateAdditionalItems=void 0;var F1=k(),s8=h(),cU={message:({params:{len:Q}})=>F1.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>F1._`{limit: ${Q}}`},pU={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:cU,code(Q){let{parentSchema:X,it:Y}=Q,{items:W}=X;if(!Array.isArray(W)){(0,s8.checkStrictMode)(Y,'"additionalItems" is ignored when "items" is not an array of schemas');return}h5(Q,W)}};function h5(Q,X){let{gen:Y,schema:W,data:G,keyword:J,it:H}=Q;H.items=!0;let $=Y.const("len",F1._`${G}.length`);if(W===!1)Q.setParams({len:X.length}),Q.pass(F1._`${$} <= ${X.length}`);else if(typeof W=="object"&&!(0,s8.alwaysValidSchema)(H,W)){let K=Y.var("valid",F1._`${$} <= ${X.length}`);Y.if((0,F1.not)(K),()=>B(K)),Q.ok(K)}function B(K){Y.forRange("i",X.length,$,(z)=>{if(Q.subschema({keyword:J,dataProp:z,dataPropType:s8.Type.Num},K),!H.allErrors)Y.if((0,F1.not)(K),()=>Y.break())})}}u5.validateAdditionalItems=h5;u5.default=pU});var QX=q((c5)=>{Object.defineProperty(c5,"__esModule",{value:!0});c5.validateTuple=void 0;var l5=k(),mQ=h(),iU=N0(),rU={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(Q){let{schema:X,it:Y}=Q;if(Array.isArray(X))return m5(Q,"additionalItems",X);if(Y.items=!0,(0,mQ.alwaysValidSchema)(Y,X))return;Q.ok((0,iU.validateArray)(Q))}};function m5(Q,X,Y=Q.schema){let{gen:W,parentSchema:G,data:J,keyword:H,it:$}=Q;if(z(G),$.opts.unevaluated&&Y.length&&$.items!==!0)$.items=mQ.mergeEvaluated.items(W,Y.length,$.items);let B=W.name("valid"),K=W.const("len",l5._`${J}.length`);Y.forEach((A,F)=>{if((0,mQ.alwaysValidSchema)($,A))return;W.if(l5._`${K} > ${F}`,()=>Q.subschema({keyword:H,schemaProp:F,dataProp:F},B)),Q.ok(B)});function z(A){let{opts:F,errSchemaPath:L}=$,V=Y.length,O=V===A.minItems&&(V===A.maxItems||A[X]===!1);if(F.strictTuples&&!O){let M=`"${H}" is ${V}-tuple, but minItems or maxItems/${X} are not specified or different at path "${L}"`;(0,mQ.checkStrictMode)($,M,F.strictTuples)}}}c5.validateTuple=m5;c5.default=rU});var i5=q((d5)=>{Object.defineProperty(d5,"__esModule",{value:!0});var oU=QX(),tU={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(Q)=>(0,oU.validateTuple)(Q,"items")};d5.default=tU});var o5=q((n5)=>{Object.defineProperty(n5,"__esModule",{value:!0});var r5=k(),sU=h(),eU=N0(),QV=e8(),XV={message:({params:{len:Q}})=>r5.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>r5._`{limit: ${Q}}`},YV={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:XV,code(Q){let{schema:X,parentSchema:Y,it:W}=Q,{prefixItems:G}=Y;if(W.items=!0,(0,sU.alwaysValidSchema)(W,X))return;if(G)(0,QV.validateAdditionalItems)(Q,G);else Q.ok((0,eU.validateArray)(Q))}};n5.default=YV});var a5=q((t5)=>{Object.defineProperty(t5,"__esModule",{value:!0});var w0=k(),cQ=h(),GV={message:({params:{min:Q,max:X}})=>X===void 0?w0.str`must contain at least ${Q} valid item(s)`:w0.str`must contain at least ${Q} and no more than ${X} valid item(s)`,params:({params:{min:Q,max:X}})=>X===void 0?w0._`{minContains: ${Q}}`:w0._`{minContains: ${Q}, maxContains: ${X}}`},JV={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:GV,code(Q){let{gen:X,schema:Y,parentSchema:W,data:G,it:J}=Q,H,$,{minContains:B,maxContains:K}=W;if(J.opts.next)H=B===void 0?1:B,$=K;else H=1;let z=X.const("len",w0._`${G}.length`);if(Q.setParams({min:H,max:$}),$===void 0&&H===0){(0,cQ.checkStrictMode)(J,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if($!==void 0&&H>$){(0,cQ.checkStrictMode)(J,'"minContains" > "maxContains" is always invalid'),Q.fail();return}if((0,cQ.alwaysValidSchema)(J,Y)){let O=w0._`${z} >= ${H}`;if($!==void 0)O=w0._`${O} && ${z} <= ${$}`;Q.pass(O);return}J.items=!0;let A=X.name("valid");if($===void 0&&H===1)L(A,()=>X.if(A,()=>X.break()));else if(H===0){if(X.let(A,!0),$!==void 0)X.if(w0._`${G}.length > 0`,F)}else X.let(A,!1),F();Q.result(A,()=>Q.reset());function F(){let O=X.name("_valid"),M=X.let("count",0);L(O,()=>X.if(O,()=>V(M)))}function L(O,M){X.forRange("i",0,z,(Z)=>{Q.subschema({keyword:"contains",dataProp:Z,dataPropType:cQ.Type.Num,compositeRule:!0},O),M()})}function V(O){if(X.code(w0._`${O}++`),$===void 0)X.if(w0._`${O} >= ${H}`,()=>X.assign(A,!0).break());else if(X.if(w0._`${O} > ${$}`,()=>X.assign(A,!1).break()),H===1)X.assign(A,!0);else X.if(w0._`${O} >= ${H}`,()=>X.assign(A,!0))}}};t5.default=JV});var WH=q((QH)=>{Object.defineProperty(QH,"__esModule",{value:!0});QH.validateSchemaDeps=QH.validatePropertyDeps=QH.error=void 0;var XX=k(),$V=h(),b9=N0();QH.error={message:({params:{property:Q,depsCount:X,deps:Y}})=>{let W=X===1?"property":"properties";return XX.str`must have ${W} ${Y} when property ${Q} is present`},params:({params:{property:Q,depsCount:X,deps:Y,missingProperty:W}})=>XX._`{property: ${Q},
    missingProperty: ${W},
    depsCount: ${X},
    deps: ${Y}}`};var BV={keyword:"dependencies",type:"object",schemaType:"object",error:QH.error,code(Q){let[X,Y]=KV(Q);s5(Q,X),e5(Q,Y)}};function KV({schema:Q}){let X={},Y={};for(let W in Q){if(W==="__proto__")continue;let G=Array.isArray(Q[W])?X:Y;G[W]=Q[W]}return[X,Y]}function s5(Q,X=Q.schema){let{gen:Y,data:W,it:G}=Q;if(Object.keys(X).length===0)return;let J=Y.let("missing");for(let H in X){let $=X[H];if($.length===0)continue;let B=(0,b9.propertyInData)(Y,W,H,G.opts.ownProperties);if(Q.setParams({property:H,depsCount:$.length,deps:$.join(", ")}),G.allErrors)Y.if(B,()=>{for(let K of $)(0,b9.checkReportMissingProp)(Q,K)});else Y.if(XX._`${B} && (${(0,b9.checkMissingProp)(Q,$,J)})`),(0,b9.reportMissingProp)(Q,J),Y.else()}}QH.validatePropertyDeps=s5;function e5(Q,X=Q.schema){let{gen:Y,data:W,keyword:G,it:J}=Q,H=Y.name("valid");for(let $ in X){if((0,$V.alwaysValidSchema)(J,X[$]))continue;Y.if((0,b9.propertyInData)(Y,W,$,J.opts.ownProperties),()=>{let B=Q.subschema({keyword:G,schemaProp:$},H);Q.mergeValidEvaluated(B,H)},()=>Y.var(H,!0)),Q.ok(H)}}QH.validateSchemaDeps=e5;QH.default=BV});var HH=q((JH)=>{Object.defineProperty(JH,"__esModule",{value:!0});var GH=k(),LV=h(),FV={message:"property name must be valid",params:({params:Q})=>GH._`{propertyName: ${Q.propertyName}}`},DV={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:FV,code(Q){let{gen:X,schema:Y,data:W,it:G}=Q;if((0,LV.alwaysValidSchema)(G,Y))return;let J=X.name("valid");X.forIn("key",W,(H)=>{Q.setParams({propertyName:H}),Q.subschema({keyword:"propertyNames",data:H,dataTypes:["string"],propertyName:H,compositeRule:!0},J),X.if((0,GH.not)(J),()=>{if(Q.error(!0),!G.allErrors)X.break()})}),Q.ok(J)}};JH.default=DV});var YX=q(($H)=>{Object.defineProperty($H,"__esModule",{value:!0});var pQ=N0(),C0=k(),VV=m0(),dQ=h(),OV={message:"must NOT have additional properties",params:({params:Q})=>C0._`{additionalProperty: ${Q.additionalProperty}}`},ZV={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:OV,code(Q){let{gen:X,schema:Y,parentSchema:W,data:G,errsCount:J,it:H}=Q;if(!J)throw Error("ajv implementation error");let{allErrors:$,opts:B}=H;if(H.props=!0,B.removeAdditional!=="all"&&(0,dQ.alwaysValidSchema)(H,Y))return;let K=(0,pQ.allSchemaProperties)(W.properties),z=(0,pQ.allSchemaProperties)(W.patternProperties);A(),Q.ok(C0._`${J} === ${VV.default.errors}`);function A(){X.forIn("key",G,(M)=>{if(!K.length&&!z.length)V(M);else X.if(F(M),()=>V(M))})}function F(M){let Z;if(K.length>8){let T=(0,dQ.schemaRefOrVal)(H,W.properties,"properties");Z=(0,pQ.isOwnProperty)(X,T,M)}else if(K.length)Z=(0,C0.or)(...K.map((T)=>C0._`${M} === ${T}`));else Z=C0.nil;if(z.length)Z=(0,C0.or)(Z,...z.map((T)=>C0._`${(0,pQ.usePattern)(Q,T)}.test(${M})`));return(0,C0.not)(Z)}function L(M){X.code(C0._`delete ${G}[${M}]`)}function V(M){if(B.removeAdditional==="all"||B.removeAdditional&&Y===!1){L(M);return}if(Y===!1){if(Q.setParams({additionalProperty:M}),Q.error(),!$)X.break();return}if(typeof Y=="object"&&!(0,dQ.alwaysValidSchema)(H,Y)){let Z=X.name("valid");if(B.removeAdditional==="failing")O(M,Z,!1),X.if((0,C0.not)(Z),()=>{Q.reset(),L(M)});else if(O(M,Z),!$)X.if((0,C0.not)(Z),()=>X.break())}}function O(M,Z,T){let E={keyword:"additionalProperties",dataProp:M,dataPropType:dQ.Type.Str};if(T===!1)Object.assign(E,{compositeRule:!0,createErrors:!1,allErrors:!1});Q.subschema(E,Z)}}};$H.default=ZV});var AH=q((zH)=>{Object.defineProperty(zH,"__esModule",{value:!0});var qV=D9(),BH=N0(),WX=h(),KH=YX(),NV={keyword:"properties",type:"object",schemaType:"object",code(Q){let{gen:X,schema:Y,parentSchema:W,data:G,it:J}=Q;if(J.opts.removeAdditional==="all"&&W.additionalProperties===void 0)KH.default.code(new qV.KeywordCxt(J,KH.default,"additionalProperties"));let H=(0,BH.allSchemaProperties)(Y);for(let A of H)J.definedProperties.add(A);if(J.opts.unevaluated&&H.length&&J.props!==!0)J.props=WX.mergeEvaluated.props(X,(0,WX.toHash)(H),J.props);let $=H.filter((A)=>!(0,WX.alwaysValidSchema)(J,Y[A]));if($.length===0)return;let B=X.name("valid");for(let A of $){if(K(A))z(A);else{if(X.if((0,BH.propertyInData)(X,G,A,J.opts.ownProperties)),z(A),!J.allErrors)X.else().var(B,!0);X.endIf()}Q.it.definedProperties.add(A),Q.ok(B)}function K(A){return J.opts.useDefaults&&!J.compositeRule&&Y[A].default!==void 0}function z(A){Q.subschema({keyword:"properties",schemaProp:A,dataProp:A},B)}}};zH.default=NV});var VH=q((UH)=>{Object.defineProperty(UH,"__esModule",{value:!0});var LH=N0(),iQ=k(),FH=h(),DH=h(),PV={keyword:"patternProperties",type:"object",schemaType:"object",code(Q){let{gen:X,schema:Y,data:W,parentSchema:G,it:J}=Q,{opts:H}=J,$=(0,LH.allSchemaProperties)(Y),B=$.filter((O)=>(0,FH.alwaysValidSchema)(J,Y[O]));if($.length===0||B.length===$.length&&(!J.opts.unevaluated||J.props===!0))return;let K=H.strictSchema&&!H.allowMatchingProperties&&G.properties,z=X.name("valid");if(J.props!==!0&&!(J.props instanceof iQ.Name))J.props=(0,DH.evaluatedPropsToName)(X,J.props);let{props:A}=J;F();function F(){for(let O of $){if(K)L(O);if(J.allErrors)V(O);else X.var(z,!0),V(O),X.if(z)}}function L(O){for(let M in K)if(new RegExp(O).test(M))(0,FH.checkStrictMode)(J,`property ${M} matches pattern ${O} (use allowMatchingProperties)`)}function V(O){X.forIn("key",W,(M)=>{X.if(iQ._`${(0,LH.usePattern)(Q,O)}.test(${M})`,()=>{let Z=B.includes(O);if(!Z)Q.subschema({keyword:"patternProperties",schemaProp:O,dataProp:M,dataPropType:DH.Type.Str},z);if(J.opts.unevaluated&&A!==!0)X.assign(iQ._`${A}[${M}]`,!0);else if(!Z&&!J.allErrors)X.if((0,iQ.not)(z),()=>X.break())})})}}};UH.default=PV});var ZH=q((OH)=>{Object.defineProperty(OH,"__esModule",{value:!0});var EV=h(),bV={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(Q){let{gen:X,schema:Y,it:W}=Q;if((0,EV.alwaysValidSchema)(W,Y)){Q.fail();return}let G=X.name("valid");Q.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},G),Q.failResult(G,()=>Q.reset(),()=>Q.error())},error:{message:"must NOT be valid"}};OH.default=bV});var qH=q((MH)=>{Object.defineProperty(MH,"__esModule",{value:!0});var jV=N0(),RV={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:jV.validateUnion,error:{message:"must match a schema in anyOf"}};MH.default=RV});var wH=q((NH)=>{Object.defineProperty(NH,"__esModule",{value:!0});var rQ=k(),CV=h(),kV={message:"must match exactly one schema in oneOf",params:({params:Q})=>rQ._`{passingSchemas: ${Q.passing}}`},vV={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:kV,code(Q){let{gen:X,schema:Y,parentSchema:W,it:G}=Q;if(!Array.isArray(Y))throw Error("ajv implementation error");if(G.opts.discriminator&&W.discriminator)return;let J=Y,H=X.let("valid",!1),$=X.let("passing",null),B=X.name("_valid");Q.setParams({passing:$}),X.block(K),Q.result(H,()=>Q.reset(),()=>Q.error(!0));function K(){J.forEach((z,A)=>{let F;if((0,CV.alwaysValidSchema)(G,z))X.var(B,!0);else F=Q.subschema({keyword:"oneOf",schemaProp:A,compositeRule:!0},B);if(A>0)X.if(rQ._`${B} && ${H}`).assign(H,!1).assign($,rQ._`[${$}, ${A}]`).else();X.if(B,()=>{if(X.assign(H,!0),X.assign($,A),F)Q.mergeEvaluated(F,rQ.Name)})})}}};NH.default=vV});var IH=q((PH)=>{Object.defineProperty(PH,"__esModule",{value:!0});var xV=h(),gV={keyword:"allOf",schemaType:"array",code(Q){let{gen:X,schema:Y,it:W}=Q;if(!Array.isArray(Y))throw Error("ajv implementation error");let G=X.name("valid");Y.forEach((J,H)=>{if((0,xV.alwaysValidSchema)(W,J))return;let $=Q.subschema({keyword:"allOf",schemaProp:H},G);Q.ok(G),Q.mergeEvaluated($)})}};PH.default=gV});var jH=q((TH)=>{Object.defineProperty(TH,"__esModule",{value:!0});var nQ=k(),bH=h(),hV={message:({params:Q})=>nQ.str`must match "${Q.ifClause}" schema`,params:({params:Q})=>nQ._`{failingKeyword: ${Q.ifClause}}`},uV={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:hV,code(Q){let{gen:X,parentSchema:Y,it:W}=Q;if(Y.then===void 0&&Y.else===void 0)(0,bH.checkStrictMode)(W,'"if" without "then" and "else" is ignored');let G=EH(W,"then"),J=EH(W,"else");if(!G&&!J)return;let H=X.let("valid",!0),$=X.name("_valid");if(B(),Q.reset(),G&&J){let z=X.let("ifClause");Q.setParams({ifClause:z}),X.if($,K("then",z),K("else",z))}else if(G)X.if($,K("then"));else X.if((0,nQ.not)($),K("else"));Q.pass(H,()=>Q.error(!0));function B(){let z=Q.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},$);Q.mergeEvaluated(z)}function K(z,A){return()=>{let F=Q.subschema({keyword:z},$);if(X.assign(H,$),Q.mergeValidEvaluated(F,H),A)X.assign(A,nQ._`${z}`);else Q.setParams({ifClause:z})}}}};function EH(Q,X){let Y=Q.schema[X];return Y!==void 0&&!(0,bH.alwaysValidSchema)(Q,Y)}TH.default=uV});var SH=q((RH)=>{Object.defineProperty(RH,"__esModule",{value:!0});var lV=h(),mV={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:Q,parentSchema:X,it:Y}){if(X.if===void 0)(0,lV.checkStrictMode)(Y,`"${Q}" without "if" is ignored`)}};RH.default=mV});var kH=q((CH)=>{Object.defineProperty(CH,"__esModule",{value:!0});var pV=e8(),dV=i5(),iV=QX(),rV=o5(),nV=a5(),oV=WH(),tV=HH(),aV=YX(),sV=AH(),eV=VH(),QO=ZH(),XO=qH(),YO=wH(),WO=IH(),GO=jH(),JO=SH();function HO(Q=!1){let X=[QO.default,XO.default,YO.default,WO.default,GO.default,JO.default,tV.default,aV.default,oV.default,sV.default,eV.default];if(Q)X.push(dV.default,rV.default);else X.push(pV.default,iV.default);return X.push(nV.default),X}CH.default=HO});var _H=q((vH)=>{Object.defineProperty(vH,"__esModule",{value:!0});var s=k(),BO={message:({schemaCode:Q})=>s.str`must match format "${Q}"`,params:({schemaCode:Q})=>s._`{format: ${Q}}`},KO={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:BO,code(Q,X){let{gen:Y,data:W,$data:G,schema:J,schemaCode:H,it:$}=Q,{opts:B,errSchemaPath:K,schemaEnv:z,self:A}=$;if(!B.validateFormats)return;if(G)F();else L();function F(){let V=Y.scopeValue("formats",{ref:A.formats,code:B.code.formats}),O=Y.const("fDef",s._`${V}[${H}]`),M=Y.let("fType"),Z=Y.let("format");Y.if(s._`typeof ${O} == "object" && !(${O} instanceof RegExp)`,()=>Y.assign(M,s._`${O}.type || "string"`).assign(Z,s._`${O}.validate`),()=>Y.assign(M,s._`"string"`).assign(Z,O)),Q.fail$data((0,s.or)(T(),E()));function T(){if(B.strictSchema===!1)return s.nil;return s._`${H} && !${Z}`}function E(){let R=z.$async?s._`(${O}.async ? await ${Z}(${W}) : ${Z}(${W}))`:s._`${Z}(${W})`,I=s._`(typeof ${Z} == "function" ? ${R} : ${Z}.test(${W}))`;return s._`${Z} && ${Z} !== true && ${M} === ${X} && !${I}`}}function L(){let V=A.formats[J];if(!V){T();return}if(V===!0)return;let[O,M,Z]=E(V);if(O===X)Q.pass(R());function T(){if(B.strictSchema===!1){A.logger.warn(I());return}throw Error(I());function I(){return`unknown format "${J}" ignored in schema at path "${K}"`}}function E(I){let P0=I instanceof RegExp?(0,s.regexpCode)(I):B.code.formats?s._`${B.code.formats}${(0,s.getProperty)(J)}`:void 0,I0=Y.scopeValue("formats",{key:J,ref:I,code:P0});if(typeof I=="object"&&!(I instanceof RegExp))return[I.type||"string",I.validate,s._`${I0}.validate`];return["string",I,I0]}function R(){if(typeof V=="object"&&!(V instanceof RegExp)&&V.async){if(!z.$async)throw Error("async format in sync schema");return s._`await ${Z}(${W})`}return typeof M=="function"?s._`${Z}(${W})`:s._`${Z}.test(${W})`}}}};vH.default=KO});var gH=q((xH)=>{Object.defineProperty(xH,"__esModule",{value:!0});var AO=_H(),LO=[AO.default];xH.default=LO});var uH=q((yH)=>{Object.defineProperty(yH,"__esModule",{value:!0});yH.contentVocabulary=yH.metadataVocabulary=void 0;yH.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];yH.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var mH=q((lH)=>{Object.defineProperty(lH,"__esModule",{value:!0});var UO=z5(),VO=y5(),OO=kH(),ZO=gH(),fH=uH(),MO=[UO.default,VO.default,(0,OO.default)(),ZO.default,fH.metadataVocabulary,fH.contentVocabulary];lH.default=MO});var iH=q((pH)=>{Object.defineProperty(pH,"__esModule",{value:!0});pH.DiscrError=void 0;var cH;(function(Q){Q.Tag="tag",Q.Mapping="mapping"})(cH||(pH.DiscrError=cH={}))});var oH=q((nH)=>{Object.defineProperty(nH,"__esModule",{value:!0});var S1=k(),GX=iH(),rH=RQ(),NO=U9(),wO=h(),PO={message:({params:{discrError:Q,tagName:X}})=>Q===GX.DiscrError.Tag?`tag "${X}" must be string`:`value of tag "${X}" must be in oneOf`,params:({params:{discrError:Q,tag:X,tagName:Y}})=>S1._`{error: ${Q}, tag: ${Y}, tagValue: ${X}}`},IO={keyword:"discriminator",type:"object",schemaType:"object",error:PO,code(Q){let{gen:X,data:Y,schema:W,parentSchema:G,it:J}=Q,{oneOf:H}=G;if(!J.opts.discriminator)throw Error("discriminator: requires discriminator option");let $=W.propertyName;if(typeof $!="string")throw Error("discriminator: requires propertyName");if(W.mapping)throw Error("discriminator: mapping is not supported");if(!H)throw Error("discriminator: requires oneOf keyword");let B=X.let("valid",!1),K=X.const("tag",S1._`${Y}${(0,S1.getProperty)($)}`);X.if(S1._`typeof ${K} == "string"`,()=>z(),()=>Q.error(!1,{discrError:GX.DiscrError.Tag,tag:K,tagName:$})),Q.ok(B);function z(){let L=F();X.if(!1);for(let V in L)X.elseIf(S1._`${K} === ${V}`),X.assign(B,A(L[V]));X.else(),Q.error(!1,{discrError:GX.DiscrError.Mapping,tag:K,tagName:$}),X.endIf()}function A(L){let V=X.name("valid"),O=Q.subschema({keyword:"oneOf",schemaProp:L},V);return Q.mergeEvaluated(O,S1.Name),V}function F(){var L;let V={},O=Z(G),M=!0;for(let R=0;R<H.length;R++){let I=H[R];if((I===null||I===void 0?void 0:I.$ref)&&!(0,wO.schemaHasRulesButRef)(I,J.self.RULES)){let I0=I.$ref;if(I=rH.resolveRef.call(J.self,J.schemaEnv.root,J.baseId,I0),I instanceof rH.SchemaEnv)I=I.schema;if(I===void 0)throw new NO.default(J.opts.uriResolver,J.baseId,I0)}let P0=(L=I===null||I===void 0?void 0:I.properties)===null||L===void 0?void 0:L[$];if(typeof P0!="object")throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${$}"`);M=M&&(O||Z(I)),T(P0,R)}if(!M)throw Error(`discriminator: "${$}" must be required`);return V;function Z({required:R}){return Array.isArray(R)&&R.includes($)}function T(R,I){if(R.const)E(R.const,I);else if(R.enum)for(let P0 of R.enum)E(P0,I);else throw Error(`discriminator: "properties/${$}" must have "const" or "enum"`)}function E(R,I){if(typeof R!="string"||R in V)throw Error(`discriminator: "${$}" values must be unique strings`);V[R]=I}}}};nH.default=IO});var tH=q((nE,bO)=>{bO.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var HX=q((U0,JX)=>{Object.defineProperty(U0,"__esModule",{value:!0});U0.MissingRefError=U0.ValidationError=U0.CodeGen=U0.Name=U0.nil=U0.stringify=U0.str=U0._=U0.KeywordCxt=U0.Ajv=void 0;var TO=Q5(),jO=mH(),RO=oH(),aH=tH(),SO=["/properties"],oQ="http://json-schema.org/draft-07/schema";class T9 extends TO.default{_addVocabularies(){if(super._addVocabularies(),jO.default.forEach((Q)=>this.addVocabulary(Q)),this.opts.discriminator)this.addKeyword(RO.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let Q=this.opts.$data?this.$dataMetaSchema(aH,SO):aH;this.addMetaSchema(Q,oQ,!1),this.refs["http://json-schema.org/schema"]=oQ}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(oQ)?oQ:void 0)}}U0.Ajv=T9;JX.exports=U0=T9;JX.exports.Ajv=T9;Object.defineProperty(U0,"__esModule",{value:!0});U0.default=T9;var CO=D9();Object.defineProperty(U0,"KeywordCxt",{enumerable:!0,get:function(){return CO.KeywordCxt}});var C1=k();Object.defineProperty(U0,"_",{enumerable:!0,get:function(){return C1._}});Object.defineProperty(U0,"str",{enumerable:!0,get:function(){return C1.str}});Object.defineProperty(U0,"stringify",{enumerable:!0,get:function(){return C1.stringify}});Object.defineProperty(U0,"nil",{enumerable:!0,get:function(){return C1.nil}});Object.defineProperty(U0,"Name",{enumerable:!0,get:function(){return C1.Name}});Object.defineProperty(U0,"CodeGen",{enumerable:!0,get:function(){return C1.CodeGen}});var kO=TQ();Object.defineProperty(U0,"ValidationError",{enumerable:!0,get:function(){return kO.default}});var vO=U9();Object.defineProperty(U0,"MissingRefError",{enumerable:!0,get:function(){return vO.default}})});var $3=q((J3)=>{Object.defineProperty(J3,"__esModule",{value:!0});J3.formatNames=J3.fastFormats=J3.fullFormats=void 0;function x0(Q,X){return{validate:Q,compare:X}}J3.fullFormats={date:x0(X3,zX),time:x0(BX(!0),AX),"date-time":x0(sH(!0),W3),"iso-time":x0(BX(),Y3),"iso-date-time":x0(sH(),G3),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:lO,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:nO,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:mO,int32:{type:"number",validate:dO},int64:{type:"number",validate:iO},float:{type:"number",validate:Q3},double:{type:"number",validate:Q3},password:!0,binary:!0};J3.fastFormats={...J3.fullFormats,date:x0(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,zX),time:x0(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,AX),"date-time":x0(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,W3),"iso-time":x0(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Y3),"iso-date-time":x0(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,G3),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};J3.formatNames=Object.keys(J3.fullFormats);function gO(Q){return Q%4===0&&(Q%100!==0||Q%400===0)}var yO=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,hO=[0,31,28,31,30,31,30,31,31,30,31,30,31];function X3(Q){let X=yO.exec(Q);if(!X)return!1;let Y=+X[1],W=+X[2],G=+X[3];return W>=1&&W<=12&&G>=1&&G<=(W===2&&gO(Y)?29:hO[W])}function zX(Q,X){if(!(Q&&X))return;if(Q>X)return 1;if(Q<X)return-1;return 0}var $X=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function BX(Q){return function(Y){let W=$X.exec(Y);if(!W)return!1;let G=+W[1],J=+W[2],H=+W[3],$=W[4],B=W[5]==="-"?-1:1,K=+(W[6]||0),z=+(W[7]||0);if(K>23||z>59||Q&&!$)return!1;if(G<=23&&J<=59&&H<60)return!0;let A=J-z*B,F=G-K*B-(A<0?1:0);return(F===23||F===-1)&&(A===59||A===-1)&&H<61}}function AX(Q,X){if(!(Q&&X))return;let Y=new Date("2020-01-01T"+Q).valueOf(),W=new Date("2020-01-01T"+X).valueOf();if(!(Y&&W))return;return Y-W}function Y3(Q,X){if(!(Q&&X))return;let Y=$X.exec(Q),W=$X.exec(X);if(!(Y&&W))return;if(Q=Y[1]+Y[2]+Y[3],X=W[1]+W[2]+W[3],Q>X)return 1;if(Q<X)return-1;return 0}var KX=/t|\s/i;function sH(Q){let X=BX(Q);return function(W){let G=W.split(KX);return G.length===2&&X3(G[0])&&X(G[1])}}function W3(Q,X){if(!(Q&&X))return;let Y=new Date(Q).valueOf(),W=new Date(X).valueOf();if(!(Y&&W))return;return Y-W}function G3(Q,X){if(!(Q&&X))return;let[Y,W]=Q.split(KX),[G,J]=X.split(KX),H=zX(Y,G);if(H===void 0)return;return H||AX(W,J)}var uO=/\/|:/,fO=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function lO(Q){return uO.test(Q)&&fO.test(Q)}var eH=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function mO(Q){return eH.lastIndex=0,eH.test(Q)}var cO=-2147483648,pO=2147483647;function dO(Q){return Number.isInteger(Q)&&Q<=pO&&Q>=cO}function iO(Q){return Number.isInteger(Q)}function Q3(){return!0}var rO=/[^\\]\\Z/;function nO(Q){if(rO.test(Q))return!1;try{return new RegExp(Q),!0}catch(X){return!1}}});var K3=q((B3)=>{Object.defineProperty(B3,"__esModule",{value:!0});B3.formatLimitDefinition=void 0;var tO=HX(),k0=k(),J1=k0.operators,tQ={formatMaximum:{okStr:"<=",ok:J1.LTE,fail:J1.GT},formatMinimum:{okStr:">=",ok:J1.GTE,fail:J1.LT},formatExclusiveMaximum:{okStr:"<",ok:J1.LT,fail:J1.GTE},formatExclusiveMinimum:{okStr:">",ok:J1.GT,fail:J1.LTE}},aO={message:({keyword:Q,schemaCode:X})=>k0.str`should be ${tQ[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>k0._`{comparison: ${tQ[Q].okStr}, limit: ${X}}`};B3.formatLimitDefinition={keyword:Object.keys(tQ),type:"string",schemaType:"string",$data:!0,error:aO,code(Q){let{gen:X,data:Y,schemaCode:W,keyword:G,it:J}=Q,{opts:H,self:$}=J;if(!H.validateFormats)return;let B=new tO.KeywordCxt(J,$.RULES.all.format.definition,"format");if(B.$data)K();else z();function K(){let F=X.scopeValue("formats",{ref:$.formats,code:H.code.formats}),L=X.const("fmt",k0._`${F}[${B.schemaCode}]`);Q.fail$data((0,k0.or)(k0._`typeof ${L} != "object"`,k0._`${L} instanceof RegExp`,k0._`typeof ${L}.compare != "function"`,A(L)))}function z(){let F=B.schema,L=$.formats[F];if(!L||L===!0)return;if(typeof L!="object"||L instanceof RegExp||typeof L.compare!="function")throw Error(`"${G}": format "${F}" does not define "compare" function`);let V=X.scopeValue("formats",{key:F,ref:L,code:H.code.formats?k0._`${H.code.formats}${(0,k0.getProperty)(F)}`:void 0});Q.fail$data(A(V))}function A(F){return k0._`${F}.compare(${Y}, ${W}) ${tQ[G].fail} 0`}},dependencies:["format"]};var sO=(Q)=>{return Q.addKeyword(B3.formatLimitDefinition),Q};B3.default=sO});var F3=q((j9,L3)=>{Object.defineProperty(j9,"__esModule",{value:!0});var k1=$3(),QZ=K3(),DX=k(),z3=new DX.Name("fullFormats"),XZ=new DX.Name("fastFormats"),UX=(Q,X={keywords:!0})=>{if(Array.isArray(X))return A3(Q,X,k1.fullFormats,z3),Q;let[Y,W]=X.mode==="fast"?[k1.fastFormats,XZ]:[k1.fullFormats,z3],G=X.formats||k1.formatNames;if(A3(Q,G,Y,W),X.keywords)(0,QZ.default)(Q);return Q};UX.get=(Q,X="full")=>{let W=(X==="fast"?k1.fastFormats:k1.fullFormats)[Q];if(!W)throw Error(`Unknown format "${Q}"`);return W};function A3(Q,X,Y,W){var G,J;(G=(J=Q.opts.code).formats)!==null&&G!==void 0||(J.formats=DX._`require("ajv-formats/dist/formats").${W}`);for(let H of X)Q.addFormat(H,Y[H])}L3.exports=j9=UX;Object.defineProperty(j9,"__esModule",{value:!0});j9.default=UX});var BZ=Object.freeze({status:"aborted"});function U(Q,X,Y){function W($,B){if(!$._zod)Object.defineProperty($,"_zod",{value:{def:B,constr:H,traits:new Set},enumerable:!1});if($._zod.traits.has(Q))return;$._zod.traits.add(Q),X($,B);let K=H.prototype,z=Object.keys(K);for(let A=0;A<z.length;A++){let F=z[A];if(!(F in $))$[F]=K[F].bind($)}}let G=Y?.Parent??Object;class J extends G{}Object.defineProperty(J,"name",{value:Q});function H($){var B;let K=Y?.Parent?new J:this;W(K,$),(B=K._zod).deferred??(B.deferred=[]);for(let z of K._zod.deferred)z();return K}return Object.defineProperty(H,"init",{value:W}),Object.defineProperty(H,Symbol.hasInstance,{value:($)=>{if(Y?.Parent&&$ instanceof Y.Parent)return!0;return $?._zod?.traits?.has(Q)}}),Object.defineProperty(H,"name",{value:Q}),H}var KZ=Symbol("zod_brand");class g0 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class _1 extends Error{constructor(Q){super(`Encountered unidirectional transform during encode: ${Q}`);this.name="ZodEncodeError"}}var S9={};function Z0(Q){if(Q)Object.assign(S9,Q);return S9}var y={};bX(y,{unwrapMessage:()=>x1,uint8ArrayToHex:()=>a3,uint8ArrayToBase64url:()=>o3,uint8ArrayToBase64:()=>vX,stringifyPrimitive:()=>_9,slugify:()=>G6,shallowClone:()=>jX,safeExtend:()=>c3,required:()=>i3,randomString:()=>g3,propertyKeyTypes:()=>H6,promiseAllObject:()=>x3,primitiveTypes:()=>RX,prefixIssues:()=>u0,pick:()=>f3,partial:()=>d3,parsedType:()=>K6,optionalKeys:()=>$6,omit:()=>l3,objectClone:()=>k3,numKeys:()=>y3,nullish:()=>y1,normalizeParams:()=>b,mergeDefs:()=>y0,merge:()=>p3,jsonStringifyReplacer:()=>D1,joinValues:()=>C9,issue:()=>V1,isPlainObject:()=>r0,isObject:()=>H1,hexToUint8Array:()=>t3,getSizableOrigin:()=>CX,getParsedType:()=>h3,getLengthableOrigin:()=>u1,getEnumValues:()=>g1,getElementAtPath:()=>_3,floatSafeRemainder:()=>W6,finalizeIssue:()=>b0,extend:()=>m3,escapeRegex:()=>h0,esc:()=>k9,defineLazy:()=>u,createTransparentProxy:()=>u3,cloneDef:()=>v3,clone:()=>E0,cleanRegex:()=>h1,cleanEnum:()=>r3,captureStackTrace:()=>v9,cached:()=>U1,base64urlToUint8Array:()=>n3,base64ToUint8Array:()=>kX,assignProp:()=>i0,assertNotEqual:()=>j3,assertNever:()=>S3,assertIs:()=>R3,assertEqual:()=>T3,assert:()=>C3,allowsEval:()=>J6,aborted:()=>n0,NUMBER_FORMAT_RANGES:()=>B6,Class:()=>_X,BIGINT_FORMAT_RANGES:()=>SX});function T3(Q){return Q}function j3(Q){return Q}function R3(Q){}function S3(Q){throw Error("Unexpected value in exhaustive check")}function C3(Q){}function g1(Q){let X=Object.values(Q).filter((W)=>typeof W==="number");return Object.entries(Q).filter(([W,G])=>X.indexOf(+W)===-1).map(([W,G])=>G)}function C9(Q,X="|"){return Q.map((Y)=>_9(Y)).join(X)}function D1(Q,X){if(typeof X==="bigint")return X.toString();return X}function U1(Q){return{get value(){{let Y=Q();return Object.defineProperty(this,"value",{value:Y}),Y}throw Error("cached value already set")}}}function y1(Q){return Q===null||Q===void 0}function h1(Q){let X=Q.startsWith("^")?1:0,Y=Q.endsWith("$")?Q.length-1:Q.length;return Q.slice(X,Y)}function W6(Q,X){let Y=(Q.toString().split(".")[1]||"").length,W=X.toString(),G=(W.split(".")[1]||"").length;if(G===0&&/\d?e-\d?/.test(W)){let B=W.match(/\d?e-(\d?)/);if(B?.[1])G=Number.parseInt(B[1])}let J=Y>G?Y:G,H=Number.parseInt(Q.toFixed(J).replace(".","")),$=Number.parseInt(X.toFixed(J).replace(".",""));return H%$/10**J}var TX=Symbol("evaluating");function u(Q,X,Y){let W=void 0;Object.defineProperty(Q,X,{get(){if(W===TX)return;if(W===void 0)W=TX,W=Y();return W},set(G){Object.defineProperty(Q,X,{value:G})},configurable:!0})}function k3(Q){return Object.create(Object.getPrototypeOf(Q),Object.getOwnPropertyDescriptors(Q))}function i0(Q,X,Y){Object.defineProperty(Q,X,{value:Y,writable:!0,enumerable:!0,configurable:!0})}function y0(...Q){let X={};for(let Y of Q){let W=Object.getOwnPropertyDescriptors(Y);Object.assign(X,W)}return Object.defineProperties({},X)}function v3(Q){return y0(Q._zod.def)}function _3(Q,X){if(!X)return Q;return X.reduce((Y,W)=>Y?.[W],Q)}function x3(Q){let X=Object.keys(Q),Y=X.map((W)=>Q[W]);return Promise.all(Y).then((W)=>{let G={};for(let J=0;J<X.length;J++)G[X[J]]=W[J];return G})}function g3(Q=10){let Y="";for(let W=0;W<Q;W++)Y+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return Y}function k9(Q){return JSON.stringify(Q)}function G6(Q){return Q.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var v9="captureStackTrace"in Error?Error.captureStackTrace:(...Q)=>{};function H1(Q){return typeof Q==="object"&&Q!==null&&!Array.isArray(Q)}var J6=U1(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(Q){return!1}});function r0(Q){if(H1(Q)===!1)return!1;let X=Q.constructor;if(X===void 0)return!0;if(typeof X!=="function")return!0;let Y=X.prototype;if(H1(Y)===!1)return!1;if(Object.prototype.hasOwnProperty.call(Y,"isPrototypeOf")===!1)return!1;return!0}function jX(Q){if(r0(Q))return{...Q};if(Array.isArray(Q))return[...Q];return Q}function y3(Q){let X=0;for(let Y in Q)if(Object.prototype.hasOwnProperty.call(Q,Y))X++;return X}var h3=(Q)=>{let X=typeof Q;switch(X){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(Q)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(Q))return"array";if(Q===null)return"null";if(Q.then&&typeof Q.then==="function"&&Q.catch&&typeof Q.catch==="function")return"promise";if(typeof Map<"u"&&Q instanceof Map)return"map";if(typeof Set<"u"&&Q instanceof Set)return"set";if(typeof Date<"u"&&Q instanceof Date)return"date";if(typeof File<"u"&&Q instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${X}`)}},H6=new Set(["string","number","symbol"]),RX=new Set(["string","number","bigint","boolean","symbol","undefined"]);function h0(Q){return Q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E0(Q,X,Y){let W=new Q._zod.constr(X??Q._zod.def);if(!X||Y?.parent)W._zod.parent=Q;return W}function b(Q){let X=Q;if(!X)return{};if(typeof X==="string")return{error:()=>X};if(X?.message!==void 0){if(X?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");X.error=X.message}if(delete X.message,typeof X.error==="string")return{...X,error:()=>X.error};return X}function u3(Q){let X;return new Proxy({},{get(Y,W,G){return X??(X=Q()),Reflect.get(X,W,G)},set(Y,W,G,J){return X??(X=Q()),Reflect.set(X,W,G,J)},has(Y,W){return X??(X=Q()),Reflect.has(X,W)},deleteProperty(Y,W){return X??(X=Q()),Reflect.deleteProperty(X,W)},ownKeys(Y){return X??(X=Q()),Reflect.ownKeys(X)},getOwnPropertyDescriptor(Y,W){return X??(X=Q()),Reflect.getOwnPropertyDescriptor(X,W)},defineProperty(Y,W,G){return X??(X=Q()),Reflect.defineProperty(X,W,G)}})}function _9(Q){if(typeof Q==="bigint")return Q.toString()+"n";if(typeof Q==="string")return`"${Q}"`;return`${Q}`}function $6(Q){return Object.keys(Q).filter((X)=>{return Q[X]._zod.optin==="optional"&&Q[X]._zod.optout==="optional"})}var B6={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},SX={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function f3(Q,X){let Y=Q._zod.def,W=Y.checks;if(W&&W.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let J=y0(Q._zod.def,{get shape(){let H={};for(let $ in X){if(!($ in Y.shape))throw Error(`Unrecognized key: "${$}"`);if(!X[$])continue;H[$]=Y.shape[$]}return i0(this,"shape",H),H},checks:[]});return E0(Q,J)}function l3(Q,X){let Y=Q._zod.def,W=Y.checks;if(W&&W.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let J=y0(Q._zod.def,{get shape(){let H={...Q._zod.def.shape};for(let $ in X){if(!($ in Y.shape))throw Error(`Unrecognized key: "${$}"`);if(!X[$])continue;delete H[$]}return i0(this,"shape",H),H},checks:[]});return E0(Q,J)}function m3(Q,X){if(!r0(X))throw Error("Invalid input to extend: expected a plain object");let Y=Q._zod.def.checks;if(Y&&Y.length>0){let J=Q._zod.def.shape;for(let H in X)if(Object.getOwnPropertyDescriptor(J,H)!==void 0)throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let G=y0(Q._zod.def,{get shape(){let J={...Q._zod.def.shape,...X};return i0(this,"shape",J),J}});return E0(Q,G)}function c3(Q,X){if(!r0(X))throw Error("Invalid input to safeExtend: expected a plain object");let Y=y0(Q._zod.def,{get shape(){let W={...Q._zod.def.shape,...X};return i0(this,"shape",W),W}});return E0(Q,Y)}function p3(Q,X){let Y=y0(Q._zod.def,{get shape(){let W={...Q._zod.def.shape,...X._zod.def.shape};return i0(this,"shape",W),W},get catchall(){return X._zod.def.catchall},checks:[]});return E0(Q,Y)}function d3(Q,X,Y){let G=X._zod.def.checks;if(G&&G.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let H=y0(X._zod.def,{get shape(){let $=X._zod.def.shape,B={...$};if(Y)for(let K in Y){if(!(K in $))throw Error(`Unrecognized key: "${K}"`);if(!Y[K])continue;B[K]=Q?new Q({type:"optional",innerType:$[K]}):$[K]}else for(let K in $)B[K]=Q?new Q({type:"optional",innerType:$[K]}):$[K];return i0(this,"shape",B),B},checks:[]});return E0(X,H)}function i3(Q,X,Y){let W=y0(X._zod.def,{get shape(){let G=X._zod.def.shape,J={...G};if(Y)for(let H in Y){if(!(H in J))throw Error(`Unrecognized key: "${H}"`);if(!Y[H])continue;J[H]=new Q({type:"nonoptional",innerType:G[H]})}else for(let H in G)J[H]=new Q({type:"nonoptional",innerType:G[H]});return i0(this,"shape",J),J}});return E0(X,W)}function n0(Q,X=0){if(Q.aborted===!0)return!0;for(let Y=X;Y<Q.issues.length;Y++)if(Q.issues[Y]?.continue!==!0)return!0;return!1}function u0(Q,X){return X.map((Y)=>{var W;return(W=Y).path??(W.path=[]),Y.path.unshift(Q),Y})}function x1(Q){return typeof Q==="string"?Q:Q?.message}function b0(Q,X,Y){let W={...Q,path:Q.path??[]};if(!Q.message){let G=x1(Q.inst?._zod.def?.error?.(Q))??x1(X?.error?.(Q))??x1(Y.customError?.(Q))??x1(Y.localeError?.(Q))??"Invalid input";W.message=G}if(delete W.inst,delete W.continue,!X?.reportInput)delete W.input;return W}function CX(Q){if(Q instanceof Set)return"set";if(Q instanceof Map)return"map";if(Q instanceof File)return"file";return"unknown"}function u1(Q){if(Array.isArray(Q))return"array";if(typeof Q==="string")return"string";return"unknown"}function K6(Q){let X=typeof Q;switch(X){case"number":return Number.isNaN(Q)?"nan":"number";case"object":{if(Q===null)return"null";if(Array.isArray(Q))return"array";let Y=Q;if(Y&&Object.getPrototypeOf(Y)!==Object.prototype&&"constructor"in Y&&Y.constructor)return Y.constructor.name}}return X}function V1(...Q){let[X,Y,W]=Q;if(typeof X==="string")return{message:X,code:"custom",input:Y,inst:W};return{...X}}function r3(Q){return Object.entries(Q).filter(([X,Y])=>{return Number.isNaN(Number.parseInt(X,10))}).map((X)=>X[1])}function kX(Q){let X=atob(Q),Y=new Uint8Array(X.length);for(let W=0;W<X.length;W++)Y[W]=X.charCodeAt(W);return Y}function vX(Q){let X="";for(let Y=0;Y<Q.length;Y++)X+=String.fromCharCode(Q[Y]);return btoa(X)}function n3(Q){let X=Q.replace(/-/g,"+").replace(/_/g,"/"),Y="=".repeat((4-X.length%4)%4);return kX(X+Y)}function o3(Q){return vX(Q).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function t3(Q){let X=Q.replace(/^0x/,"");if(X.length%2!==0)throw Error("Invalid hex string length");let Y=new Uint8Array(X.length/2);for(let W=0;W<X.length;W+=2)Y[W/2]=Number.parseInt(X.slice(W,W+2),16);return Y}function a3(Q){return Array.from(Q).map((X)=>X.toString(16).padStart(2,"0")).join("")}class _X{constructor(...Q){}}var xX=(Q,X)=>{Q.name="$ZodError",Object.defineProperty(Q,"_zod",{value:Q._zod,enumerable:!1}),Object.defineProperty(Q,"issues",{value:X,enumerable:!1}),Q.message=JSON.stringify(X,D1,2),Object.defineProperty(Q,"toString",{value:()=>Q.message,enumerable:!1})},x9=U("$ZodError",xX),z6=U("$ZodError",xX,{Parent:Error});function gX(Q,X=(Y)=>Y.message){let Y={},W=[];for(let G of Q.issues)if(G.path.length>0)Y[G.path[0]]=Y[G.path[0]]||[],Y[G.path[0]].push(X(G));else W.push(X(G));return{formErrors:W,fieldErrors:Y}}function yX(Q,X=(Y)=>Y.message){let Y={_errors:[]},W=(G)=>{for(let J of G.issues)if(J.code==="invalid_union"&&J.errors.length)J.errors.map((H)=>W({issues:H}));else if(J.code==="invalid_key")W({issues:J.issues});else if(J.code==="invalid_element")W({issues:J.issues});else if(J.path.length===0)Y._errors.push(X(J));else{let H=Y,$=0;while($<J.path.length){let B=J.path[$];if($!==J.path.length-1)H[B]=H[B]||{_errors:[]};else H[B]=H[B]||{_errors:[]},H[B]._errors.push(X(J));H=H[B],$++}}};return W(Q),Y}var g9=(Q)=>(X,Y,W,G)=>{let J=W?Object.assign(W,{async:!1}):{async:!1},H=X._zod.run({value:Y,issues:[]},J);if(H instanceof Promise)throw new g0;if(H.issues.length){let $=new(G?.Err??Q)(H.issues.map((B)=>b0(B,J,Z0())));throw v9($,G?.callee),$}return H.value};var y9=(Q)=>async(X,Y,W,G)=>{let J=W?Object.assign(W,{async:!0}):{async:!0},H=X._zod.run({value:Y,issues:[]},J);if(H instanceof Promise)H=await H;if(H.issues.length){let $=new(G?.Err??Q)(H.issues.map((B)=>b0(B,J,Z0())));throw v9($,G?.callee),$}return H.value};var f1=(Q)=>(X,Y,W)=>{let G=W?{...W,async:!1}:{async:!1},J=X._zod.run({value:Y,issues:[]},G);if(J instanceof Promise)throw new g0;return J.issues.length?{success:!1,error:new(Q??x9)(J.issues.map((H)=>b0(H,G,Z0())))}:{success:!0,data:J.value}},l1=f1(z6),m1=(Q)=>async(X,Y,W)=>{let G=W?Object.assign(W,{async:!0}):{async:!0},J=X._zod.run({value:Y,issues:[]},G);if(J instanceof Promise)J=await J;return J.issues.length?{success:!1,error:new Q(J.issues.map((H)=>b0(H,G,Z0())))}:{success:!0,data:J.value}},h9=m1(z6),hX=(Q)=>(X,Y,W)=>{let G=W?Object.assign(W,{direction:"backward"}):{direction:"backward"};return g9(Q)(X,Y,G)};var uX=(Q)=>(X,Y,W)=>{return g9(Q)(X,Y,W)};var fX=(Q)=>async(X,Y,W)=>{let G=W?Object.assign(W,{direction:"backward"}):{direction:"backward"};return y9(Q)(X,Y,G)};var lX=(Q)=>async(X,Y,W)=>{return y9(Q)(X,Y,W)};var mX=(Q)=>(X,Y,W)=>{let G=W?Object.assign(W,{direction:"backward"}):{direction:"backward"};return f1(Q)(X,Y,G)};var cX=(Q)=>(X,Y,W)=>{return f1(Q)(X,Y,W)};var pX=(Q)=>async(X,Y,W)=>{let G=W?Object.assign(W,{direction:"backward"}):{direction:"backward"};return m1(Q)(X,Y,G)};var dX=(Q)=>async(X,Y,W)=>{return m1(Q)(X,Y,W)};var iX=/^[cC][^\s-]{8,}$/,rX=/^[0-9a-z]+$/,nX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,oX=/^[0-9a-vA-V]{20}$/,tX=/^[A-Za-z0-9]{27}$/,aX=/^[a-zA-Z0-9_-]{21}$/,sX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var eX=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,A6=(Q)=>{if(!Q)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${Q}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var Q4=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var e3="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function X4(){return new RegExp(e3,"u")}var Y4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,W4=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;var G4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,J4=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,H4=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,L6=/^[A-Za-z0-9_-]*$/;var $4=/^\+[1-9]\d{6,14}$/,B4="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",K4=new RegExp(`^${B4}$`);function z4(Q){return typeof Q.precision==="number"?Q.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":Q.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${Q.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function A4(Q){return new RegExp(`^${z4(Q)}$`)}function L4(Q){let X=z4({precision:Q.precision}),Y=["Z"];if(Q.local)Y.push("");if(Q.offset)Y.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let W=`${X}(?:${Y.join("|")})`;return new RegExp(`^${B4}T(?:${W})$`)}var F4=(Q)=>{let X=Q?`[\\s\\S]{${Q?.minimum??0},${Q?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${X}$`)};var D4=/^-?\d+$/,u9=/^-?\d+(?:\.\d+)?$/,U4=/^(?:true|false)$/i,V4=/^null$/i;var O4=/^[^A-Z]*$/,Z4=/^[^a-z]*$/;var Q0=U("$ZodCheck",(Q,X)=>{var Y;Q._zod??(Q._zod={}),Q._zod.def=X,(Y=Q._zod).onattach??(Y.onattach=[])}),M4={number:"number",bigint:"bigint",object:"date"},F6=U("$ZodCheckLessThan",(Q,X)=>{Q0.init(Q,X);let Y=M4[typeof X.value];Q._zod.onattach.push((W)=>{let G=W._zod.bag,J=(X.inclusive?G.maximum:G.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(X.value<J)if(X.inclusive)G.maximum=X.value;else G.exclusiveMaximum=X.value}),Q._zod.check=(W)=>{if(X.inclusive?W.value<=X.value:W.value<X.value)return;W.issues.push({origin:Y,code:"too_big",maximum:typeof X.value==="object"?X.value.getTime():X.value,input:W.value,inclusive:X.inclusive,inst:Q,continue:!X.abort})}}),D6=U("$ZodCheckGreaterThan",(Q,X)=>{Q0.init(Q,X);let Y=M4[typeof X.value];Q._zod.onattach.push((W)=>{let G=W._zod.bag,J=(X.inclusive?G.minimum:G.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(X.value>J)if(X.inclusive)G.minimum=X.value;else G.exclusiveMinimum=X.value}),Q._zod.check=(W)=>{if(X.inclusive?W.value>=X.value:W.value>X.value)return;W.issues.push({origin:Y,code:"too_small",minimum:typeof X.value==="object"?X.value.getTime():X.value,input:W.value,inclusive:X.inclusive,inst:Q,continue:!X.abort})}}),q4=U("$ZodCheckMultipleOf",(Q,X)=>{Q0.init(Q,X),Q._zod.onattach.push((Y)=>{var W;(W=Y._zod.bag).multipleOf??(W.multipleOf=X.value)}),Q._zod.check=(Y)=>{if(typeof Y.value!==typeof X.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof Y.value==="bigint"?Y.value%X.value===BigInt(0):W6(Y.value,X.value)===0)return;Y.issues.push({origin:typeof Y.value,code:"not_multiple_of",divisor:X.value,input:Y.value,inst:Q,continue:!X.abort})}}),N4=U("$ZodCheckNumberFormat",(Q,X)=>{Q0.init(Q,X),X.format=X.format||"float64";let Y=X.format?.includes("int"),W=Y?"int":"number",[G,J]=B6[X.format];Q._zod.onattach.push((H)=>{let $=H._zod.bag;if($.format=X.format,$.minimum=G,$.maximum=J,Y)$.pattern=D4}),Q._zod.check=(H)=>{let $=H.value;if(Y){if(!Number.isInteger($)){H.issues.push({expected:W,format:X.format,code:"invalid_type",continue:!1,input:$,inst:Q});return}if(!Number.isSafeInteger($)){if($>0)H.issues.push({input:$,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:Q,origin:W,inclusive:!0,continue:!X.abort});else H.issues.push({input:$,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:Q,origin:W,inclusive:!0,continue:!X.abort});return}}if($<G)H.issues.push({origin:"number",input:$,code:"too_small",minimum:G,inclusive:!0,inst:Q,continue:!X.abort});if($>J)H.issues.push({origin:"number",input:$,code:"too_big",maximum:J,inclusive:!0,inst:Q,continue:!X.abort})}});var w4=U("$ZodCheckMaxLength",(Q,X)=>{var Y;Q0.init(Q,X),(Y=Q._zod.def).when??(Y.when=(W)=>{let G=W.value;return!y1(G)&&G.length!==void 0}),Q._zod.onattach.push((W)=>{let G=W._zod.bag.maximum??Number.POSITIVE_INFINITY;if(X.maximum<G)W._zod.bag.maximum=X.maximum}),Q._zod.check=(W)=>{let G=W.value;if(G.length<=X.maximum)return;let H=u1(G);W.issues.push({origin:H,code:"too_big",maximum:X.maximum,inclusive:!0,input:G,inst:Q,continue:!X.abort})}}),P4=U("$ZodCheckMinLength",(Q,X)=>{var Y;Q0.init(Q,X),(Y=Q._zod.def).when??(Y.when=(W)=>{let G=W.value;return!y1(G)&&G.length!==void 0}),Q._zod.onattach.push((W)=>{let G=W._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(X.minimum>G)W._zod.bag.minimum=X.minimum}),Q._zod.check=(W)=>{let G=W.value;if(G.length>=X.minimum)return;let H=u1(G);W.issues.push({origin:H,code:"too_small",minimum:X.minimum,inclusive:!0,input:G,inst:Q,continue:!X.abort})}}),I4=U("$ZodCheckLengthEquals",(Q,X)=>{var Y;Q0.init(Q,X),(Y=Q._zod.def).when??(Y.when=(W)=>{let G=W.value;return!y1(G)&&G.length!==void 0}),Q._zod.onattach.push((W)=>{let G=W._zod.bag;G.minimum=X.length,G.maximum=X.length,G.length=X.length}),Q._zod.check=(W)=>{let G=W.value,J=G.length;if(J===X.length)return;let H=u1(G),$=J>X.length;W.issues.push({origin:H,...$?{code:"too_big",maximum:X.length}:{code:"too_small",minimum:X.length},inclusive:!0,exact:!0,input:W.value,inst:Q,continue:!X.abort})}}),c1=U("$ZodCheckStringFormat",(Q,X)=>{var Y,W;if(Q0.init(Q,X),Q._zod.onattach.push((G)=>{let J=G._zod.bag;if(J.format=X.format,X.pattern)J.patterns??(J.patterns=new Set),J.patterns.add(X.pattern)}),X.pattern)(Y=Q._zod).check??(Y.check=(G)=>{if(X.pattern.lastIndex=0,X.pattern.test(G.value))return;G.issues.push({origin:"string",code:"invalid_format",format:X.format,input:G.value,...X.pattern?{pattern:X.pattern.toString()}:{},inst:Q,continue:!X.abort})});else(W=Q._zod).check??(W.check=()=>{})}),E4=U("$ZodCheckRegex",(Q,X)=>{c1.init(Q,X),Q._zod.check=(Y)=>{if(X.pattern.lastIndex=0,X.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:"regex",input:Y.value,pattern:X.pattern.toString(),inst:Q,continue:!X.abort})}}),b4=U("$ZodCheckLowerCase",(Q,X)=>{X.pattern??(X.pattern=O4),c1.init(Q,X)}),T4=U("$ZodCheckUpperCase",(Q,X)=>{X.pattern??(X.pattern=Z4),c1.init(Q,X)}),j4=U("$ZodCheckIncludes",(Q,X)=>{Q0.init(Q,X);let Y=h0(X.includes),W=new RegExp(typeof X.position==="number"?`^.{${X.position}}${Y}`:Y);X.pattern=W,Q._zod.onattach.push((G)=>{let J=G._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add(W)}),Q._zod.check=(G)=>{if(G.value.includes(X.includes,X.position))return;G.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:X.includes,input:G.value,inst:Q,continue:!X.abort})}}),R4=U("$ZodCheckStartsWith",(Q,X)=>{Q0.init(Q,X);let Y=new RegExp(`^${h0(X.prefix)}.*`);X.pattern??(X.pattern=Y),Q._zod.onattach.push((W)=>{let G=W._zod.bag;G.patterns??(G.patterns=new Set),G.patterns.add(Y)}),Q._zod.check=(W)=>{if(W.value.startsWith(X.prefix))return;W.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:X.prefix,input:W.value,inst:Q,continue:!X.abort})}}),S4=U("$ZodCheckEndsWith",(Q,X)=>{Q0.init(Q,X);let Y=new RegExp(`.*${h0(X.suffix)}$`);X.pattern??(X.pattern=Y),Q._zod.onattach.push((W)=>{let G=W._zod.bag;G.patterns??(G.patterns=new Set),G.patterns.add(Y)}),Q._zod.check=(W)=>{if(W.value.endsWith(X.suffix))return;W.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:X.suffix,input:W.value,inst:Q,continue:!X.abort})}});var C4=U("$ZodCheckOverwrite",(Q,X)=>{Q0.init(Q,X),Q._zod.check=(Y)=>{Y.value=X.tx(Y.value)}});class U6{constructor(Q=[]){if(this.content=[],this.indent=0,this)this.args=Q}indented(Q){this.indent+=1,Q(this),this.indent-=1}write(Q){if(typeof Q==="function"){Q(this,{execution:"sync"}),Q(this,{execution:"async"});return}let Y=Q.split(`
`).filter((J)=>J),W=Math.min(...Y.map((J)=>J.length-J.trimStart().length)),G=Y.map((J)=>J.slice(W)).map((J)=>" ".repeat(this.indent*2)+J);for(let J of G)this.content.push(J)}compile(){let Q=Function,X=this?.args,W=[...(this?.content??[""]).map((G)=>`  ${G}`)];return new Q(...X,W.join(`
`))}}var v4={major:4,minor:3,patch:5};var c=U("$ZodType",(Q,X)=>{var Y;Q??(Q={}),Q._zod.def=X,Q._zod.bag=Q._zod.bag||{},Q._zod.version=v4;let W=[...Q._zod.def.checks??[]];if(Q._zod.traits.has("$ZodCheck"))W.unshift(Q);for(let G of W)for(let J of G._zod.onattach)J(Q);if(W.length===0)(Y=Q._zod).deferred??(Y.deferred=[]),Q._zod.deferred?.push(()=>{Q._zod.run=Q._zod.parse});else{let G=(H,$,B)=>{let K=n0(H),z;for(let A of $){if(A._zod.def.when){if(!A._zod.def.when(H))continue}else if(K)continue;let F=H.issues.length,L=A._zod.check(H);if(L instanceof Promise&&B?.async===!1)throw new g0;if(z||L instanceof Promise)z=(z??Promise.resolve()).then(async()=>{if(await L,H.issues.length===F)return;if(!K)K=n0(H,F)});else{if(H.issues.length===F)continue;if(!K)K=n0(H,F)}}if(z)return z.then(()=>{return H});return H},J=(H,$,B)=>{if(n0(H))return H.aborted=!0,H;let K=G($,W,B);if(K instanceof Promise){if(B.async===!1)throw new g0;return K.then((z)=>Q._zod.parse(z,B))}return Q._zod.parse(K,B)};Q._zod.run=(H,$)=>{if($.skipChecks)return Q._zod.parse(H,$);if($.direction==="backward"){let K=Q._zod.parse({value:H.value,issues:[]},{...$,skipChecks:!0});if(K instanceof Promise)return K.then((z)=>{return J(z,H,$)});return J(K,H,$)}let B=Q._zod.parse(H,$);if(B instanceof Promise){if($.async===!1)throw new g0;return B.then((K)=>G(K,W,$))}return G(B,W,$)}}u(Q,"~standard",()=>({validate:(G)=>{try{let J=l1(Q,G);return J.success?{value:J.data}:{issues:J.error?.issues}}catch(J){return h9(Q,G).then((H)=>H.success?{value:H.data}:{issues:H.error?.issues})}},vendor:"zod",version:1}))}),c9=U("$ZodString",(Q,X)=>{c.init(Q,X),Q._zod.pattern=[...Q?._zod.bag?.patterns??[]].pop()??F4(Q._zod.bag),Q._zod.parse=(Y,W)=>{if(X.coerce)try{Y.value=String(Y.value)}catch(G){}if(typeof Y.value==="string")return Y;return Y.issues.push({expected:"string",code:"invalid_type",input:Y.value,inst:Q}),Y}}),p=U("$ZodStringFormat",(Q,X)=>{c1.init(Q,X),c9.init(Q,X)}),m4=U("$ZodGUID",(Q,X)=>{X.pattern??(X.pattern=eX),p.init(Q,X)}),c4=U("$ZodUUID",(Q,X)=>{if(X.version){let W={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[X.version];if(W===void 0)throw Error(`Invalid UUID version: "${X.version}"`);X.pattern??(X.pattern=A6(W))}else X.pattern??(X.pattern=A6());p.init(Q,X)}),p4=U("$ZodEmail",(Q,X)=>{X.pattern??(X.pattern=Q4),p.init(Q,X)}),d4=U("$ZodURL",(Q,X)=>{p.init(Q,X),Q._zod.check=(Y)=>{try{let W=Y.value.trim(),G=new URL(W);if(X.hostname){if(X.hostname.lastIndex=0,!X.hostname.test(G.hostname))Y.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:X.hostname.source,input:Y.value,inst:Q,continue:!X.abort})}if(X.protocol){if(X.protocol.lastIndex=0,!X.protocol.test(G.protocol.endsWith(":")?G.protocol.slice(0,-1):G.protocol))Y.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:X.protocol.source,input:Y.value,inst:Q,continue:!X.abort})}if(X.normalize)Y.value=G.href;else Y.value=W;return}catch(W){Y.issues.push({code:"invalid_format",format:"url",input:Y.value,inst:Q,continue:!X.abort})}}}),i4=U("$ZodEmoji",(Q,X)=>{X.pattern??(X.pattern=X4()),p.init(Q,X)}),r4=U("$ZodNanoID",(Q,X)=>{X.pattern??(X.pattern=aX),p.init(Q,X)}),n4=U("$ZodCUID",(Q,X)=>{X.pattern??(X.pattern=iX),p.init(Q,X)}),o4=U("$ZodCUID2",(Q,X)=>{X.pattern??(X.pattern=rX),p.init(Q,X)}),t4=U("$ZodULID",(Q,X)=>{X.pattern??(X.pattern=nX),p.init(Q,X)}),a4=U("$ZodXID",(Q,X)=>{X.pattern??(X.pattern=oX),p.init(Q,X)}),s4=U("$ZodKSUID",(Q,X)=>{X.pattern??(X.pattern=tX),p.init(Q,X)}),e4=U("$ZodISODateTime",(Q,X)=>{X.pattern??(X.pattern=L4(X)),p.init(Q,X)}),QY=U("$ZodISODate",(Q,X)=>{X.pattern??(X.pattern=K4),p.init(Q,X)}),XY=U("$ZodISOTime",(Q,X)=>{X.pattern??(X.pattern=A4(X)),p.init(Q,X)}),YY=U("$ZodISODuration",(Q,X)=>{X.pattern??(X.pattern=sX),p.init(Q,X)}),WY=U("$ZodIPv4",(Q,X)=>{X.pattern??(X.pattern=Y4),p.init(Q,X),Q._zod.bag.format="ipv4"}),GY=U("$ZodIPv6",(Q,X)=>{X.pattern??(X.pattern=W4),p.init(Q,X),Q._zod.bag.format="ipv6",Q._zod.check=(Y)=>{try{new URL(`http://[${Y.value}]`)}catch{Y.issues.push({code:"invalid_format",format:"ipv6",input:Y.value,inst:Q,continue:!X.abort})}}});var JY=U("$ZodCIDRv4",(Q,X)=>{X.pattern??(X.pattern=G4),p.init(Q,X)}),HY=U("$ZodCIDRv6",(Q,X)=>{X.pattern??(X.pattern=J4),p.init(Q,X),Q._zod.check=(Y)=>{let W=Y.value.split("/");try{if(W.length!==2)throw Error();let[G,J]=W;if(!J)throw Error();let H=Number(J);if(`${H}`!==J)throw Error();if(H<0||H>128)throw Error();new URL(`http://[${G}]`)}catch{Y.issues.push({code:"invalid_format",format:"cidrv6",input:Y.value,inst:Q,continue:!X.abort})}}});function $Y(Q){if(Q==="")return!0;if(Q.length%4!==0)return!1;try{return atob(Q),!0}catch{return!1}}var BY=U("$ZodBase64",(Q,X)=>{X.pattern??(X.pattern=H4),p.init(Q,X),Q._zod.bag.contentEncoding="base64",Q._zod.check=(Y)=>{if($Y(Y.value))return;Y.issues.push({code:"invalid_format",format:"base64",input:Y.value,inst:Q,continue:!X.abort})}});function Y$(Q){if(!L6.test(Q))return!1;let X=Q.replace(/[-_]/g,(W)=>W==="-"?"+":"/"),Y=X.padEnd(Math.ceil(X.length/4)*4,"=");return $Y(Y)}var KY=U("$ZodBase64URL",(Q,X)=>{X.pattern??(X.pattern=L6),p.init(Q,X),Q._zod.bag.contentEncoding="base64url",Q._zod.check=(Y)=>{if(Y$(Y.value))return;Y.issues.push({code:"invalid_format",format:"base64url",input:Y.value,inst:Q,continue:!X.abort})}}),zY=U("$ZodE164",(Q,X)=>{X.pattern??(X.pattern=$4),p.init(Q,X)});function W$(Q,X=null){try{let Y=Q.split(".");if(Y.length!==3)return!1;let[W]=Y;if(!W)return!1;let G=JSON.parse(atob(W));if("typ"in G&&G?.typ!=="JWT")return!1;if(!G.alg)return!1;if(X&&(!("alg"in G)||G.alg!==X))return!1;return!0}catch{return!1}}var AY=U("$ZodJWT",(Q,X)=>{p.init(Q,X),Q._zod.check=(Y)=>{if(W$(Y.value,X.alg))return;Y.issues.push({code:"invalid_format",format:"jwt",input:Y.value,inst:Q,continue:!X.abort})}});var O6=U("$ZodNumber",(Q,X)=>{c.init(Q,X),Q._zod.pattern=Q._zod.bag.pattern??u9,Q._zod.parse=(Y,W)=>{if(X.coerce)try{Y.value=Number(Y.value)}catch(H){}let G=Y.value;if(typeof G==="number"&&!Number.isNaN(G)&&Number.isFinite(G))return Y;let J=typeof G==="number"?Number.isNaN(G)?"NaN":!Number.isFinite(G)?"Infinity":void 0:void 0;return Y.issues.push({expected:"number",code:"invalid_type",input:G,inst:Q,...J?{received:J}:{}}),Y}}),LY=U("$ZodNumberFormat",(Q,X)=>{N4.init(Q,X),O6.init(Q,X)}),FY=U("$ZodBoolean",(Q,X)=>{c.init(Q,X),Q._zod.pattern=U4,Q._zod.parse=(Y,W)=>{if(X.coerce)try{Y.value=Boolean(Y.value)}catch(J){}let G=Y.value;if(typeof G==="boolean")return Y;return Y.issues.push({expected:"boolean",code:"invalid_type",input:G,inst:Q}),Y}});var DY=U("$ZodNull",(Q,X)=>{c.init(Q,X),Q._zod.pattern=V4,Q._zod.values=new Set([null]),Q._zod.parse=(Y,W)=>{let G=Y.value;if(G===null)return Y;return Y.issues.push({expected:"null",code:"invalid_type",input:G,inst:Q}),Y}});var UY=U("$ZodUnknown",(Q,X)=>{c.init(Q,X),Q._zod.parse=(Y)=>Y}),VY=U("$ZodNever",(Q,X)=>{c.init(Q,X),Q._zod.parse=(Y,W)=>{return Y.issues.push({expected:"never",code:"invalid_type",input:Y.value,inst:Q}),Y}});function _4(Q,X,Y){if(Q.issues.length)X.issues.push(...u0(Y,Q.issues));X.value[Y]=Q.value}var OY=U("$ZodArray",(Q,X)=>{c.init(Q,X),Q._zod.parse=(Y,W)=>{let G=Y.value;if(!Array.isArray(G))return Y.issues.push({expected:"array",code:"invalid_type",input:G,inst:Q}),Y;Y.value=Array(G.length);let J=[];for(let H=0;H<G.length;H++){let $=G[H],B=X.element._zod.run({value:$,issues:[]},W);if(B instanceof Promise)J.push(B.then((K)=>_4(K,Y,H)));else _4(B,Y,H)}if(J.length)return Promise.all(J).then(()=>Y);return Y}});function m9(Q,X,Y,W,G){if(Q.issues.length){if(G&&!(Y in W))return;X.issues.push(...u0(Y,Q.issues))}if(Q.value===void 0){if(Y in W)X.value[Y]=void 0}else X.value[Y]=Q.value}function ZY(Q){let X=Object.keys(Q.shape);for(let W of X)if(!Q.shape?.[W]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${W}": expected a Zod schema`);let Y=$6(Q.shape);return{...Q,keys:X,keySet:new Set(X),numKeys:X.length,optionalKeys:new Set(Y)}}function MY(Q,X,Y,W,G,J){let H=[],$=G.keySet,B=G.catchall._zod,K=B.def.type,z=B.optout==="optional";for(let A in X){if($.has(A))continue;if(K==="never"){H.push(A);continue}let F=B.run({value:X[A],issues:[]},W);if(F instanceof Promise)Q.push(F.then((L)=>m9(L,Y,A,X,z)));else m9(F,Y,A,X,z)}if(H.length)Y.issues.push({code:"unrecognized_keys",keys:H,input:X,inst:J});if(!Q.length)return Y;return Promise.all(Q).then(()=>{return Y})}var G$=U("$ZodObject",(Q,X)=>{if(c.init(Q,X),!Object.getOwnPropertyDescriptor(X,"shape")?.get){let $=X.shape;Object.defineProperty(X,"shape",{get:()=>{let B={...$};return Object.defineProperty(X,"shape",{value:B}),B}})}let W=U1(()=>ZY(X));u(Q._zod,"propValues",()=>{let $=X.shape,B={};for(let K in $){let z=$[K]._zod;if(z.values){B[K]??(B[K]=new Set);for(let A of z.values)B[K].add(A)}}return B});let G=H1,J=X.catchall,H;Q._zod.parse=($,B)=>{H??(H=W.value);let K=$.value;if(!G(K))return $.issues.push({expected:"object",code:"invalid_type",input:K,inst:Q}),$;$.value={};let z=[],A=H.shape;for(let F of H.keys){let L=A[F],V=L._zod.optout==="optional",O=L._zod.run({value:K[F],issues:[]},B);if(O instanceof Promise)z.push(O.then((M)=>m9(M,$,F,K,V)));else m9(O,$,F,K,V)}if(!J)return z.length?Promise.all(z).then(()=>$):$;return MY(z,K,$,B,W.value,Q)}}),qY=U("$ZodObjectJIT",(Q,X)=>{G$.init(Q,X);let Y=Q._zod.parse,W=U1(()=>ZY(X)),G=(F)=>{let L=new U6(["shape","payload","ctx"]),V=W.value,O=(E)=>{let R=k9(E);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};L.write("const input = payload.value;");let M=Object.create(null),Z=0;for(let E of V.keys)M[E]=`key_${Z++}`;L.write("const newResult = {};");for(let E of V.keys){let R=M[E],I=k9(E),I0=F[E]?._zod?.optout==="optional";if(L.write(`const ${R} = ${O(E)};`),I0)L.write(`
        if (${R}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${R}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${R}.value;
        }
        
      `);else L.write(`
        if (${R}.issues.length) {
          payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${R}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${R}.value;
        }
        
      `)}L.write("payload.value = newResult;"),L.write("return payload;");let T=L.compile();return(E,R)=>T(F,E,R)},J,H=H1,$=!S9.jitless,K=$&&J6.value,z=X.catchall,A;Q._zod.parse=(F,L)=>{A??(A=W.value);let V=F.value;if(!H(V))return F.issues.push({expected:"object",code:"invalid_type",input:V,inst:Q}),F;if($&&K&&L?.async===!1&&L.jitless!==!0){if(!J)J=G(X.shape);if(F=J(F,L),!z)return F;return MY([],V,F,L,A,Q)}return Y(F,L)}});function x4(Q,X,Y,W){for(let J of Q)if(J.issues.length===0)return X.value=J.value,X;let G=Q.filter((J)=>!n0(J));if(G.length===1)return X.value=G[0].value,G[0];return X.issues.push({code:"invalid_union",input:X.value,inst:Y,errors:Q.map((J)=>J.issues.map((H)=>b0(H,W,Z0())))}),X}var Z6=U("$ZodUnion",(Q,X)=>{c.init(Q,X),u(Q._zod,"optin",()=>X.options.some((G)=>G._zod.optin==="optional")?"optional":void 0),u(Q._zod,"optout",()=>X.options.some((G)=>G._zod.optout==="optional")?"optional":void 0),u(Q._zod,"values",()=>{if(X.options.every((G)=>G._zod.values))return new Set(X.options.flatMap((G)=>Array.from(G._zod.values)));return}),u(Q._zod,"pattern",()=>{if(X.options.every((G)=>G._zod.pattern)){let G=X.options.map((J)=>J._zod.pattern);return new RegExp(`^(${G.map((J)=>h1(J.source)).join("|")})$`)}return});let Y=X.options.length===1,W=X.options[0]._zod.run;Q._zod.parse=(G,J)=>{if(Y)return W(G,J);let H=!1,$=[];for(let B of X.options){let K=B._zod.run({value:G.value,issues:[]},J);if(K instanceof Promise)$.push(K),H=!0;else{if(K.issues.length===0)return K;$.push(K)}}if(!H)return x4($,G,Q,J);return Promise.all($).then((B)=>{return x4(B,G,Q,J)})}});var NY=U("$ZodDiscriminatedUnion",(Q,X)=>{X.inclusive=!1,Z6.init(Q,X);let Y=Q._zod.parse;u(Q._zod,"propValues",()=>{let G={};for(let J of X.options){let H=J._zod.propValues;if(!H||Object.keys(H).length===0)throw Error(`Invalid discriminated union option at index "${X.options.indexOf(J)}"`);for(let[$,B]of Object.entries(H)){if(!G[$])G[$]=new Set;for(let K of B)G[$].add(K)}}return G});let W=U1(()=>{let G=X.options,J=new Map;for(let H of G){let $=H._zod.propValues?.[X.discriminator];if(!$||$.size===0)throw Error(`Invalid discriminated union option at index "${X.options.indexOf(H)}"`);for(let B of $){if(J.has(B))throw Error(`Duplicate discriminator value "${String(B)}"`);J.set(B,H)}}return J});Q._zod.parse=(G,J)=>{let H=G.value;if(!H1(H))return G.issues.push({code:"invalid_type",expected:"object",input:H,inst:Q}),G;let $=W.value.get(H?.[X.discriminator]);if($)return $._zod.run(G,J);if(X.unionFallback)return Y(G,J);return G.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:X.discriminator,input:H,path:[X.discriminator],inst:Q}),G}}),wY=U("$ZodIntersection",(Q,X)=>{c.init(Q,X),Q._zod.parse=(Y,W)=>{let G=Y.value,J=X.left._zod.run({value:G,issues:[]},W),H=X.right._zod.run({value:G,issues:[]},W);if(J instanceof Promise||H instanceof Promise)return Promise.all([J,H]).then(([B,K])=>{return g4(Y,B,K)});return g4(Y,J,H)}});function V6(Q,X){if(Q===X)return{valid:!0,data:Q};if(Q instanceof Date&&X instanceof Date&&+Q===+X)return{valid:!0,data:Q};if(r0(Q)&&r0(X)){let Y=Object.keys(X),W=Object.keys(Q).filter((J)=>Y.indexOf(J)!==-1),G={...Q,...X};for(let J of W){let H=V6(Q[J],X[J]);if(!H.valid)return{valid:!1,mergeErrorPath:[J,...H.mergeErrorPath]};G[J]=H.data}return{valid:!0,data:G}}if(Array.isArray(Q)&&Array.isArray(X)){if(Q.length!==X.length)return{valid:!1,mergeErrorPath:[]};let Y=[];for(let W=0;W<Q.length;W++){let G=Q[W],J=X[W],H=V6(G,J);if(!H.valid)return{valid:!1,mergeErrorPath:[W,...H.mergeErrorPath]};Y.push(H.data)}return{valid:!0,data:Y}}return{valid:!1,mergeErrorPath:[]}}function g4(Q,X,Y){let W=new Map,G;for(let $ of X.issues)if($.code==="unrecognized_keys"){G??(G=$);for(let B of $.keys){if(!W.has(B))W.set(B,{});W.get(B).l=!0}}else Q.issues.push($);for(let $ of Y.issues)if($.code==="unrecognized_keys")for(let B of $.keys){if(!W.has(B))W.set(B,{});W.get(B).r=!0}else Q.issues.push($);let J=[...W].filter(([,$])=>$.l&&$.r).map(([$])=>$);if(J.length&&G)Q.issues.push({...G,keys:J});if(n0(Q))return Q;let H=V6(X.value,Y.value);if(!H.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(H.mergeErrorPath)}`);return Q.value=H.data,Q}var PY=U("$ZodRecord",(Q,X)=>{c.init(Q,X),Q._zod.parse=(Y,W)=>{let G=Y.value;if(!r0(G))return Y.issues.push({expected:"record",code:"invalid_type",input:G,inst:Q}),Y;let J=[],H=X.keyType._zod.values;if(H){Y.value={};let $=new Set;for(let K of H)if(typeof K==="string"||typeof K==="number"||typeof K==="symbol"){$.add(typeof K==="number"?K.toString():K);let z=X.valueType._zod.run({value:G[K],issues:[]},W);if(z instanceof Promise)J.push(z.then((A)=>{if(A.issues.length)Y.issues.push(...u0(K,A.issues));Y.value[K]=A.value}));else{if(z.issues.length)Y.issues.push(...u0(K,z.issues));Y.value[K]=z.value}}let B;for(let K in G)if(!$.has(K))B=B??[],B.push(K);if(B&&B.length>0)Y.issues.push({code:"unrecognized_keys",input:G,inst:Q,keys:B})}else{Y.value={};for(let $ of Reflect.ownKeys(G)){if($==="__proto__")continue;let B=X.keyType._zod.run({value:$,issues:[]},W);if(B instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(typeof $==="string"&&u9.test($)&&B.issues.length&&B.issues.some((A)=>A.code==="invalid_type"&&A.expected==="number")){let A=X.keyType._zod.run({value:Number($),issues:[]},W);if(A instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(A.issues.length===0)B=A}if(B.issues.length){if(X.mode==="loose")Y.value[$]=G[$];else Y.issues.push({code:"invalid_key",origin:"record",issues:B.issues.map((A)=>b0(A,W,Z0())),input:$,path:[$],inst:Q});continue}let z=X.valueType._zod.run({value:G[$],issues:[]},W);if(z instanceof Promise)J.push(z.then((A)=>{if(A.issues.length)Y.issues.push(...u0($,A.issues));Y.value[B.value]=A.value}));else{if(z.issues.length)Y.issues.push(...u0($,z.issues));Y.value[B.value]=z.value}}}if(J.length)return Promise.all(J).then(()=>Y);return Y}});var IY=U("$ZodEnum",(Q,X)=>{c.init(Q,X);let Y=g1(X.entries),W=new Set(Y);Q._zod.values=W,Q._zod.pattern=new RegExp(`^(${Y.filter((G)=>H6.has(typeof G)).map((G)=>typeof G==="string"?h0(G):G.toString()).join("|")})$`),Q._zod.parse=(G,J)=>{let H=G.value;if(W.has(H))return G;return G.issues.push({code:"invalid_value",values:Y,input:H,inst:Q}),G}}),EY=U("$ZodLiteral",(Q,X)=>{if(c.init(Q,X),X.values.length===0)throw Error("Cannot create literal schema with no valid values");let Y=new Set(X.values);Q._zod.values=Y,Q._zod.pattern=new RegExp(`^(${X.values.map((W)=>typeof W==="string"?h0(W):W?h0(W.toString()):String(W)).join("|")})$`),Q._zod.parse=(W,G)=>{let J=W.value;if(Y.has(J))return W;return W.issues.push({code:"invalid_value",values:X.values,input:J,inst:Q}),W}});var bY=U("$ZodTransform",(Q,X)=>{c.init(Q,X),Q._zod.parse=(Y,W)=>{if(W.direction==="backward")throw new _1(Q.constructor.name);let G=X.transform(Y.value,Y);if(W.async)return(G instanceof Promise?G:Promise.resolve(G)).then((H)=>{return Y.value=H,Y});if(G instanceof Promise)throw new g0;return Y.value=G,Y}});function y4(Q,X){if(Q.issues.length&&X===void 0)return{issues:[],value:void 0};return Q}var M6=U("$ZodOptional",(Q,X)=>{c.init(Q,X),Q._zod.optin="optional",Q._zod.optout="optional",u(Q._zod,"values",()=>{return X.innerType._zod.values?new Set([...X.innerType._zod.values,void 0]):void 0}),u(Q._zod,"pattern",()=>{let Y=X.innerType._zod.pattern;return Y?new RegExp(`^(${h1(Y.source)})?$`):void 0}),Q._zod.parse=(Y,W)=>{if(X.innerType._zod.optin==="optional"){let G=X.innerType._zod.run(Y,W);if(G instanceof Promise)return G.then((J)=>y4(J,Y.value));return y4(G,Y.value)}if(Y.value===void 0)return Y;return X.innerType._zod.run(Y,W)}}),TY=U("$ZodExactOptional",(Q,X)=>{M6.init(Q,X),u(Q._zod,"values",()=>X.innerType._zod.values),u(Q._zod,"pattern",()=>X.innerType._zod.pattern),Q._zod.parse=(Y,W)=>{return X.innerType._zod.run(Y,W)}}),jY=U("$ZodNullable",(Q,X)=>{c.init(Q,X),u(Q._zod,"optin",()=>X.innerType._zod.optin),u(Q._zod,"optout",()=>X.innerType._zod.optout),u(Q._zod,"pattern",()=>{let Y=X.innerType._zod.pattern;return Y?new RegExp(`^(${h1(Y.source)}|null)$`):void 0}),u(Q._zod,"values",()=>{return X.innerType._zod.values?new Set([...X.innerType._zod.values,null]):void 0}),Q._zod.parse=(Y,W)=>{if(Y.value===null)return Y;return X.innerType._zod.run(Y,W)}}),RY=U("$ZodDefault",(Q,X)=>{c.init(Q,X),Q._zod.optin="optional",u(Q._zod,"values",()=>X.innerType._zod.values),Q._zod.parse=(Y,W)=>{if(W.direction==="backward")return X.innerType._zod.run(Y,W);if(Y.value===void 0)return Y.value=X.defaultValue,Y;let G=X.innerType._zod.run(Y,W);if(G instanceof Promise)return G.then((J)=>h4(J,X));return h4(G,X)}});function h4(Q,X){if(Q.value===void 0)Q.value=X.defaultValue;return Q}var SY=U("$ZodPrefault",(Q,X)=>{c.init(Q,X),Q._zod.optin="optional",u(Q._zod,"values",()=>X.innerType._zod.values),Q._zod.parse=(Y,W)=>{if(W.direction==="backward")return X.innerType._zod.run(Y,W);if(Y.value===void 0)Y.value=X.defaultValue;return X.innerType._zod.run(Y,W)}}),CY=U("$ZodNonOptional",(Q,X)=>{c.init(Q,X),u(Q._zod,"values",()=>{let Y=X.innerType._zod.values;return Y?new Set([...Y].filter((W)=>W!==void 0)):void 0}),Q._zod.parse=(Y,W)=>{let G=X.innerType._zod.run(Y,W);if(G instanceof Promise)return G.then((J)=>u4(J,Q));return u4(G,Q)}});function u4(Q,X){if(!Q.issues.length&&Q.value===void 0)Q.issues.push({code:"invalid_type",expected:"nonoptional",input:Q.value,inst:X});return Q}var kY=U("$ZodCatch",(Q,X)=>{c.init(Q,X),u(Q._zod,"optin",()=>X.innerType._zod.optin),u(Q._zod,"optout",()=>X.innerType._zod.optout),u(Q._zod,"values",()=>X.innerType._zod.values),Q._zod.parse=(Y,W)=>{if(W.direction==="backward")return X.innerType._zod.run(Y,W);let G=X.innerType._zod.run(Y,W);if(G instanceof Promise)return G.then((J)=>{if(Y.value=J.value,J.issues.length)Y.value=X.catchValue({...Y,error:{issues:J.issues.map((H)=>b0(H,W,Z0()))},input:Y.value}),Y.issues=[];return Y});if(Y.value=G.value,G.issues.length)Y.value=X.catchValue({...Y,error:{issues:G.issues.map((J)=>b0(J,W,Z0()))},input:Y.value}),Y.issues=[];return Y}});var vY=U("$ZodPipe",(Q,X)=>{c.init(Q,X),u(Q._zod,"values",()=>X.in._zod.values),u(Q._zod,"optin",()=>X.in._zod.optin),u(Q._zod,"optout",()=>X.out._zod.optout),u(Q._zod,"propValues",()=>X.in._zod.propValues),Q._zod.parse=(Y,W)=>{if(W.direction==="backward"){let J=X.out._zod.run(Y,W);if(J instanceof Promise)return J.then((H)=>l9(H,X.in,W));return l9(J,X.in,W)}let G=X.in._zod.run(Y,W);if(G instanceof Promise)return G.then((J)=>l9(J,X.out,W));return l9(G,X.out,W)}});function l9(Q,X,Y){if(Q.issues.length)return Q.aborted=!0,Q;return X._zod.run({value:Q.value,issues:Q.issues},Y)}var _Y=U("$ZodReadonly",(Q,X)=>{c.init(Q,X),u(Q._zod,"propValues",()=>X.innerType._zod.propValues),u(Q._zod,"values",()=>X.innerType._zod.values),u(Q._zod,"optin",()=>X.innerType?._zod?.optin),u(Q._zod,"optout",()=>X.innerType?._zod?.optout),Q._zod.parse=(Y,W)=>{if(W.direction==="backward")return X.innerType._zod.run(Y,W);let G=X.innerType._zod.run(Y,W);if(G instanceof Promise)return G.then(f4);return f4(G)}});function f4(Q){return Q.value=Object.freeze(Q.value),Q}var xY=U("$ZodCustom",(Q,X)=>{Q0.init(Q,X),c.init(Q,X),Q._zod.parse=(Y,W)=>{return Y},Q._zod.check=(Y)=>{let W=Y.value,G=X.fn(W);if(G instanceof Promise)return G.then((J)=>l4(J,Y,W,Q));l4(G,Y,W,Q);return}});function l4(Q,X,Y,W){if(!Q){let G={code:"custom",input:Y,inst:W,path:[...W._zod.def.path??[]],continue:!W._zod.def.abort};if(W._zod.def.params)G.params=W._zod.def.params;X.issues.push(V1(G))}}var J$=()=>{let Q={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function X(G){return Q[G]??null}let Y={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},W={nan:"NaN"};return(G)=>{switch(G.code){case"invalid_type":{let J=W[G.expected]??G.expected,H=K6(G.input),$=W[H]??H;return`Invalid input: expected ${J}, received ${$}`}case"invalid_value":if(G.values.length===1)return`Invalid input: expected ${_9(G.values[0])}`;return`Invalid option: expected one of ${C9(G.values,"|")}`;case"too_big":{let J=G.inclusive?"<=":"<",H=X(G.origin);if(H)return`Too big: expected ${G.origin??"value"} to have ${J}${G.maximum.toString()} ${H.unit??"elements"}`;return`Too big: expected ${G.origin??"value"} to be ${J}${G.maximum.toString()}`}case"too_small":{let J=G.inclusive?">=":">",H=X(G.origin);if(H)return`Too small: expected ${G.origin} to have ${J}${G.minimum.toString()} ${H.unit}`;return`Too small: expected ${G.origin} to be ${J}${G.minimum.toString()}`}case"invalid_format":{let J=G;if(J.format==="starts_with")return`Invalid string: must start with "${J.prefix}"`;if(J.format==="ends_with")return`Invalid string: must end with "${J.suffix}"`;if(J.format==="includes")return`Invalid string: must include "${J.includes}"`;if(J.format==="regex")return`Invalid string: must match pattern ${J.pattern}`;return`Invalid ${Y[J.format]??G.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${G.divisor}`;case"unrecognized_keys":return`Unrecognized key${G.keys.length>1?"s":""}: ${C9(G.keys,", ")}`;case"invalid_key":return`Invalid key in ${G.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${G.origin}`;default:return"Invalid input"}}};function q6(){return{localeError:J$()}}var gY,IZ=Symbol("ZodOutput"),EZ=Symbol("ZodInput");class yY{constructor(){this._map=new WeakMap,this._idmap=new Map}add(Q,...X){let Y=X[0];if(this._map.set(Q,Y),Y&&typeof Y==="object"&&"id"in Y)this._idmap.set(Y.id,Q);return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(Q){let X=this._map.get(Q);if(X&&typeof X==="object"&&"id"in X)this._idmap.delete(X.id);return this._map.delete(Q),this}get(Q){let X=Q._zod.parent;if(X){let Y={...this.get(X)??{}};delete Y.id;let W={...Y,...this._map.get(Q)};return Object.keys(W).length?W:void 0}return this._map.get(Q)}has(Q){return this._map.has(Q)}}function H$(){return new yY}(gY=globalThis).__zod_globalRegistry??(gY.__zod_globalRegistry=H$());var $1=globalThis.__zod_globalRegistry;function hY(Q,X){return new Q({type:"string",...b(X)})}function uY(Q,X){return new Q({type:"string",format:"email",check:"string_format",abort:!1,...b(X)})}function N6(Q,X){return new Q({type:"string",format:"guid",check:"string_format",abort:!1,...b(X)})}function fY(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,...b(X)})}function lY(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...b(X)})}function mY(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...b(X)})}function cY(Q,X){return new Q({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...b(X)})}function pY(Q,X){return new Q({type:"string",format:"url",check:"string_format",abort:!1,...b(X)})}function dY(Q,X){return new Q({type:"string",format:"emoji",check:"string_format",abort:!1,...b(X)})}function iY(Q,X){return new Q({type:"string",format:"nanoid",check:"string_format",abort:!1,...b(X)})}function rY(Q,X){return new Q({type:"string",format:"cuid",check:"string_format",abort:!1,...b(X)})}function nY(Q,X){return new Q({type:"string",format:"cuid2",check:"string_format",abort:!1,...b(X)})}function oY(Q,X){return new Q({type:"string",format:"ulid",check:"string_format",abort:!1,...b(X)})}function tY(Q,X){return new Q({type:"string",format:"xid",check:"string_format",abort:!1,...b(X)})}function aY(Q,X){return new Q({type:"string",format:"ksuid",check:"string_format",abort:!1,...b(X)})}function sY(Q,X){return new Q({type:"string",format:"ipv4",check:"string_format",abort:!1,...b(X)})}function eY(Q,X){return new Q({type:"string",format:"ipv6",check:"string_format",abort:!1,...b(X)})}function QW(Q,X){return new Q({type:"string",format:"cidrv4",check:"string_format",abort:!1,...b(X)})}function XW(Q,X){return new Q({type:"string",format:"cidrv6",check:"string_format",abort:!1,...b(X)})}function YW(Q,X){return new Q({type:"string",format:"base64",check:"string_format",abort:!1,...b(X)})}function WW(Q,X){return new Q({type:"string",format:"base64url",check:"string_format",abort:!1,...b(X)})}function GW(Q,X){return new Q({type:"string",format:"e164",check:"string_format",abort:!1,...b(X)})}function JW(Q,X){return new Q({type:"string",format:"jwt",check:"string_format",abort:!1,...b(X)})}function HW(Q,X){return new Q({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...b(X)})}function $W(Q,X){return new Q({type:"string",format:"date",check:"string_format",...b(X)})}function BW(Q,X){return new Q({type:"string",format:"time",check:"string_format",precision:null,...b(X)})}function KW(Q,X){return new Q({type:"string",format:"duration",check:"string_format",...b(X)})}function zW(Q,X){return new Q({type:"number",checks:[],...b(X)})}function AW(Q,X){return new Q({type:"number",check:"number_format",abort:!1,format:"safeint",...b(X)})}function LW(Q,X){return new Q({type:"boolean",...b(X)})}function FW(Q,X){return new Q({type:"null",...b(X)})}function DW(Q){return new Q({type:"unknown"})}function UW(Q,X){return new Q({type:"never",...b(X)})}function p9(Q,X){return new F6({check:"less_than",...b(X),value:Q,inclusive:!1})}function p1(Q,X){return new F6({check:"less_than",...b(X),value:Q,inclusive:!0})}function d9(Q,X){return new D6({check:"greater_than",...b(X),value:Q,inclusive:!1})}function d1(Q,X){return new D6({check:"greater_than",...b(X),value:Q,inclusive:!0})}function i9(Q,X){return new q4({check:"multiple_of",...b(X),value:Q})}function r9(Q,X){return new w4({check:"max_length",...b(X),maximum:Q})}function O1(Q,X){return new P4({check:"min_length",...b(X),minimum:Q})}function n9(Q,X){return new I4({check:"length_equals",...b(X),length:Q})}function w6(Q,X){return new E4({check:"string_format",format:"regex",...b(X),pattern:Q})}function P6(Q){return new b4({check:"string_format",format:"lowercase",...b(Q)})}function I6(Q){return new T4({check:"string_format",format:"uppercase",...b(Q)})}function E6(Q,X){return new j4({check:"string_format",format:"includes",...b(X),includes:Q})}function b6(Q,X){return new R4({check:"string_format",format:"starts_with",...b(X),prefix:Q})}function T6(Q,X){return new S4({check:"string_format",format:"ends_with",...b(X),suffix:Q})}function o0(Q){return new C4({check:"overwrite",tx:Q})}function j6(Q){return o0((X)=>X.normalize(Q))}function R6(){return o0((Q)=>Q.trim())}function S6(){return o0((Q)=>Q.toLowerCase())}function C6(){return o0((Q)=>Q.toUpperCase())}function k6(){return o0((Q)=>G6(Q))}function VW(Q,X,Y){return new Q({type:"array",element:X,...b(Y)})}function OW(Q,X,Y){let W=b(Y);return W.abort??(W.abort=!0),new Q({type:"custom",check:"custom",fn:X,...W})}function ZW(Q,X,Y){return new Q({type:"custom",check:"custom",fn:X,...b(Y)})}function MW(Q){let X=$$((Y)=>{return Y.addIssue=(W)=>{if(typeof W==="string")Y.issues.push(V1(W,Y.value,X._zod.def));else{let G=W;if(G.fatal)G.continue=!1;G.code??(G.code="custom"),G.input??(G.input=Y.value),G.inst??(G.inst=X),G.continue??(G.continue=!X._zod.def.abort),Y.issues.push(V1(G))}},Q(Y.value,Y)});return X}function $$(Q,X){let Y=new Q0({check:"custom",...b(X)});return Y._zod.check=Q,Y}function v6(Q){let X=Q?.target??"draft-2020-12";if(X==="draft-4")X="draft-04";if(X==="draft-7")X="draft-07";return{processors:Q.processors??{},metadataRegistry:Q?.metadata??$1,target:X,unrepresentable:Q?.unrepresentable??"throw",override:Q?.override??(()=>{}),io:Q?.io??"output",counter:0,seen:new Map,cycles:Q?.cycles??"ref",reused:Q?.reused??"inline",external:Q?.external??void 0}}function a(Q,X,Y={path:[],schemaPath:[]}){var W;let G=Q._zod.def,J=X.seen.get(Q);if(J){if(J.count++,Y.schemaPath.includes(Q))J.cycle=Y.path;return J.schema}let H={schema:{},count:1,cycle:void 0,path:Y.path};X.seen.set(Q,H);let $=Q._zod.toJSONSchema?.();if($)H.schema=$;else{let z={...Y,schemaPath:[...Y.schemaPath,Q],path:Y.path};if(Q._zod.processJSONSchema)Q._zod.processJSONSchema(X,H.schema,z);else{let F=H.schema,L=X.processors[G.type];if(!L)throw Error(`[toJSONSchema]: Non-representable type encountered: ${G.type}`);L(Q,X,F,z)}let A=Q._zod.parent;if(A){if(!H.ref)H.ref=A;a(A,X,z),X.seen.get(A).isParent=!0}}let B=X.metadataRegistry.get(Q);if(B)Object.assign(H.schema,B);if(X.io==="input"&&$0(Q))delete H.schema.examples,delete H.schema.default;if(X.io==="input"&&H.schema._prefault)(W=H.schema).default??(W.default=H.schema._prefault);return delete H.schema._prefault,X.seen.get(Q).schema}function _6(Q,X){let Y=Q.seen.get(X);if(!Y)throw Error("Unprocessed schema. This is a bug in Zod.");let W=new Map;for(let H of Q.seen.entries()){let $=Q.metadataRegistry.get(H[0])?.id;if($){let B=W.get($);if(B&&B!==H[0])throw Error(`Duplicate schema id "${$}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);W.set($,H[0])}}let G=(H)=>{let $=Q.target==="draft-2020-12"?"$defs":"definitions";if(Q.external){let A=Q.external.registry.get(H[0])?.id,F=Q.external.uri??((V)=>V);if(A)return{ref:F(A)};let L=H[1].defId??H[1].schema.id??`schema${Q.counter++}`;return H[1].defId=L,{defId:L,ref:`${F("__shared")}#/${$}/${L}`}}if(H[1]===Y)return{ref:"#"};let K=`${"#"}/${$}/`,z=H[1].schema.id??`__schema${Q.counter++}`;return{defId:z,ref:K+z}},J=(H)=>{if(H[1].schema.$ref)return;let $=H[1],{ref:B,defId:K}=G(H);if($.def={...$.schema},K)$.defId=K;let z=$.schema;for(let A in z)delete z[A];z.$ref=B};if(Q.cycles==="throw")for(let H of Q.seen.entries()){let $=H[1];if($.cycle)throw Error(`Cycle detected: #/${$.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let H of Q.seen.entries()){let $=H[1];if(X===H[0]){J(H);continue}if(Q.external){let K=Q.external.registry.get(H[0])?.id;if(X!==H[0]&&K){J(H);continue}}if(Q.metadataRegistry.get(H[0])?.id){J(H);continue}if($.cycle){J(H);continue}if($.count>1){if(Q.reused==="ref"){J(H);continue}}}}function x6(Q,X){let Y=Q.seen.get(X);if(!Y)throw Error("Unprocessed schema. This is a bug in Zod.");let W=(H)=>{let $=Q.seen.get(H);if($.ref===null)return;let B=$.def??$.schema,K={...B},z=$.ref;if($.ref=null,z){W(z);let F=Q.seen.get(z),L=F.schema;if(L.$ref&&(Q.target==="draft-07"||Q.target==="draft-04"||Q.target==="openapi-3.0"))B.allOf=B.allOf??[],B.allOf.push(L);else Object.assign(B,L);if(Object.assign(B,K),H._zod.parent===z)for(let O in B){if(O==="$ref"||O==="allOf")continue;if(!(O in K))delete B[O]}if(L.$ref)for(let O in B){if(O==="$ref"||O==="allOf")continue;if(O in F.def&&JSON.stringify(B[O])===JSON.stringify(F.def[O]))delete B[O]}}let A=H._zod.parent;if(A&&A!==z){W(A);let F=Q.seen.get(A);if(F?.schema.$ref){if(B.$ref=F.schema.$ref,F.def)for(let L in B){if(L==="$ref"||L==="allOf")continue;if(L in F.def&&JSON.stringify(B[L])===JSON.stringify(F.def[L]))delete B[L]}}}Q.override({zodSchema:H,jsonSchema:B,path:$.path??[]})};for(let H of[...Q.seen.entries()].reverse())W(H[0]);let G={};if(Q.target==="draft-2020-12")G.$schema="https://json-schema.org/draft/2020-12/schema";else if(Q.target==="draft-07")G.$schema="http://json-schema.org/draft-07/schema#";else if(Q.target==="draft-04")G.$schema="http://json-schema.org/draft-04/schema#";else if(Q.target==="openapi-3.0");if(Q.external?.uri){let H=Q.external.registry.get(X)?.id;if(!H)throw Error("Schema is missing an `id` property");G.$id=Q.external.uri(H)}Object.assign(G,Y.def??Y.schema);let J=Q.external?.defs??{};for(let H of Q.seen.entries()){let $=H[1];if($.def&&$.defId)J[$.defId]=$.def}if(Q.external);else if(Object.keys(J).length>0)if(Q.target==="draft-2020-12")G.$defs=J;else G.definitions=J;try{let H=JSON.parse(JSON.stringify(G));return Object.defineProperty(H,"~standard",{value:{...X["~standard"],jsonSchema:{input:i1(X,"input",Q.processors),output:i1(X,"output",Q.processors)}},enumerable:!1,writable:!1}),H}catch(H){throw Error("Error converting schema to JSON.")}}function $0(Q,X){let Y=X??{seen:new Set};if(Y.seen.has(Q))return!1;Y.seen.add(Q);let W=Q._zod.def;if(W.type==="transform")return!0;if(W.type==="array")return $0(W.element,Y);if(W.type==="set")return $0(W.valueType,Y);if(W.type==="lazy")return $0(W.getter(),Y);if(W.type==="promise"||W.type==="optional"||W.type==="nonoptional"||W.type==="nullable"||W.type==="readonly"||W.type==="default"||W.type==="prefault")return $0(W.innerType,Y);if(W.type==="intersection")return $0(W.left,Y)||$0(W.right,Y);if(W.type==="record"||W.type==="map")return $0(W.keyType,Y)||$0(W.valueType,Y);if(W.type==="pipe")return $0(W.in,Y)||$0(W.out,Y);if(W.type==="object"){for(let G in W.shape)if($0(W.shape[G],Y))return!0;return!1}if(W.type==="union"){for(let G of W.options)if($0(G,Y))return!0;return!1}if(W.type==="tuple"){for(let G of W.items)if($0(G,Y))return!0;if(W.rest&&$0(W.rest,Y))return!0;return!1}return!1}var qW=(Q,X={})=>(Y)=>{let W=v6({...Y,processors:X});return a(Q,W),_6(W,Q),x6(W,Q)},i1=(Q,X,Y={})=>(W)=>{let{libraryOptions:G,target:J}=W??{},H=v6({...G??{},target:J,io:X,processors:Y});return a(Q,H),_6(H,Q),x6(H,Q)};var B$={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},NW=(Q,X,Y,W)=>{let G=Y;G.type="string";let{minimum:J,maximum:H,format:$,patterns:B,contentEncoding:K}=Q._zod.bag;if(typeof J==="number")G.minLength=J;if(typeof H==="number")G.maxLength=H;if($){if(G.format=B$[$]??$,G.format==="")delete G.format;if($==="time")delete G.format}if(K)G.contentEncoding=K;if(B&&B.size>0){let z=[...B];if(z.length===1)G.pattern=z[0].source;else if(z.length>1)G.allOf=[...z.map((A)=>({...X.target==="draft-07"||X.target==="draft-04"||X.target==="openapi-3.0"?{type:"string"}:{},pattern:A.source}))]}},wW=(Q,X,Y,W)=>{let G=Y,{minimum:J,maximum:H,format:$,multipleOf:B,exclusiveMaximum:K,exclusiveMinimum:z}=Q._zod.bag;if(typeof $==="string"&&$.includes("int"))G.type="integer";else G.type="number";if(typeof z==="number")if(X.target==="draft-04"||X.target==="openapi-3.0")G.minimum=z,G.exclusiveMinimum=!0;else G.exclusiveMinimum=z;if(typeof J==="number"){if(G.minimum=J,typeof z==="number"&&X.target!=="draft-04")if(z>=J)delete G.minimum;else delete G.exclusiveMinimum}if(typeof K==="number")if(X.target==="draft-04"||X.target==="openapi-3.0")G.maximum=K,G.exclusiveMaximum=!0;else G.exclusiveMaximum=K;if(typeof H==="number"){if(G.maximum=H,typeof K==="number"&&X.target!=="draft-04")if(K<=H)delete G.maximum;else delete G.exclusiveMaximum}if(typeof B==="number")G.multipleOf=B},PW=(Q,X,Y,W)=>{Y.type="boolean"};var IW=(Q,X,Y,W)=>{if(X.target==="openapi-3.0")Y.type="string",Y.nullable=!0,Y.enum=[null];else Y.type="null"};var EW=(Q,X,Y,W)=>{Y.not={}};var bW=(Q,X,Y,W)=>{};var TW=(Q,X,Y,W)=>{let G=Q._zod.def,J=g1(G.entries);if(J.every((H)=>typeof H==="number"))Y.type="number";if(J.every((H)=>typeof H==="string"))Y.type="string";Y.enum=J},jW=(Q,X,Y,W)=>{let G=Q._zod.def,J=[];for(let H of G.values)if(H===void 0){if(X.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof H==="bigint")if(X.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else J.push(Number(H));else J.push(H);if(J.length===0);else if(J.length===1){let H=J[0];if(Y.type=H===null?"null":typeof H,X.target==="draft-04"||X.target==="openapi-3.0")Y.enum=[H];else Y.const=H}else{if(J.every((H)=>typeof H==="number"))Y.type="number";if(J.every((H)=>typeof H==="string"))Y.type="string";if(J.every((H)=>typeof H==="boolean"))Y.type="boolean";if(J.every((H)=>H===null))Y.type="null";Y.enum=J}};var RW=(Q,X,Y,W)=>{if(X.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")};var SW=(Q,X,Y,W)=>{if(X.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")};var CW=(Q,X,Y,W)=>{let G=Y,J=Q._zod.def,{minimum:H,maximum:$}=Q._zod.bag;if(typeof H==="number")G.minItems=H;if(typeof $==="number")G.maxItems=$;G.type="array",G.items=a(J.element,X,{...W,path:[...W.path,"items"]})},kW=(Q,X,Y,W)=>{let G=Y,J=Q._zod.def;G.type="object",G.properties={};let H=J.shape;for(let K in H)G.properties[K]=a(H[K],X,{...W,path:[...W.path,"properties",K]});let $=new Set(Object.keys(H)),B=new Set([...$].filter((K)=>{let z=J.shape[K]._zod;if(X.io==="input")return z.optin===void 0;else return z.optout===void 0}));if(B.size>0)G.required=Array.from(B);if(J.catchall?._zod.def.type==="never")G.additionalProperties=!1;else if(!J.catchall){if(X.io==="output")G.additionalProperties=!1}else if(J.catchall)G.additionalProperties=a(J.catchall,X,{...W,path:[...W.path,"additionalProperties"]})},vW=(Q,X,Y,W)=>{let G=Q._zod.def,J=G.inclusive===!1,H=G.options.map(($,B)=>a($,X,{...W,path:[...W.path,J?"oneOf":"anyOf",B]}));if(J)Y.oneOf=H;else Y.anyOf=H},_W=(Q,X,Y,W)=>{let G=Q._zod.def,J=a(G.left,X,{...W,path:[...W.path,"allOf",0]}),H=a(G.right,X,{...W,path:[...W.path,"allOf",1]}),$=(K)=>("allOf"in K)&&Object.keys(K).length===1,B=[...$(J)?J.allOf:[J],...$(H)?H.allOf:[H]];Y.allOf=B};var xW=(Q,X,Y,W)=>{let G=Y,J=Q._zod.def;G.type="object";let H=J.keyType,B=H._zod.bag?.patterns;if(J.mode==="loose"&&B&&B.size>0){let z=a(J.valueType,X,{...W,path:[...W.path,"patternProperties","*"]});G.patternProperties={};for(let A of B)G.patternProperties[A.source]=z}else{if(X.target==="draft-07"||X.target==="draft-2020-12")G.propertyNames=a(J.keyType,X,{...W,path:[...W.path,"propertyNames"]});G.additionalProperties=a(J.valueType,X,{...W,path:[...W.path,"additionalProperties"]})}let K=H._zod.values;if(K){let z=[...K].filter((A)=>typeof A==="string"||typeof A==="number");if(z.length>0)G.required=z}},gW=(Q,X,Y,W)=>{let G=Q._zod.def,J=a(G.innerType,X,W),H=X.seen.get(Q);if(X.target==="openapi-3.0")H.ref=G.innerType,Y.nullable=!0;else Y.anyOf=[J,{type:"null"}]},yW=(Q,X,Y,W)=>{let G=Q._zod.def;a(G.innerType,X,W);let J=X.seen.get(Q);J.ref=G.innerType},hW=(Q,X,Y,W)=>{let G=Q._zod.def;a(G.innerType,X,W);let J=X.seen.get(Q);J.ref=G.innerType,Y.default=JSON.parse(JSON.stringify(G.defaultValue))},uW=(Q,X,Y,W)=>{let G=Q._zod.def;a(G.innerType,X,W);let J=X.seen.get(Q);if(J.ref=G.innerType,X.io==="input")Y._prefault=JSON.parse(JSON.stringify(G.defaultValue))},fW=(Q,X,Y,W)=>{let G=Q._zod.def;a(G.innerType,X,W);let J=X.seen.get(Q);J.ref=G.innerType;let H;try{H=G.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}Y.default=H},lW=(Q,X,Y,W)=>{let G=Q._zod.def,J=X.io==="input"?G.in._zod.def.type==="transform"?G.out:G.in:G.out;a(J,X,W);let H=X.seen.get(Q);H.ref=J},mW=(Q,X,Y,W)=>{let G=Q._zod.def;a(G.innerType,X,W);let J=X.seen.get(Q);J.ref=G.innerType,Y.readOnly=!0};var g6=(Q,X,Y,W)=>{let G=Q._zod.def;a(G.innerType,X,W);let J=X.seen.get(Q);J.ref=G.innerType};function Z1(Q){return!!Q._zod}function t0(Q,X){if(Z1(Q))return l1(Q,X);return Q.safeParse(X)}function o9(Q){if(!Q)return;let X;if(Z1(Q))X=Q._zod?.def?.shape;else X=Q.shape;if(!X)return;if(typeof X==="function")try{return X()}catch{return}return X}function cW(Q){if(Z1(Q)){let J=Q._zod?.def;if(J){if(J.value!==void 0)return J.value;if(Array.isArray(J.values)&&J.values.length>0)return J.values[0]}}let Y=Q._def;if(Y){if(Y.value!==void 0)return Y.value;if(Array.isArray(Y.values)&&Y.values.length>0)return Y.values[0]}let W=Q.value;if(W!==void 0)return W;return}var n1={};bX(n1,{time:()=>u6,duration:()=>f6,datetime:()=>y6,date:()=>h6,ZodISOTime:()=>iW,ZodISODuration:()=>rW,ZodISODateTime:()=>pW,ZodISODate:()=>dW});var pW=U("ZodISODateTime",(Q,X)=>{e4.init(Q,X),i.init(Q,X)});function y6(Q){return HW(pW,Q)}var dW=U("ZodISODate",(Q,X)=>{QY.init(Q,X),i.init(Q,X)});function h6(Q){return $W(dW,Q)}var iW=U("ZodISOTime",(Q,X)=>{XY.init(Q,X),i.init(Q,X)});function u6(Q){return BW(iW,Q)}var rW=U("ZodISODuration",(Q,X)=>{YY.init(Q,X),i.init(Q,X)});function f6(Q){return KW(rW,Q)}var nW=(Q,X)=>{x9.init(Q,X),Q.name="ZodError",Object.defineProperties(Q,{format:{value:(Y)=>yX(Q,Y)},flatten:{value:(Y)=>gX(Q,Y)},addIssue:{value:(Y)=>{Q.issues.push(Y),Q.message=JSON.stringify(Q.issues,D1,2)}},addIssues:{value:(Y)=>{Q.issues.push(...Y),Q.message=JSON.stringify(Q.issues,D1,2)}},isEmpty:{get(){return Q.issues.length===0}}})},DM=U("ZodError",nW),V0=U("ZodError",nW,{Parent:Error});var oW=g9(V0),tW=y9(V0),aW=f1(V0),sW=m1(V0),eW=hX(V0),QG=uX(V0),XG=fX(V0),YG=lX(V0),WG=mX(V0),GG=cX(V0),JG=pX(V0),HG=dX(V0);var n=U("ZodType",(Q,X)=>{return c.init(Q,X),Object.assign(Q["~standard"],{jsonSchema:{input:i1(Q,"input"),output:i1(Q,"output")}}),Q.toJSONSchema=qW(Q,{}),Q.def=X,Q.type=X.type,Object.defineProperty(Q,"_def",{value:X}),Q.check=(...Y)=>{return Q.clone(y.mergeDefs(X,{checks:[...X.checks??[],...Y.map((W)=>typeof W==="function"?{_zod:{check:W,def:{check:"custom"},onattach:[]}}:W)]}),{parent:!0})},Q.with=Q.check,Q.clone=(Y,W)=>E0(Q,Y,W),Q.brand=()=>Q,Q.register=(Y,W)=>{return Y.add(Q,W),Q},Q.parse=(Y,W)=>oW(Q,Y,W,{callee:Q.parse}),Q.safeParse=(Y,W)=>aW(Q,Y,W),Q.parseAsync=async(Y,W)=>tW(Q,Y,W,{callee:Q.parseAsync}),Q.safeParseAsync=async(Y,W)=>sW(Q,Y,W),Q.spa=Q.safeParseAsync,Q.encode=(Y,W)=>eW(Q,Y,W),Q.decode=(Y,W)=>QG(Q,Y,W),Q.encodeAsync=async(Y,W)=>XG(Q,Y,W),Q.decodeAsync=async(Y,W)=>YG(Q,Y,W),Q.safeEncode=(Y,W)=>WG(Q,Y,W),Q.safeDecode=(Y,W)=>GG(Q,Y,W),Q.safeEncodeAsync=async(Y,W)=>JG(Q,Y,W),Q.safeDecodeAsync=async(Y,W)=>HG(Q,Y,W),Q.refine=(Y,W)=>Q.check($B(Y,W)),Q.superRefine=(Y)=>Q.check(BB(Y)),Q.overwrite=(Y)=>Q.check(o0(Y)),Q.optional=()=>t(Q),Q.exactOptional=()=>o$(Q),Q.nullable=()=>KG(Q),Q.nullish=()=>t(KG(Q)),Q.nonoptional=(Y)=>XB(Q,Y),Q.array=()=>v(Q),Q.or=(Y)=>m([Q,Y]),Q.and=(Y)=>a9(Q,Y),Q.transform=(Y)=>m6(Q,DG(Y)),Q.default=(Y)=>s$(Q,Y),Q.prefault=(Y)=>QB(Q,Y),Q.catch=(Y)=>WB(Q,Y),Q.pipe=(Y)=>m6(Q,Y),Q.readonly=()=>HB(Q),Q.describe=(Y)=>{let W=Q.clone();return $1.add(W,{description:Y}),W},Object.defineProperty(Q,"description",{get(){return $1.get(Q)?.description},configurable:!0}),Q.meta=(...Y)=>{if(Y.length===0)return $1.get(Q);let W=Q.clone();return $1.add(W,Y[0]),W},Q.isOptional=()=>Q.safeParse(void 0).success,Q.isNullable=()=>Q.safeParse(null).success,Q.apply=(Y)=>Y(Q),Q}),zG=U("_ZodString",(Q,X)=>{c9.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(W,G,J)=>NW(Q,W,G,J);let Y=Q._zod.bag;Q.format=Y.format??null,Q.minLength=Y.minimum??null,Q.maxLength=Y.maximum??null,Q.regex=(...W)=>Q.check(w6(...W)),Q.includes=(...W)=>Q.check(E6(...W)),Q.startsWith=(...W)=>Q.check(b6(...W)),Q.endsWith=(...W)=>Q.check(T6(...W)),Q.min=(...W)=>Q.check(O1(...W)),Q.max=(...W)=>Q.check(r9(...W)),Q.length=(...W)=>Q.check(n9(...W)),Q.nonempty=(...W)=>Q.check(O1(1,...W)),Q.lowercase=(W)=>Q.check(P6(W)),Q.uppercase=(W)=>Q.check(I6(W)),Q.trim=()=>Q.check(R6()),Q.normalize=(...W)=>Q.check(j6(...W)),Q.toLowerCase=()=>Q.check(S6()),Q.toUpperCase=()=>Q.check(C6()),Q.slugify=()=>Q.check(k6())}),Z$=U("ZodString",(Q,X)=>{c9.init(Q,X),zG.init(Q,X),Q.email=(Y)=>Q.check(uY(M$,Y)),Q.url=(Y)=>Q.check(pY(q$,Y)),Q.jwt=(Y)=>Q.check(JW(x$,Y)),Q.emoji=(Y)=>Q.check(dY(N$,Y)),Q.guid=(Y)=>Q.check(N6($G,Y)),Q.uuid=(Y)=>Q.check(fY(t9,Y)),Q.uuidv4=(Y)=>Q.check(lY(t9,Y)),Q.uuidv6=(Y)=>Q.check(mY(t9,Y)),Q.uuidv7=(Y)=>Q.check(cY(t9,Y)),Q.nanoid=(Y)=>Q.check(iY(w$,Y)),Q.guid=(Y)=>Q.check(N6($G,Y)),Q.cuid=(Y)=>Q.check(rY(P$,Y)),Q.cuid2=(Y)=>Q.check(nY(I$,Y)),Q.ulid=(Y)=>Q.check(oY(E$,Y)),Q.base64=(Y)=>Q.check(YW(k$,Y)),Q.base64url=(Y)=>Q.check(WW(v$,Y)),Q.xid=(Y)=>Q.check(tY(b$,Y)),Q.ksuid=(Y)=>Q.check(aY(T$,Y)),Q.ipv4=(Y)=>Q.check(sY(j$,Y)),Q.ipv6=(Y)=>Q.check(eY(R$,Y)),Q.cidrv4=(Y)=>Q.check(QW(S$,Y)),Q.cidrv6=(Y)=>Q.check(XW(C$,Y)),Q.e164=(Y)=>Q.check(GW(_$,Y)),Q.datetime=(Y)=>Q.check(y6(Y)),Q.date=(Y)=>Q.check(h6(Y)),Q.time=(Y)=>Q.check(u6(Y)),Q.duration=(Y)=>Q.check(f6(Y))});function D(Q){return hY(Z$,Q)}var i=U("ZodStringFormat",(Q,X)=>{p.init(Q,X),zG.init(Q,X)}),M$=U("ZodEmail",(Q,X)=>{p4.init(Q,X),i.init(Q,X)});var $G=U("ZodGUID",(Q,X)=>{m4.init(Q,X),i.init(Q,X)});var t9=U("ZodUUID",(Q,X)=>{c4.init(Q,X),i.init(Q,X)});var q$=U("ZodURL",(Q,X)=>{d4.init(Q,X),i.init(Q,X)});var N$=U("ZodEmoji",(Q,X)=>{i4.init(Q,X),i.init(Q,X)});var w$=U("ZodNanoID",(Q,X)=>{r4.init(Q,X),i.init(Q,X)});var P$=U("ZodCUID",(Q,X)=>{n4.init(Q,X),i.init(Q,X)});var I$=U("ZodCUID2",(Q,X)=>{o4.init(Q,X),i.init(Q,X)});var E$=U("ZodULID",(Q,X)=>{t4.init(Q,X),i.init(Q,X)});var b$=U("ZodXID",(Q,X)=>{a4.init(Q,X),i.init(Q,X)});var T$=U("ZodKSUID",(Q,X)=>{s4.init(Q,X),i.init(Q,X)});var j$=U("ZodIPv4",(Q,X)=>{WY.init(Q,X),i.init(Q,X)});var R$=U("ZodIPv6",(Q,X)=>{GY.init(Q,X),i.init(Q,X)});var S$=U("ZodCIDRv4",(Q,X)=>{JY.init(Q,X),i.init(Q,X)});var C$=U("ZodCIDRv6",(Q,X)=>{HY.init(Q,X),i.init(Q,X)});var k$=U("ZodBase64",(Q,X)=>{BY.init(Q,X),i.init(Q,X)});var v$=U("ZodBase64URL",(Q,X)=>{KY.init(Q,X),i.init(Q,X)});var _$=U("ZodE164",(Q,X)=>{zY.init(Q,X),i.init(Q,X)});var x$=U("ZodJWT",(Q,X)=>{AY.init(Q,X),i.init(Q,X)});var AG=U("ZodNumber",(Q,X)=>{O6.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(W,G,J)=>wW(Q,W,G,J),Q.gt=(W,G)=>Q.check(d9(W,G)),Q.gte=(W,G)=>Q.check(d1(W,G)),Q.min=(W,G)=>Q.check(d1(W,G)),Q.lt=(W,G)=>Q.check(p9(W,G)),Q.lte=(W,G)=>Q.check(p1(W,G)),Q.max=(W,G)=>Q.check(p1(W,G)),Q.int=(W)=>Q.check(BG(W)),Q.safe=(W)=>Q.check(BG(W)),Q.positive=(W)=>Q.check(d9(0,W)),Q.nonnegative=(W)=>Q.check(d1(0,W)),Q.negative=(W)=>Q.check(p9(0,W)),Q.nonpositive=(W)=>Q.check(p1(0,W)),Q.multipleOf=(W,G)=>Q.check(i9(W,G)),Q.step=(W,G)=>Q.check(i9(W,G)),Q.finite=()=>Q;let Y=Q._zod.bag;Q.minValue=Math.max(Y.minimum??Number.NEGATIVE_INFINITY,Y.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,Q.maxValue=Math.min(Y.maximum??Number.POSITIVE_INFINITY,Y.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,Q.isInt=(Y.format??"").includes("int")||Number.isSafeInteger(Y.multipleOf??0.5),Q.isFinite=!0,Q.format=Y.format??null});function f(Q){return zW(AG,Q)}var g$=U("ZodNumberFormat",(Q,X)=>{LY.init(Q,X),AG.init(Q,X)});function BG(Q){return AW(g$,Q)}var y$=U("ZodBoolean",(Q,X)=>{FY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>PW(Q,Y,W,G)});function e(Q){return LW(y$,Q)}var h$=U("ZodNull",(Q,X)=>{DY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>IW(Q,Y,W,G)});function c6(Q){return FW(h$,Q)}var u$=U("ZodUnknown",(Q,X)=>{UY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>bW(Q,Y,W,G)});function r(){return DW(u$)}var f$=U("ZodNever",(Q,X)=>{VY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>EW(Q,Y,W,G)});function l$(Q){return UW(f$,Q)}var m$=U("ZodArray",(Q,X)=>{OY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>CW(Q,Y,W,G),Q.element=X.element,Q.min=(Y,W)=>Q.check(O1(Y,W)),Q.nonempty=(Y)=>Q.check(O1(1,Y)),Q.max=(Y,W)=>Q.check(r9(Y,W)),Q.length=(Y,W)=>Q.check(n9(Y,W)),Q.unwrap=()=>Q.element});function v(Q,X){return VW(m$,Q,X)}var LG=U("ZodObject",(Q,X)=>{qY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>kW(Q,Y,W,G),y.defineLazy(Q,"shape",()=>{return X.shape}),Q.keyof=()=>A0(Object.keys(Q._zod.def.shape)),Q.catchall=(Y)=>Q.clone({...Q._zod.def,catchall:Y}),Q.passthrough=()=>Q.clone({...Q._zod.def,catchall:r()}),Q.loose=()=>Q.clone({...Q._zod.def,catchall:r()}),Q.strict=()=>Q.clone({...Q._zod.def,catchall:l$()}),Q.strip=()=>Q.clone({...Q._zod.def,catchall:void 0}),Q.extend=(Y)=>{return y.extend(Q,Y)},Q.safeExtend=(Y)=>{return y.safeExtend(Q,Y)},Q.merge=(Y)=>y.merge(Q,Y),Q.pick=(Y)=>y.pick(Q,Y),Q.omit=(Y)=>y.omit(Q,Y),Q.partial=(...Y)=>y.partial(UG,Q,Y[0]),Q.required=(...Y)=>y.required(VG,Q,Y[0])});function N(Q,X){let Y={type:"object",shape:Q??{},...y.normalizeParams(X)};return new LG(Y)}function B0(Q,X){return new LG({type:"object",shape:Q,catchall:r(),...y.normalizeParams(X)})}var FG=U("ZodUnion",(Q,X)=>{Z6.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>vW(Q,Y,W,G),Q.options=X.options});function m(Q,X){return new FG({type:"union",options:Q,...y.normalizeParams(X)})}var c$=U("ZodDiscriminatedUnion",(Q,X)=>{FG.init(Q,X),NY.init(Q,X)});function p6(Q,X,Y){return new c$({type:"union",options:X,discriminator:Q,...y.normalizeParams(Y)})}var p$=U("ZodIntersection",(Q,X)=>{wY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>_W(Q,Y,W,G)});function a9(Q,X){return new p$({type:"intersection",left:Q,right:X})}var d$=U("ZodRecord",(Q,X)=>{PY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>xW(Q,Y,W,G),Q.keyType=X.keyType,Q.valueType=X.valueType});function o(Q,X,Y){return new d$({type:"record",keyType:Q,valueType:X,...y.normalizeParams(Y)})}var l6=U("ZodEnum",(Q,X)=>{IY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(W,G,J)=>TW(Q,W,G,J),Q.enum=X.entries,Q.options=Object.values(X.entries);let Y=new Set(Object.keys(X.entries));Q.extract=(W,G)=>{let J={};for(let H of W)if(Y.has(H))J[H]=X.entries[H];else throw Error(`Key ${H} not found in enum`);return new l6({...X,checks:[],...y.normalizeParams(G),entries:J})},Q.exclude=(W,G)=>{let J={...X.entries};for(let H of W)if(Y.has(H))delete J[H];else throw Error(`Key ${H} not found in enum`);return new l6({...X,checks:[],...y.normalizeParams(G),entries:J})}});function A0(Q,X){let Y=Array.isArray(Q)?Object.fromEntries(Q.map((W)=>[W,W])):Q;return new l6({type:"enum",entries:Y,...y.normalizeParams(X)})}var i$=U("ZodLiteral",(Q,X)=>{EY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>jW(Q,Y,W,G),Q.values=new Set(X.values),Object.defineProperty(Q,"value",{get(){if(X.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return X.values[0]}})});function w(Q,X){return new i$({type:"literal",values:Array.isArray(Q)?Q:[Q],...y.normalizeParams(X)})}var r$=U("ZodTransform",(Q,X)=>{bY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>SW(Q,Y,W,G),Q._zod.parse=(Y,W)=>{if(W.direction==="backward")throw new _1(Q.constructor.name);Y.addIssue=(J)=>{if(typeof J==="string")Y.issues.push(y.issue(J,Y.value,X));else{let H=J;if(H.fatal)H.continue=!1;H.code??(H.code="custom"),H.input??(H.input=Y.value),H.inst??(H.inst=Q),Y.issues.push(y.issue(H))}};let G=X.transform(Y.value,Y);if(G instanceof Promise)return G.then((J)=>{return Y.value=J,Y});return Y.value=G,Y}});function DG(Q){return new r$({type:"transform",transform:Q})}var UG=U("ZodOptional",(Q,X)=>{M6.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>g6(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType});function t(Q){return new UG({type:"optional",innerType:Q})}var n$=U("ZodExactOptional",(Q,X)=>{TY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>g6(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType});function o$(Q){return new n$({type:"optional",innerType:Q})}var t$=U("ZodNullable",(Q,X)=>{jY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>gW(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType});function KG(Q){return new t$({type:"nullable",innerType:Q})}var a$=U("ZodDefault",(Q,X)=>{RY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>hW(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType,Q.removeDefault=Q.unwrap});function s$(Q,X){return new a$({type:"default",innerType:Q,get defaultValue(){return typeof X==="function"?X():y.shallowClone(X)}})}var e$=U("ZodPrefault",(Q,X)=>{SY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>uW(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType});function QB(Q,X){return new e$({type:"prefault",innerType:Q,get defaultValue(){return typeof X==="function"?X():y.shallowClone(X)}})}var VG=U("ZodNonOptional",(Q,X)=>{CY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>yW(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType});function XB(Q,X){return new VG({type:"nonoptional",innerType:Q,...y.normalizeParams(X)})}var YB=U("ZodCatch",(Q,X)=>{kY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>fW(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType,Q.removeCatch=Q.unwrap});function WB(Q,X){return new YB({type:"catch",innerType:Q,catchValue:typeof X==="function"?X:()=>X})}var GB=U("ZodPipe",(Q,X)=>{vY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>lW(Q,Y,W,G),Q.in=X.in,Q.out=X.out});function m6(Q,X){return new GB({type:"pipe",in:Q,out:X})}var JB=U("ZodReadonly",(Q,X)=>{_Y.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>mW(Q,Y,W,G),Q.unwrap=()=>Q._zod.def.innerType});function HB(Q){return new JB({type:"readonly",innerType:Q})}var OG=U("ZodCustom",(Q,X)=>{xY.init(Q,X),n.init(Q,X),Q._zod.processJSONSchema=(Y,W,G)=>RW(Q,Y,W,G)});function ZG(Q,X){return OW(OG,Q??(()=>!0),X)}function $B(Q,X={}){return ZW(OG,Q,X)}function BB(Q){return MW(Q)}function d6(Q,X){return m6(DG(Q),X)}Z0(q6());var i6="2025-11-25";var MG=[i6,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],a0="io.modelcontextprotocol/related-task",e9="2.0",X0=ZG((Q)=>Q!==null&&(typeof Q==="object"||typeof Q==="function")),qG=m([D(),f().int()]),NG=D(),Cq=B0({ttl:m([f(),c6()]).optional(),pollInterval:f().optional()}),KB=N({ttl:f().optional()}),zB=N({taskId:D()}),r6=B0({progressToken:qG.optional(),[a0]:zB.optional()}),O0=N({_meta:r6.optional()}),o1=O0.extend({task:KB.optional()}),wG=(Q)=>o1.safeParse(Q).success,Y0=N({method:D(),params:O0.loose().optional()}),M0=N({_meta:r6.optional()}),q0=N({method:D(),params:M0.loose().optional()}),W0=B0({_meta:r6.optional()}),QQ=m([D(),f().int()]),PG=N({jsonrpc:w(e9),id:QQ,...Y0.shape}).strict(),n6=(Q)=>PG.safeParse(Q).success,IG=N({jsonrpc:w(e9),...q0.shape}).strict(),EG=(Q)=>IG.safeParse(Q).success,o6=N({jsonrpc:w(e9),id:QQ,result:W0}).strict(),t1=(Q)=>o6.safeParse(Q).success;var _;(function(Q){Q[Q.ConnectionClosed=-32000]="ConnectionClosed",Q[Q.RequestTimeout=-32001]="RequestTimeout",Q[Q.ParseError=-32700]="ParseError",Q[Q.InvalidRequest=-32600]="InvalidRequest",Q[Q.MethodNotFound=-32601]="MethodNotFound",Q[Q.InvalidParams=-32602]="InvalidParams",Q[Q.InternalError=-32603]="InternalError",Q[Q.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(_||(_={}));var t6=N({jsonrpc:w(e9),id:QQ.optional(),error:N({code:f().int(),message:D(),data:r().optional()})}).strict();var bG=(Q)=>t6.safeParse(Q).success;var TG=m([PG,IG,o6,t6]),kq=m([o6,t6]),XQ=W0.strict(),AB=M0.extend({requestId:QQ.optional(),reason:D().optional()}),YQ=q0.extend({method:w("notifications/cancelled"),params:AB}),LB=N({src:D(),mimeType:D().optional(),sizes:v(D()).optional(),theme:A0(["light","dark"]).optional()}),a1=N({icons:v(LB).optional()}),M1=N({name:D(),title:D().optional()}),jG=M1.extend({...M1.shape,...a1.shape,version:D(),websiteUrl:D().optional(),description:D().optional()}),FB=a9(N({applyDefaults:e().optional()}),o(D(),r())),DB=d6((Q)=>{if(Q&&typeof Q==="object"&&!Array.isArray(Q)){if(Object.keys(Q).length===0)return{form:{}}}return Q},a9(N({form:FB.optional(),url:X0.optional()}),o(D(),r()).optional())),UB=B0({list:X0.optional(),cancel:X0.optional(),requests:B0({sampling:B0({createMessage:X0.optional()}).optional(),elicitation:B0({create:X0.optional()}).optional()}).optional()}),VB=B0({list:X0.optional(),cancel:X0.optional(),requests:B0({tools:B0({call:X0.optional()}).optional()}).optional()}),OB=N({experimental:o(D(),X0).optional(),sampling:N({context:X0.optional(),tools:X0.optional()}).optional(),elicitation:DB.optional(),roots:N({listChanged:e().optional()}).optional(),tasks:UB.optional()}),ZB=O0.extend({protocolVersion:D(),capabilities:OB,clientInfo:jG}),a6=Y0.extend({method:w("initialize"),params:ZB});var MB=N({experimental:o(D(),X0).optional(),logging:X0.optional(),completions:X0.optional(),prompts:N({listChanged:e().optional()}).optional(),resources:N({subscribe:e().optional(),listChanged:e().optional()}).optional(),tools:N({listChanged:e().optional()}).optional(),tasks:VB.optional()}),qB=W0.extend({protocolVersion:D(),capabilities:MB,serverInfo:jG,instructions:D().optional()}),s6=q0.extend({method:w("notifications/initialized"),params:M0.optional()});var WQ=Y0.extend({method:w("ping"),params:O0.optional()}),NB=N({progress:f(),total:t(f()),message:t(D())}),wB=N({...M0.shape,...NB.shape,progressToken:qG}),GQ=q0.extend({method:w("notifications/progress"),params:wB}),PB=O0.extend({cursor:NG.optional()}),s1=Y0.extend({params:PB.optional()}),e1=W0.extend({nextCursor:NG.optional()}),IB=A0(["working","input_required","completed","failed","cancelled"]),Q9=N({taskId:D(),status:IB,ttl:m([f(),c6()]),createdAt:D(),lastUpdatedAt:D(),pollInterval:t(f()),statusMessage:t(D())}),q1=W0.extend({task:Q9}),EB=M0.merge(Q9),X9=q0.extend({method:w("notifications/tasks/status"),params:EB}),JQ=Y0.extend({method:w("tasks/get"),params:O0.extend({taskId:D()})}),HQ=W0.merge(Q9),$Q=Y0.extend({method:w("tasks/result"),params:O0.extend({taskId:D()})}),vq=W0.loose(),BQ=s1.extend({method:w("tasks/list")}),KQ=e1.extend({tasks:v(Q9)}),zQ=Y0.extend({method:w("tasks/cancel"),params:O0.extend({taskId:D()})}),RG=W0.merge(Q9),SG=N({uri:D(),mimeType:t(D()),_meta:o(D(),r()).optional()}),CG=SG.extend({text:D()}),e6=D().refine((Q)=>{try{return atob(Q),!0}catch{return!1}},{message:"Invalid Base64 string"}),kG=SG.extend({blob:e6}),Y9=A0(["user","assistant"]),N1=N({audience:v(Y9).optional(),priority:f().min(0).max(1).optional(),lastModified:n1.datetime({offset:!0}).optional()}),vG=N({...M1.shape,...a1.shape,uri:D(),description:t(D()),mimeType:t(D()),annotations:N1.optional(),_meta:t(B0({}))}),bB=N({...M1.shape,...a1.shape,uriTemplate:D(),description:t(D()),mimeType:t(D()),annotations:N1.optional(),_meta:t(B0({}))}),TB=s1.extend({method:w("resources/list")}),jB=e1.extend({resources:v(vG)}),RB=s1.extend({method:w("resources/templates/list")}),SB=e1.extend({resourceTemplates:v(bB)}),Q8=O0.extend({uri:D()}),CB=Q8,kB=Y0.extend({method:w("resources/read"),params:CB}),vB=W0.extend({contents:v(m([CG,kG]))}),_B=q0.extend({method:w("notifications/resources/list_changed"),params:M0.optional()}),xB=Q8,gB=Y0.extend({method:w("resources/subscribe"),params:xB}),yB=Q8,hB=Y0.extend({method:w("resources/unsubscribe"),params:yB}),uB=M0.extend({uri:D()}),fB=q0.extend({method:w("notifications/resources/updated"),params:uB}),lB=N({name:D(),description:t(D()),required:t(e())}),mB=N({...M1.shape,...a1.shape,description:t(D()),arguments:t(v(lB)),_meta:t(B0({}))}),cB=s1.extend({method:w("prompts/list")}),pB=e1.extend({prompts:v(mB)}),dB=O0.extend({name:D(),arguments:o(D(),D()).optional()}),iB=Y0.extend({method:w("prompts/get"),params:dB}),X8=N({type:w("text"),text:D(),annotations:N1.optional(),_meta:o(D(),r()).optional()}),Y8=N({type:w("image"),data:e6,mimeType:D(),annotations:N1.optional(),_meta:o(D(),r()).optional()}),W8=N({type:w("audio"),data:e6,mimeType:D(),annotations:N1.optional(),_meta:o(D(),r()).optional()}),rB=N({type:w("tool_use"),name:D(),id:D(),input:o(D(),r()),_meta:o(D(),r()).optional()}),nB=N({type:w("resource"),resource:m([CG,kG]),annotations:N1.optional(),_meta:o(D(),r()).optional()}),oB=vG.extend({type:w("resource_link")}),G8=m([X8,Y8,W8,oB,nB]),tB=N({role:Y9,content:G8}),aB=W0.extend({description:D().optional(),messages:v(tB)}),sB=q0.extend({method:w("notifications/prompts/list_changed"),params:M0.optional()}),eB=N({title:D().optional(),readOnlyHint:e().optional(),destructiveHint:e().optional(),idempotentHint:e().optional(),openWorldHint:e().optional()}),QK=N({taskSupport:A0(["required","optional","forbidden"]).optional()}),_G=N({...M1.shape,...a1.shape,description:D().optional(),inputSchema:N({type:w("object"),properties:o(D(),X0).optional(),required:v(D()).optional()}).catchall(r()),outputSchema:N({type:w("object"),properties:o(D(),X0).optional(),required:v(D()).optional()}).catchall(r()).optional(),annotations:eB.optional(),execution:QK.optional(),_meta:o(D(),r()).optional()}),J8=s1.extend({method:w("tools/list")}),XK=e1.extend({tools:v(_G)}),AQ=W0.extend({content:v(G8).default([]),structuredContent:o(D(),r()).optional(),isError:e().optional()}),_q=AQ.or(W0.extend({toolResult:r()})),YK=o1.extend({name:D(),arguments:o(D(),r()).optional()}),W9=Y0.extend({method:w("tools/call"),params:YK}),WK=q0.extend({method:w("notifications/tools/list_changed"),params:M0.optional()}),xq=N({autoRefresh:e().default(!0),debounceMs:f().int().nonnegative().default(300)}),G9=A0(["debug","info","notice","warning","error","critical","alert","emergency"]),GK=O0.extend({level:G9}),H8=Y0.extend({method:w("logging/setLevel"),params:GK}),JK=M0.extend({level:G9,logger:D().optional(),data:r()}),HK=q0.extend({method:w("notifications/message"),params:JK}),$K=N({name:D().optional()}),BK=N({hints:v($K).optional(),costPriority:f().min(0).max(1).optional(),speedPriority:f().min(0).max(1).optional(),intelligencePriority:f().min(0).max(1).optional()}),KK=N({mode:A0(["auto","required","none"]).optional()}),zK=N({type:w("tool_result"),toolUseId:D().describe("The unique identifier for the corresponding tool call."),content:v(G8).default([]),structuredContent:N({}).loose().optional(),isError:e().optional(),_meta:o(D(),r()).optional()}),AK=p6("type",[X8,Y8,W8]),s9=p6("type",[X8,Y8,W8,rB,zK]),LK=N({role:Y9,content:m([s9,v(s9)]),_meta:o(D(),r()).optional()}),FK=o1.extend({messages:v(LK),modelPreferences:BK.optional(),systemPrompt:D().optional(),includeContext:A0(["none","thisServer","allServers"]).optional(),temperature:f().optional(),maxTokens:f().int(),stopSequences:v(D()).optional(),metadata:X0.optional(),tools:v(_G).optional(),toolChoice:KK.optional()}),DK=Y0.extend({method:w("sampling/createMessage"),params:FK}),$8=W0.extend({model:D(),stopReason:t(A0(["endTurn","stopSequence","maxTokens"]).or(D())),role:Y9,content:AK}),B8=W0.extend({model:D(),stopReason:t(A0(["endTurn","stopSequence","maxTokens","toolUse"]).or(D())),role:Y9,content:m([s9,v(s9)])}),UK=N({type:w("boolean"),title:D().optional(),description:D().optional(),default:e().optional()}),VK=N({type:w("string"),title:D().optional(),description:D().optional(),minLength:f().optional(),maxLength:f().optional(),format:A0(["email","uri","date","date-time"]).optional(),default:D().optional()}),OK=N({type:A0(["number","integer"]),title:D().optional(),description:D().optional(),minimum:f().optional(),maximum:f().optional(),default:f().optional()}),ZK=N({type:w("string"),title:D().optional(),description:D().optional(),enum:v(D()),default:D().optional()}),MK=N({type:w("string"),title:D().optional(),description:D().optional(),oneOf:v(N({const:D(),title:D()})),default:D().optional()}),qK=N({type:w("string"),title:D().optional(),description:D().optional(),enum:v(D()),enumNames:v(D()).optional(),default:D().optional()}),NK=m([ZK,MK]),wK=N({type:w("array"),title:D().optional(),description:D().optional(),minItems:f().optional(),maxItems:f().optional(),items:N({type:w("string"),enum:v(D())}),default:v(D()).optional()}),PK=N({type:w("array"),title:D().optional(),description:D().optional(),minItems:f().optional(),maxItems:f().optional(),items:N({anyOf:v(N({const:D(),title:D()}))}),default:v(D()).optional()}),IK=m([wK,PK]),EK=m([qK,NK,IK]),bK=m([EK,UK,VK,OK]),TK=o1.extend({mode:w("form").optional(),message:D(),requestedSchema:N({type:w("object"),properties:o(D(),bK),required:v(D()).optional()})}),jK=o1.extend({mode:w("url"),message:D(),elicitationId:D(),url:D().url()}),RK=m([TK,jK]),SK=Y0.extend({method:w("elicitation/create"),params:RK}),CK=M0.extend({elicitationId:D()}),kK=q0.extend({method:w("notifications/elicitation/complete"),params:CK}),LQ=W0.extend({action:A0(["accept","decline","cancel"]),content:d6((Q)=>Q===null?void 0:Q,o(D(),m([D(),f(),e(),v(D())])).optional())}),vK=N({type:w("ref/resource"),uri:D()});var _K=N({type:w("ref/prompt"),name:D()}),xK=O0.extend({ref:m([_K,vK]),argument:N({name:D(),value:D()}),context:N({arguments:o(D(),D()).optional()}).optional()}),gK=Y0.extend({method:w("completion/complete"),params:xK});var yK=W0.extend({completion:B0({values:v(D()).max(100),total:t(f().int()),hasMore:t(e())})}),hK=N({uri:D().startsWith("file://"),name:D().optional(),_meta:o(D(),r()).optional()}),uK=Y0.extend({method:w("roots/list"),params:O0.optional()}),K8=W0.extend({roots:v(hK)}),fK=q0.extend({method:w("notifications/roots/list_changed"),params:M0.optional()}),gq=m([WQ,a6,gK,H8,iB,cB,TB,RB,kB,gB,hB,W9,J8,JQ,$Q,BQ,zQ]),yq=m([YQ,GQ,s6,fK,X9]),hq=m([XQ,$8,B8,LQ,K8,HQ,KQ,q1]),uq=m([WQ,DK,SK,uK,JQ,$Q,BQ,zQ]),fq=m([YQ,GQ,HK,fB,_B,WK,sB,X9,kK]),lq=m([XQ,qB,yK,aB,pB,jB,SB,vB,AQ,XK,HQ,KQ,q1]);class C extends Error{constructor(Q,X,Y){super(`MCP error ${Q}: ${X}`);this.code=Q,this.data=Y,this.name="McpError"}static fromError(Q,X,Y){if(Q===_.UrlElicitationRequired&&Y){let W=Y;if(W.elicitations)return new xG(W.elicitations,X)}return new C(Q,X,Y)}}class xG extends C{constructor(Q,X=`URL elicitation${Q.length>1?"s":""} required`){super(_.UrlElicitationRequired,X,{elicitations:Q})}get elicitations(){return this.data?.elicitations??[]}}function s0(Q){return Q==="completed"||Q==="failed"||Q==="cancelled"}var lK=Symbol("Let zodToJsonSchema decide on which parser to use");var qN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function z8(Q){let Y=o9(Q)?.method;if(!Y)throw Error("Schema is missing a method literal");let W=cW(Y);if(typeof W!=="string")throw Error("Schema method literal must be a string");return W}function A8(Q,X){let Y=t0(Q,X);if(!Y.success)throw Y.error;return Y.data}var rK=60000;class L8{constructor(Q){if(this._options=Q,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(YQ,(X)=>{this._oncancel(X)}),this.setNotificationHandler(GQ,(X)=>{this._onprogress(X)}),this.setRequestHandler(WQ,(X)=>({})),this._taskStore=Q?.taskStore,this._taskMessageQueue=Q?.taskMessageQueue,this._taskStore)this.setRequestHandler(JQ,async(X,Y)=>{let W=await this._taskStore.getTask(X.params.taskId,Y.sessionId);if(!W)throw new C(_.InvalidParams,"Failed to retrieve task: Task not found");return{...W}}),this.setRequestHandler($Q,async(X,Y)=>{let W=async()=>{let G=X.params.taskId;if(this._taskMessageQueue){let H;while(H=await this._taskMessageQueue.dequeue(G,Y.sessionId)){if(H.type==="response"||H.type==="error"){let $=H.message,B=$.id,K=this._requestResolvers.get(B);if(K)if(this._requestResolvers.delete(B),H.type==="response")K($);else{let z=$,A=new C(z.error.code,z.error.message,z.error.data);K(A)}else{let z=H.type==="response"?"Response":"Error";this._onerror(Error(`${z} handler missing for request ${B}`))}continue}await this._transport?.send(H.message,{relatedRequestId:Y.requestId})}}let J=await this._taskStore.getTask(G,Y.sessionId);if(!J)throw new C(_.InvalidParams,`Task not found: ${G}`);if(!s0(J.status))return await this._waitForTaskUpdate(G,Y.signal),await W();if(s0(J.status)){let H=await this._taskStore.getTaskResult(G,Y.sessionId);return this._clearTaskQueue(G),{...H,_meta:{...H._meta,[a0]:{taskId:G}}}}return await W()};return await W()}),this.setRequestHandler(BQ,async(X,Y)=>{try{let{tasks:W,nextCursor:G}=await this._taskStore.listTasks(X.params?.cursor,Y.sessionId);return{tasks:W,nextCursor:G,_meta:{}}}catch(W){throw new C(_.InvalidParams,`Failed to list tasks: ${W instanceof Error?W.message:String(W)}`)}}),this.setRequestHandler(zQ,async(X,Y)=>{try{let W=await this._taskStore.getTask(X.params.taskId,Y.sessionId);if(!W)throw new C(_.InvalidParams,`Task not found: ${X.params.taskId}`);if(s0(W.status))throw new C(_.InvalidParams,`Cannot cancel task in terminal status: ${W.status}`);await this._taskStore.updateTaskStatus(X.params.taskId,"cancelled","Client cancelled task execution.",Y.sessionId),this._clearTaskQueue(X.params.taskId);let G=await this._taskStore.getTask(X.params.taskId,Y.sessionId);if(!G)throw new C(_.InvalidParams,`Task not found after cancellation: ${X.params.taskId}`);return{_meta:{},...G}}catch(W){if(W instanceof C)throw W;throw new C(_.InvalidRequest,`Failed to cancel task: ${W instanceof Error?W.message:String(W)}`)}})}async _oncancel(Q){if(!Q.params.requestId)return;this._requestHandlerAbortControllers.get(Q.params.requestId)?.abort(Q.params.reason)}_setupTimeout(Q,X,Y,W,G=!1){this._timeoutInfo.set(Q,{timeoutId:setTimeout(W,X),startTime:Date.now(),timeout:X,maxTotalTimeout:Y,resetTimeoutOnProgress:G,onTimeout:W})}_resetTimeout(Q){let X=this._timeoutInfo.get(Q);if(!X)return!1;let Y=Date.now()-X.startTime;if(X.maxTotalTimeout&&Y>=X.maxTotalTimeout)throw this._timeoutInfo.delete(Q),C.fromError(_.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:X.maxTotalTimeout,totalElapsed:Y});return clearTimeout(X.timeoutId),X.timeoutId=setTimeout(X.onTimeout,X.timeout),!0}_cleanupTimeout(Q){let X=this._timeoutInfo.get(Q);if(X)clearTimeout(X.timeoutId),this._timeoutInfo.delete(Q)}async connect(Q){this._transport=Q;let X=this.transport?.onclose;this._transport.onclose=()=>{X?.(),this._onclose()};let Y=this.transport?.onerror;this._transport.onerror=(G)=>{Y?.(G),this._onerror(G)};let W=this._transport?.onmessage;this._transport.onmessage=(G,J)=>{if(W?.(G,J),t1(G)||bG(G))this._onresponse(G);else if(n6(G))this._onrequest(G,J);else if(EG(G))this._onnotification(G);else this._onerror(Error(`Unknown message type: ${JSON.stringify(G)}`))},await this._transport.start()}_onclose(){let Q=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let X=C.fromError(_.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(let Y of Q.values())Y(X)}_onerror(Q){this.onerror?.(Q)}_onnotification(Q){let X=this._notificationHandlers.get(Q.method)??this.fallbackNotificationHandler;if(X===void 0)return;Promise.resolve().then(()=>X(Q)).catch((Y)=>this._onerror(Error(`Uncaught error in notification handler: ${Y}`)))}_onrequest(Q,X){let Y=this._requestHandlers.get(Q.method)??this.fallbackRequestHandler,W=this._transport,G=Q.params?._meta?.[a0]?.taskId;if(Y===void 0){let K={jsonrpc:"2.0",id:Q.id,error:{code:_.MethodNotFound,message:"Method not found"}};if(G&&this._taskMessageQueue)this._enqueueTaskMessage(G,{type:"error",message:K,timestamp:Date.now()},W?.sessionId).catch((z)=>this._onerror(Error(`Failed to enqueue error response: ${z}`)));else W?.send(K).catch((z)=>this._onerror(Error(`Failed to send an error response: ${z}`)));return}let J=new AbortController;this._requestHandlerAbortControllers.set(Q.id,J);let H=wG(Q.params)?Q.params.task:void 0,$=this._taskStore?this.requestTaskStore(Q,W?.sessionId):void 0,B={signal:J.signal,sessionId:W?.sessionId,_meta:Q.params?._meta,sendNotification:async(K)=>{let z={relatedRequestId:Q.id};if(G)z.relatedTask={taskId:G};await this.notification(K,z)},sendRequest:async(K,z,A)=>{let F={...A,relatedRequestId:Q.id};if(G&&!F.relatedTask)F.relatedTask={taskId:G};let L=F.relatedTask?.taskId??G;if(L&&$)await $.updateTaskStatus(L,"input_required");return await this.request(K,z,F)},authInfo:X?.authInfo,requestId:Q.id,requestInfo:X?.requestInfo,taskId:G,taskStore:$,taskRequestedTtl:H?.ttl,closeSSEStream:X?.closeSSEStream,closeStandaloneSSEStream:X?.closeStandaloneSSEStream};Promise.resolve().then(()=>{if(H)this.assertTaskHandlerCapability(Q.method)}).then(()=>Y(Q,B)).then(async(K)=>{if(J.signal.aborted)return;let z={result:K,jsonrpc:"2.0",id:Q.id};if(G&&this._taskMessageQueue)await this._enqueueTaskMessage(G,{type:"response",message:z,timestamp:Date.now()},W?.sessionId);else await W?.send(z)},async(K)=>{if(J.signal.aborted)return;let z={jsonrpc:"2.0",id:Q.id,error:{code:Number.isSafeInteger(K.code)?K.code:_.InternalError,message:K.message??"Internal error",...K.data!==void 0&&{data:K.data}}};if(G&&this._taskMessageQueue)await this._enqueueTaskMessage(G,{type:"error",message:z,timestamp:Date.now()},W?.sessionId);else await W?.send(z)}).catch((K)=>this._onerror(Error(`Failed to send response: ${K}`))).finally(()=>{this._requestHandlerAbortControllers.delete(Q.id)})}_onprogress(Q){let{progressToken:X,...Y}=Q.params,W=Number(X),G=this._progressHandlers.get(W);if(!G){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(Q)}`));return}let J=this._responseHandlers.get(W),H=this._timeoutInfo.get(W);if(H&&J&&H.resetTimeoutOnProgress)try{this._resetTimeout(W)}catch($){this._responseHandlers.delete(W),this._progressHandlers.delete(W),this._cleanupTimeout(W),J($);return}G(Y)}_onresponse(Q){let X=Number(Q.id),Y=this._requestResolvers.get(X);if(Y){if(this._requestResolvers.delete(X),t1(Q))Y(Q);else{let J=new C(Q.error.code,Q.error.message,Q.error.data);Y(J)}return}let W=this._responseHandlers.get(X);if(W===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(Q)}`));return}this._responseHandlers.delete(X),this._cleanupTimeout(X);let G=!1;if(t1(Q)&&Q.result&&typeof Q.result==="object"){let J=Q.result;if(J.task&&typeof J.task==="object"){let H=J.task;if(typeof H.taskId==="string")G=!0,this._taskProgressTokens.set(H.taskId,X)}}if(!G)this._progressHandlers.delete(X);if(t1(Q))W(Q);else{let J=C.fromError(Q.error.code,Q.error.message,Q.error.data);W(J)}}get transport(){return this._transport}async close(){await this._transport?.close()}async*requestStream(Q,X,Y){let{task:W}=Y??{};if(!W){try{yield{type:"result",result:await this.request(Q,X,Y)}}catch(J){yield{type:"error",error:J instanceof C?J:new C(_.InternalError,String(J))}}return}let G;try{let J=await this.request(Q,q1,Y);if(J.task)G=J.task.taskId,yield{type:"taskCreated",task:J.task};else throw new C(_.InternalError,"Task creation did not return a task");while(!0){let H=await this.getTask({taskId:G},Y);if(yield{type:"taskStatus",task:H},s0(H.status)){if(H.status==="completed")yield{type:"result",result:await this.getTaskResult({taskId:G},X,Y)};else if(H.status==="failed")yield{type:"error",error:new C(_.InternalError,`Task ${G} failed`)};else if(H.status==="cancelled")yield{type:"error",error:new C(_.InternalError,`Task ${G} was cancelled`)};return}if(H.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:G},X,Y)};return}let $=H.pollInterval??this._options?.defaultTaskPollInterval??1000;await new Promise((B)=>setTimeout(B,$)),Y?.signal?.throwIfAborted()}}catch(J){yield{type:"error",error:J instanceof C?J:new C(_.InternalError,String(J))}}}request(Q,X,Y){let{relatedRequestId:W,resumptionToken:G,onresumptiontoken:J,task:H,relatedTask:$}=Y??{};return new Promise((B,K)=>{let z=(Z)=>{K(Z)};if(!this._transport){z(Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{if(this.assertCapabilityForMethod(Q.method),H)this.assertTaskCapability(Q.method)}catch(Z){z(Z);return}Y?.signal?.throwIfAborted();let A=this._requestMessageId++,F={...Q,jsonrpc:"2.0",id:A};if(Y?.onprogress)this._progressHandlers.set(A,Y.onprogress),F.params={...Q.params,_meta:{...Q.params?._meta||{},progressToken:A}};if(H)F.params={...F.params,task:H};if($)F.params={...F.params,_meta:{...F.params?._meta||{},[a0]:$}};let L=(Z)=>{this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(Z)}},{relatedRequestId:W,resumptionToken:G,onresumptiontoken:J}).catch((E)=>this._onerror(Error(`Failed to send cancellation: ${E}`)));let T=Z instanceof C?Z:new C(_.RequestTimeout,String(Z));K(T)};this._responseHandlers.set(A,(Z)=>{if(Y?.signal?.aborted)return;if(Z instanceof Error)return K(Z);try{let T=t0(X,Z.result);if(!T.success)K(T.error);else B(T.data)}catch(T){K(T)}}),Y?.signal?.addEventListener("abort",()=>{L(Y?.signal?.reason)});let V=Y?.timeout??rK,O=()=>L(C.fromError(_.RequestTimeout,"Request timed out",{timeout:V}));this._setupTimeout(A,V,Y?.maxTotalTimeout,O,Y?.resetTimeoutOnProgress??!1);let M=$?.taskId;if(M){let Z=(T)=>{let E=this._responseHandlers.get(A);if(E)E(T);else this._onerror(Error(`Response handler missing for side-channeled request ${A}`))};this._requestResolvers.set(A,Z),this._enqueueTaskMessage(M,{type:"request",message:F,timestamp:Date.now()}).catch((T)=>{this._cleanupTimeout(A),K(T)})}else this._transport.send(F,{relatedRequestId:W,resumptionToken:G,onresumptiontoken:J}).catch((Z)=>{this._cleanupTimeout(A),K(Z)})})}async getTask(Q,X){return this.request({method:"tasks/get",params:Q},HQ,X)}async getTaskResult(Q,X,Y){return this.request({method:"tasks/result",params:Q},X,Y)}async listTasks(Q,X){return this.request({method:"tasks/list",params:Q},KQ,X)}async cancelTask(Q,X){return this.request({method:"tasks/cancel",params:Q},RG,X)}async notification(Q,X){if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(Q.method);let Y=X?.relatedTask?.taskId;if(Y){let H={...Q,jsonrpc:"2.0",params:{...Q.params,_meta:{...Q.params?._meta||{},[a0]:X.relatedTask}}};await this._enqueueTaskMessage(Y,{type:"notification",message:H,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(Q.method)&&!Q.params&&!X?.relatedRequestId&&!X?.relatedTask){if(this._pendingDebouncedNotifications.has(Q.method))return;this._pendingDebouncedNotifications.add(Q.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(Q.method),!this._transport)return;let H={...Q,jsonrpc:"2.0"};if(X?.relatedTask)H={...H,params:{...H.params,_meta:{...H.params?._meta||{},[a0]:X.relatedTask}}};this._transport?.send(H,X).catch(($)=>this._onerror($))});return}let J={...Q,jsonrpc:"2.0"};if(X?.relatedTask)J={...J,params:{...J.params,_meta:{...J.params?._meta||{},[a0]:X.relatedTask}}};await this._transport.send(J,X)}setRequestHandler(Q,X){let Y=z8(Q);this.assertRequestHandlerCapability(Y),this._requestHandlers.set(Y,(W,G)=>{let J=A8(Q,W);return Promise.resolve(X(J,G))})}removeRequestHandler(Q){this._requestHandlers.delete(Q)}assertCanSetRequestHandler(Q){if(this._requestHandlers.has(Q))throw Error(`A request handler for ${Q} already exists, which would be overridden`)}setNotificationHandler(Q,X){let Y=z8(Q);this._notificationHandlers.set(Y,(W)=>{let G=A8(Q,W);return Promise.resolve(X(G))})}removeNotificationHandler(Q){this._notificationHandlers.delete(Q)}_cleanupTaskProgressHandler(Q){let X=this._taskProgressTokens.get(Q);if(X!==void 0)this._progressHandlers.delete(X),this._taskProgressTokens.delete(Q)}async _enqueueTaskMessage(Q,X,Y){if(!this._taskStore||!this._taskMessageQueue)throw Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let W=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(Q,X,Y,W)}async _clearTaskQueue(Q,X){if(this._taskMessageQueue){let Y=await this._taskMessageQueue.dequeueAll(Q,X);for(let W of Y)if(W.type==="request"&&n6(W.message)){let G=W.message.id,J=this._requestResolvers.get(G);if(J)J(new C(_.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(G);else this._onerror(Error(`Resolver missing for request ${G} during task ${Q} cleanup`))}}}async _waitForTaskUpdate(Q,X){let Y=this._options?.defaultTaskPollInterval??1000;try{let W=await this._taskStore?.getTask(Q);if(W?.pollInterval)Y=W.pollInterval}catch{}return new Promise((W,G)=>{if(X.aborted){G(new C(_.InvalidRequest,"Request cancelled"));return}let J=setTimeout(W,Y);X.addEventListener("abort",()=>{clearTimeout(J),G(new C(_.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(Q,X){let Y=this._taskStore;if(!Y)throw Error("No task store configured");return{createTask:async(W)=>{if(!Q)throw Error("No request provided");return await Y.createTask(W,Q.id,{method:Q.method,params:Q.params},X)},getTask:async(W)=>{let G=await Y.getTask(W,X);if(!G)throw new C(_.InvalidParams,"Failed to retrieve task: Task not found");return G},storeTaskResult:async(W,G,J)=>{await Y.storeTaskResult(W,G,J,X);let H=await Y.getTask(W,X);if(H){let $=X9.parse({method:"notifications/tasks/status",params:H});if(await this.notification($),s0(H.status))this._cleanupTaskProgressHandler(W)}},getTaskResult:(W)=>{return Y.getTaskResult(W,X)},updateTaskStatus:async(W,G,J)=>{let H=await Y.getTask(W,X);if(!H)throw new C(_.InvalidParams,`Task "${W}" not found - it may have been cleaned up`);if(s0(H.status))throw new C(_.InvalidParams,`Cannot update task "${W}" from terminal status "${H.status}" to "${G}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await Y.updateTaskStatus(W,G,J,X);let $=await Y.getTask(W,X);if($){let B=X9.parse({method:"notifications/tasks/status",params:$});if(await this.notification(B),s0($.status))this._cleanupTaskProgressHandler(W)}},listTasks:(W)=>{return Y.listTasks(W,X)}}}}function gG(Q){return Q!==null&&typeof Q==="object"&&!Array.isArray(Q)}function yG(Q,X){let Y={...Q};for(let W in X){let G=W,J=X[G];if(J===void 0)continue;let H=Y[G];if(gG(H)&&gG(J))Y[G]={...H,...J};else Y[G]=J}return Y}var D3=EX(HX(),1),U3=EX(F3(),1);function YZ(){let Q=new D3.default({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return U3.default(Q),Q}class VX{constructor(Q){this._ajv=Q??YZ()}getValidator(Q){let X="$id"in Q&&typeof Q.$id==="string"?this._ajv.getSchema(Q.$id)??this._ajv.compile(Q):this._ajv.compile(Q);return(Y)=>{if(X(Y))return{valid:!0,data:Y,errorMessage:void 0};else return{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(X.errors)}}}}class OX{constructor(Q){this._server=Q}requestStream(Q,X,Y){return this._server.requestStream(Q,X,Y)}async getTask(Q,X){return this._server.getTask({taskId:Q},X)}async getTaskResult(Q,X,Y){return this._server.getTaskResult({taskId:Q},X,Y)}async listTasks(Q,X){return this._server.listTasks(Q?{cursor:Q}:void 0,X)}async cancelTask(Q,X){return this._server.cancelTask({taskId:Q},X)}}function V3(Q,X,Y){if(!Q)throw Error(`${Y} does not support task creation (required for ${X})`);switch(X){case"tools/call":if(!Q.tools?.call)throw Error(`${Y} does not support task creation for tools/call (required for ${X})`);break;default:break}}function O3(Q,X,Y){if(!Q)throw Error(`${Y} does not support task creation (required for ${X})`);switch(X){case"sampling/createMessage":if(!Q.sampling?.createMessage)throw Error(`${Y} does not support task creation for sampling/createMessage (required for ${X})`);break;case"elicitation/create":if(!Q.elicitation?.create)throw Error(`${Y} does not support task creation for elicitation/create (required for ${X})`);break;default:break}}class ZX extends L8{constructor(Q,X){super(X);if(this._serverInfo=Q,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(G9.options.map((Y,W)=>[Y,W])),this.isMessageIgnored=(Y,W)=>{let G=this._loggingLevels.get(W);return G?this.LOG_LEVEL_SEVERITY.get(Y)<this.LOG_LEVEL_SEVERITY.get(G):!1},this._capabilities=X?.capabilities??{},this._instructions=X?.instructions,this._jsonSchemaValidator=X?.jsonSchemaValidator??new VX,this.setRequestHandler(a6,(Y)=>this._oninitialize(Y)),this.setNotificationHandler(s6,()=>this.oninitialized?.()),this._capabilities.logging)this.setRequestHandler(H8,async(Y,W)=>{let G=W.sessionId||W.requestInfo?.headers["mcp-session-id"]||void 0,{level:J}=Y.params,H=G9.safeParse(J);if(H.success)this._loggingLevels.set(G,H.data);return{}})}get experimental(){if(!this._experimental)this._experimental={tasks:new OX(this)};return this._experimental}registerCapabilities(Q){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=yG(this._capabilities,Q)}setRequestHandler(Q,X){let W=o9(Q)?.method;if(!W)throw Error("Schema is missing a method literal");let G;if(Z1(W)){let H=W;G=H._zod?.def?.value??H.value}else{let H=W;G=H._def?.value??H.value}if(typeof G!=="string")throw Error("Schema method literal must be a string");if(G==="tools/call"){let H=async($,B)=>{let K=t0(W9,$);if(!K.success){let L=K.error instanceof Error?K.error.message:String(K.error);throw new C(_.InvalidParams,`Invalid tools/call request: ${L}`)}let{params:z}=K.data,A=await Promise.resolve(X($,B));if(z.task){let L=t0(q1,A);if(!L.success){let V=L.error instanceof Error?L.error.message:String(L.error);throw new C(_.InvalidParams,`Invalid task creation result: ${V}`)}return L.data}let F=t0(AQ,A);if(!F.success){let L=F.error instanceof Error?F.error.message:String(F.error);throw new C(_.InvalidParams,`Invalid tools/call result: ${L}`)}return F.data};return super.setRequestHandler(Q,H)}return super.setRequestHandler(Q,X)}assertCapabilityForMethod(Q){switch(Q){case"sampling/createMessage":if(!this._clientCapabilities?.sampling)throw Error(`Client does not support sampling (required for ${Q})`);break;case"elicitation/create":if(!this._clientCapabilities?.elicitation)throw Error(`Client does not support elicitation (required for ${Q})`);break;case"roots/list":if(!this._clientCapabilities?.roots)throw Error(`Client does not support listing roots (required for ${Q})`);break;case"ping":break}}assertNotificationCapability(Q){switch(Q){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${Q})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${Q})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${Q})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${Q})`);break;case"notifications/elicitation/complete":if(!this._clientCapabilities?.elicitation?.url)throw Error(`Client does not support URL elicitation (required for ${Q})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(Q){if(!this._capabilities)return;switch(Q){case"completion/complete":if(!this._capabilities.completions)throw Error(`Server does not support completions (required for ${Q})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${Q})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${Q})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${Q})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${Q})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw Error(`Server does not support tasks capability (required for ${Q})`);break;case"ping":case"initialize":break}}assertTaskCapability(Q){O3(this._clientCapabilities?.tasks?.requests,Q,"Client")}assertTaskHandlerCapability(Q){if(!this._capabilities)return;V3(this._capabilities.tasks?.requests,Q,"Server")}async _oninitialize(Q){let X=Q.params.protocolVersion;return this._clientCapabilities=Q.params.capabilities,this._clientVersion=Q.params.clientInfo,{protocolVersion:MG.includes(X)?X:i6,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},XQ)}async createMessage(Q,X){if(Q.tools||Q.toolChoice){if(!this._clientCapabilities?.sampling?.tools)throw Error("Client does not support sampling tools capability.")}if(Q.messages.length>0){let Y=Q.messages[Q.messages.length-1],W=Array.isArray(Y.content)?Y.content:[Y.content],G=W.some((B)=>B.type==="tool_result"),J=Q.messages.length>1?Q.messages[Q.messages.length-2]:void 0,H=J?Array.isArray(J.content)?J.content:[J.content]:[],$=H.some((B)=>B.type==="tool_use");if(G){if(W.some((B)=>B.type!=="tool_result"))throw Error("The last message must contain only tool_result content if any is present");if(!$)throw Error("tool_result blocks are not matching any tool_use from the previous message")}if($){let B=new Set(H.filter((z)=>z.type==="tool_use").map((z)=>z.id)),K=new Set(W.filter((z)=>z.type==="tool_result").map((z)=>z.toolUseId));if(B.size!==K.size||![...B].every((z)=>K.has(z)))throw Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}if(Q.tools)return this.request({method:"sampling/createMessage",params:Q},B8,X);return this.request({method:"sampling/createMessage",params:Q},$8,X)}async elicitInput(Q,X){switch(Q.mode??"form"){case"url":{if(!this._clientCapabilities?.elicitation?.url)throw Error("Client does not support url elicitation.");let W=Q;return this.request({method:"elicitation/create",params:W},LQ,X)}case"form":{if(!this._clientCapabilities?.elicitation?.form)throw Error("Client does not support form elicitation.");let W=Q.mode==="form"?Q:{...Q,mode:"form"},G=await this.request({method:"elicitation/create",params:W},LQ,X);if(G.action==="accept"&&G.content&&W.requestedSchema)try{let H=this._jsonSchemaValidator.getValidator(W.requestedSchema)(G.content);if(!H.valid)throw new C(_.InvalidParams,`Elicitation response content does not match requested schema: ${H.errorMessage}`)}catch(J){if(J instanceof C)throw J;throw new C(_.InternalError,`Error validating elicitation response: ${J instanceof Error?J.message:String(J)}`)}return G}}}createElicitationCompletionNotifier(Q,X){if(!this._clientCapabilities?.elicitation?.url)throw Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:Q}},X)}async listRoots(Q,X){return this.request({method:"roots/list",params:Q},K8,X)}async sendLoggingMessage(Q,X){if(this._capabilities.logging){if(!this.isMessageIgnored(Q.level,X))return this.notification({method:"notifications/message",params:Q})}}async sendResourceUpdated(Q){return this.notification({method:"notifications/resources/updated",params:Q})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}import M3 from"node:process";class MX{append(Q){this._buffer=this._buffer?Buffer.concat([this._buffer,Q]):Q}readMessage(){if(!this._buffer)return null;let Q=this._buffer.indexOf(`
`);if(Q===-1)return null;let X=this._buffer.toString("utf8",0,Q).replace(/\r$/,"");return this._buffer=this._buffer.subarray(Q+1),WZ(X)}clear(){this._buffer=void 0}}function WZ(Q){return TG.parse(JSON.parse(Q))}function Z3(Q){return JSON.stringify(Q)+`
`}class qX{constructor(Q=M3.stdin,X=M3.stdout){this._stdin=Q,this._stdout=X,this._readBuffer=new MX,this._started=!1,this._ondata=(Y)=>{this._readBuffer.append(Y),this.processReadBuffer()},this._onerror=(Y)=>{this.onerror?.(Y)}}async start(){if(this._started)throw Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){while(!0)try{let Q=this._readBuffer.readMessage();if(Q===null)break;this.onmessage?.(Q)}catch(Q){this.onerror?.(Q)}}async close(){if(this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0)this._stdin.pause();this._readBuffer.clear(),this.onclose?.()}send(Q){return new Promise((X)=>{let Y=Z3(Q);if(this._stdout.write(Y))X();else this._stdout.once("drain",X)})}}var NX={WORKER_PORT:37888,WORKER_HOST:"127.0.0.1",JSON_LIMIT:"10mb",DB_CACHE_SIZE:5,CHROMA_CACHE_SIZE:3,CHROMA_BATCH_SIZE:100,CHROMA_CHUNK_SIZE:2000,SIMILARITY_THRESHOLD:0.7,DEFAULT_LIMIT:50,SEARCH_LIMIT:10,RESPONSE_MAX_CHARS:50000,ACCESS_UPDATE_INTERVAL_MS:300000,API_VERSION:"2.0.0"};var aQ=`http://${NX.WORKER_HOST}:${NX.WORKER_PORT}`;async function R9(Q,X){try{let Y=new URLSearchParams;for(let[H,$]of Object.entries(X))if($!==void 0&&$!==null)Y.append(H,String($));let W=`${aQ}${Q}?${Y}`,G=await fetch(W);if(!G.ok){let H=await G.text();throw Error(`Worker API error (${G.status}): ${H}`)}let J=await G.json();return{content:[{type:"text",text:JSON.stringify(J,null,2)}]}}catch(Y){return{content:[{type:"text",text:`Error calling Worker API: ${Y instanceof Error?Y.message:String(Y)}`}],isError:!0}}}async function GZ(Q,X){try{let Y=`${aQ}${Q}`,W=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!W.ok){let J=await W.text();throw Error(`Worker API error (${W.status}): ${J}`)}let G=await W.json();return{content:[{type:"text",text:JSON.stringify(G,null,2)}]}}catch(Y){return{content:[{type:"text",text:`Error calling Worker API: ${Y instanceof Error?Y.message:String(Y)}`}],isError:!0}}}async function JZ(){try{return(await fetch(`${aQ}/api/health`)).ok}catch{return!1}}var q3=[{name:"search",description:"  . SQLite   + Chroma   . Params: query (), limit ( ), type ( ), method ( )",inputSchema:{type:"object",properties:{query:{type:"string",description:""},limit:{type:"number",description:"  (: 20)"},type:{type:"string",enum:["prompt","response"],description:"  .     "},method:{type:"string",enum:["sqlite","semantic","hybrid"],description:" . sqlite:  , semantic:  , hybrid:   (: hybrid)"},project_path:{type:"string",description:" .     "}},required:["query"]},handler:async(Q)=>{let X={...Q};if(X.project_path)X.projectPath=X.project_path,delete X.project_path;return await GZ("/api/search",X)}},{name:"get_sessions",description:"  . Params: limit ( ), session_id ( ID)",inputSchema:{type:"object",properties:{limit:{type:"number",description:"  (: 50)"},session_id:{type:"string",description:"   "},project_path:{type:"string",description:" .      "}}},handler:async(Q)=>{let X={...Q};if(X.project_path)X.projectPath=X.project_path,delete X.project_path;return await R9("/api/sessions",X)}},{name:"get_prompts",description:"  . Params: limit ( ), session_id ( ID)",inputSchema:{type:"object",properties:{limit:{type:"number",description:"  (: 50)"},session_id:{type:"string",description:"   "},project_path:{type:"string",description:" .      "}}},handler:async(Q)=>{let X={...Q};if(X.project_path)X.projectPath=X.project_path,delete X.project_path;return await R9("/api/prompts",X)}},{name:"get_responses",description:"  . Params: limit ( ), session_id ( ID)",inputSchema:{type:"object",properties:{limit:{type:"number",description:"  (: 50)"},session_id:{type:"string",description:"   "},project_path:{type:"string",description:" .      "}}},handler:async(Q)=>{let X={...Q};if(X.project_path)X.projectPath=X.project_path,delete X.project_path;return await R9("/api/responses",X)}},{name:"get_stats",description:"   ( ,  ,   )",inputSchema:{type:"object",properties:{project_path:{type:"string",description:" .     "}}},handler:async(Q)=>{let X={...Q};if(X.project_path)X.projectPath=X.project_path,delete X.project_path;return await R9("/api/stats",X)}},{name:"get_projects",description:"   .   ID, , ,    .",inputSchema:{type:"object",properties:{}},handler:async()=>{return await R9("/api/projects",{})}}],wX=new ZX({name:"jikime-mem-mcp-server",version:"1.0.0"},{capabilities:{tools:{}}});wX.setRequestHandler(J8,async()=>{return{tools:q3.map((Q)=>({name:Q.name,description:Q.description,inputSchema:Q.inputSchema}))}});wX.setRequestHandler(W9,async(Q)=>{let X=q3.find((Y)=>Y.name===Q.params.name);if(!X)throw Error(`Unknown tool: ${Q.params.name}`);try{return await X.handler(Q.params.arguments||{})}catch(Y){return{content:[{type:"text",text:`Tool execution failed: ${Y instanceof Error?Y.message:String(Y)}`}],isError:!0}}});async function N3(){process.exit(0)}process.on("SIGTERM",N3);process.on("SIGINT",N3);async function HZ(){let Q=new qX;await wX.connect(Q),setTimeout(async()=>{if(!await JZ())console.error("[jikime-mem] Worker not available at",aQ),console.error("[jikime-mem] Start Worker with: npm run worker:start")},0)}HZ().catch((Q)=>{console.error("[jikime-mem] Fatal error:",Q),process.exit(0)});
